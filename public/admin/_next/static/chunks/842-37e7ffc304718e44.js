"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[842],{16508:function(e,t,n){n.d(t,{b:function(){return R}});var r=n(94776),l=n.n(r),a=n(52322),i=n(85409),o=n(11794),s=n(24917),u=n(41277),c=n(2784),d=n(95720),f=n(52829),m=n(78181);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function v(e,t){return h({},e,p({},t.name,t.value))}var b={searchValue:"",multiple:!1,files:[],isUploading:!1,isLoading:!0,selectedFiles:[],updateValue:function(){}},g=(0,c.createContext)(b),x=function(){return(0,c.useContext)(g)},j=n(96454),y=n(6277),w=function(){return{itemsWrap:(0,y.Z)("grid grid-cols-1 sm:grid-cols-2 gap-7 items-start min-h-[200px] my-3 py-3 max-h-[520px] overflow-auto"),itemRoot:(0,y.Z)("relative block group"),itemSquare:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,y.Z)("aspect-[3/2] w-full rounded-lg bg-white shadow-md overflow-hidden relative",e?"group-hover:shadow-lg duration-200":"cursor-default")},itemLabel:(0,y.Z)("mt-2 overflow-hidden text-ellipsis font-semibold group-hover:underline text-left mb-0 leading-8 block whitespace-nowrap")}},N=n(59401),k=n(31005),C=n(36335),O=w(),S=function(e){var t,n=e.id,r=e.filename,l=e.mimeType,i=x(),o=i.selectedFiles,s=i.updateValue,u=r.split(".").at(-1)||"unknown",d="image"===((null===(t=null===l||void 0===l?void 0:l.split("/"))||void 0===t?void 0:t[0])||"unknown"),f=(0,c.useCallback)((function(){s({name:"selectedFiles",value:n})}),[n,s]),m=(0,c.useMemo)((function(){return o.includes(n)}),[o,n]);return(0,a.jsxs)(N.k,{className:(0,y.Z)(O.itemRoot,"group"),onClick:f,type:"button",title:r,children:[(0,a.jsx)("div",{className:O.itemSquare(),children:d?(0,a.jsx)(k.Z,{alt:"uploaded file",imageId:n,className:"absolute top-0 left-0 h-full w-full object-cover",width:270}):(0,a.jsx)("div",{className:"flex h-full w-full",children:(0,a.jsx)("p",{className:"m-auto text-3xl font-bold text-gray-400",children:u})})}),(0,a.jsx)("h3",{className:O.itemLabel,children:r}),(0,a.jsx)("div",{className:"absolute top-0 right-0 m-2.5",children:(0,a.jsx)("div",{className:(0,y.Z)("flex h-10 w-10 rounded-lg border-2 border-project-border bg-white shadow-lg transition-all duration-150",m?"text-green-600":"text-white group-hover:text-blue-200"),children:(0,a.jsx)(C.Z,{className:(0,y.Z)("m-auto h-8 w-8 !fill-transparent",m?"scale-100":"scale-80 ")})})})]})},P=n(24774),Z=function(){var e=w();return(0,a.jsx)(P.O,{className:e.itemSquare(!1)})};function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){var t=e.onDeleteClick,n=w(),r=x(),l=r.files,i=r.isLoading,o=r.isUploading;return(0,a.jsxs)("div",{className:n.itemsWrap,children:[i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z,{}),(0,a.jsx)(Z,{}),(0,a.jsx)(Z,{}),(0,a.jsx)(Z,{}),(0,a.jsx)(Z,{}),(0,a.jsx)(Z,{})]}):l.length?l.map((function(e){return(0,a.jsx)(S,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}({onDeleteClick:t},e),e.id)})):(0,a.jsx)(j.Z,{className:"col-span-1 sm:col-span-2 md:col-span-4"}),o&&(0,a.jsx)(Z,{})]})},L=n(17080);var E=n(34272),z=n(37648),F=function(){var e=(0,f.$)().t,t=x(),n=t.updateValue,r=t.searchValue;return(0,a.jsx)("div",{className:"flex w-full items-center",children:(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(E.o,{icon:(0,a.jsx)(z.Z,{size:20}),name:"query",className:"w-full",value:r,onInput:function(e){return n({name:"searchValue",value:e.currentTarget.value})},placeholder:e("Your filename, id, description...")})})})};function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t,n,r,l,a,i){try{var o=e[a](i),s=o.value}catch(u){return void n(u)}o.done?t(s):Promise.resolve(s).then(r,l)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(s){o=!0,l=s}finally{try{i||null==n.return||n.return()}finally{if(o)throw l}}return a}}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"===typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}var R=function(e){e.title;var t,n=e.multiple,r=e.triggerClose,p=e.pickedFiles,x=e.onChange,j=e.where,y=(0,f.$)().t,w=U(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.useReducer)(v,h({},b,e))}(),2),N=w[0],k=w[1],C=(0,c.useState)(1),O=C[0],S=C[1],P=(t={page:O,where:T({},N.searchValue?{filename:{manipulator:"LIKE",value:"%".concat(N.searchValue,"%")}}:{},null!==j&&void 0!==j?j:{})},(0,L.a)(u.Uq.getListUrl("files")+"/paged-items",t)),Z=P.data,A=P.isError,E=P.isLoading,z=P.mutate,V=(0,c.useCallback)((function(e){}),[]),D=(0,c.useCallback)(function(){var e,t=(e=l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({name:"isLoading",value:!0}),e.next=3,u.Ip.create(t[0],{root:"/"});case 3:k({name:"isLoading",value:!1}),z();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function i(e){q(a,r,l,i,o,"next",e)}function o(e){q(a,r,l,i,o,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[k,z]),M=(0,d.uI)({onDrop:D,noClick:!0,noKeyboard:!0,multiple:!1}),R=M.open,$=M.getInputProps,K=(0,c.useCallback)((function(e){var t=e.name,l=e.value;if("selectedFiles"===t){var a=p.includes(l)?p.filter((function(e){return e!==l})):n?_(p).concat([l]):[l];return x(a),void(!n&&r&&r())}k({name:t,value:l})}),[k,x,r,n,p]),W=(0,c.useMemo)((function(){return T({},N,{multiple:!!n,files:(null===Z||void 0===Z?void 0:Z.data)||[],isLoading:E||A,selectedFiles:p,updateValue:K})}),[N,Z,E,A,K,n,p]);return(0,a.jsxs)(g.Provider,{value:W,children:[(0,a.jsx)("input",T({},$({className:"hidden"}))),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(F,{}),(0,a.jsx)(i.A,{color:"blue",size:42,variant:"filled",className:"flex-none",title:y("Add new"),ml:"xl",onClick:R,children:(0,a.jsx)(m.Z,{className:"!-mx-3 aspect-square w-6"})})]}),(0,a.jsx)(I,{onDeleteClick:V}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o.t,{total:(null===Z||void 0===Z?void 0:Z.last_page)||1,onChange:S,className:"items-center"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:r&&(0,a.jsx)(s.z,{onClick:r,disabled:!p.length,size:"md",color:"green",ml:"xl",children:"Accept"})})]})]})}},64842:function(e,t,n){var r=n(52322),l=n(31005),a=n(16508),i=n(74062),o=n(81428),s=n(24917),u=n(6277),c=n(2784),d=n(52829),f=n(77680),m=n(33378),p=(0,c.forwardRef)((function(e,t){var n=e.wrapperClassName,p=e.label,h=e.className,v=e.selected,b=e.onChange,g=e.onBlur,x=e.multiple,j=e.error,y=(0,c.useState)(!1),w=y[0],N=y[1],k=(0,d.$)().t,C=(0,c.useCallback)((function(e){b(x?e:e[0]||null)}),[b,x]),O=(0,c.useCallback)((function(){N(!1),g&&g()}),[g,N]),S=(0,c.useMemo)((function(){return null===v||void 0===v?[]:Array.isArray(v)?v:[v]}),[v]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:(0,u.Z)(n,h),children:(0,r.jsx)(i.S,{size:"md",label:p,error:j,children:(0,r.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,r.jsx)("div",{className:"relative mr-6 aspect-square w-20 overflow-hidden rounded-full",children:S.length?(0,r.jsx)(l.Z,{width:80,quality:40,imageId:S[0],className:"absolute h-full w-full object-cover object-center"}):(0,r.jsx)("div",{className:"absolute flex h-full w-full bg-gray-200",children:(0,r.jsx)(f.Z,{size:40,className:"icon icon-tabler icon-tabler-photo m-auto"})})}),(0,r.jsx)(o.J,{withArrow:!0,opened:w,onClose:O,withinPortal:!1,target:(0,r.jsx)(s.z,{className:"flex-none",color:"ghost",leftIcon:(0,r.jsx)(m.Z,{size:20}),size:"md",onClick:function(){return N(!0)},children:k("Change")}),width:590,placement:"end",position:"bottom",children:(0,r.jsx)(a.b,{where:{mimeType:{manipulator:"LIKE",value:"%image%"}},title:k("Choose an image"),triggerClose:O,multiple:x,pickedFiles:S,onChange:C})})]})})})})}));t.Z=p}}]);