"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{16508:function(e,t,r){r.d(t,{b:function(){return W}});var n=r(94776),l=r.n(n),o=r(52322),a=r(85409),i=r(24917),c=r(11794),u=r(53610),s=r(33965),f=r(2784),d=r(95720),m=r(52829);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){p(e,t,r[t])}))}return e}function v(e,t){return b({},e,p({},t.name,t.value))}var g={searchValue:"",multiple:!1,files:[],isUploading:!1,isLoading:!0,selectedFiles:[],updateValue:function(){}},y=(0,f.createContext)(g),h=function(){return(0,f.useContext)(y)},j=r(96454),x=r(6277),O=function(){return{itemsWrap:(0,x.Z)("grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-7 items-start min-h-[200px] py-6"),itemRoot:(0,x.Z)("relative block group"),itemSquare:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,x.Z)("aspect-[4/2] w-full rounded-lg bg-white shadow-md overflow-hidden relative",e?"group-hover:shadow-lg duration-200":"cursor-default")},itemLabel:(0,x.Z)("mt-2 overflow-hidden text-ellipsis font-semibold group-hover:underline text-left")}},w=r(59401),N=O(),k=function(e){var t=e.id,r=e.filename,n=h(),l=n.selectedFiles,a=n.updateValue,i=r.split(".").at(-1)||"unknown",c=i.includes("png")||i.includes("jpg")||i.includes("gif"),d=(0,f.useCallback)((function(){a({name:"selectedFiles",value:t})}),[t,a]),m=(0,f.useMemo)((function(){return l.includes(t)}),[l,t]);return(0,o.jsxs)(w.k,{className:(0,x.Z)(N.itemRoot,"group"),onClick:d,type:"button",children:[(0,o.jsx)("div",{className:N.itemSquare(),children:c?(0,o.jsx)("img",{alt:"uploaded file",className:"absolute top-0 left-0 h-full w-full object-cover",src:"/api".concat(s.Ip.getApiRawUrl(t))}):(0,o.jsx)("div",{className:"flex h-full w-full",children:(0,o.jsx)("p",{className:"m-auto text-3xl font-bold text-gray-400",children:i})})}),(0,o.jsx)("h3",{className:N.itemLabel,children:r}),(0,o.jsx)("div",{className:"absolute top-0 right-0 m-2.5",children:(0,o.jsx)("div",{className:(0,x.Z)("flex h-10 w-10 rounded-lg border-2 border-project-border bg-white shadow-lg transition-all duration-150",m?"text-green-600":"text-white group-hover:text-blue-200"),children:(0,o.jsx)(u.R.Check,{className:(0,x.Z)("m-auto h-8 w-8 !fill-transparent",m?"scale-100":"scale-80 ")})})})]})},P=r(24774),S=function(){var e=O();return(0,o.jsx)(P.O,{className:e.itemSquare(!1)})};function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e){var t=e.onDeleteClick,r=O(),n=h(),l=n.files,a=n.isLoading,i=n.isUploading;return(0,o.jsxs)("div",{className:r.itemsWrap,children:[a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S,{}),(0,o.jsx)(S,{}),(0,o.jsx)(S,{}),(0,o.jsx)(S,{}),(0,o.jsx)(S,{}),(0,o.jsx)(S,{})]}):l.length?l.map((function(e){return(0,o.jsx)(k,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){C(e,t,r[t])}))}return e}({onDeleteClick:t},e),e.id)})):(0,o.jsx)(j.Z,{className:"col-span-1 sm:col-span-2 md:col-span-4"}),i&&(0,o.jsx)(S,{})]})},A=r(11804),I=r(85482);function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A.x.get(e,{params:t}).then((function(e){return e.data}))};function R(e){var t=(0,I.ZP)([s.Uq.getListUrl("files")+"/paged-items",e],D),r=t.data,n=t.error;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Z(e,t,r[t])}))}return e}({data:r,isLoading:!n&&!r,isError:n},L(t,["data","error"]))}var q=r(34272),F=function(){var e=(0,m.$)().t;return(0,o.jsx)("div",{className:"mb-5 flex w-full items-center",children:(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(q.o,{name:"query",className:"w-full",placeholder:e("Your filename, id, description...")})})})};function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t,r,n,l,o,a){try{var i=e[o](a),c=i.value}catch(u){return void r(u)}i.done?t(c):Promise.resolve(c).then(n,l)}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){z(e,t,r[t])}))}return e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,o=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){i=!0,l=c}finally{try{a||null==r.return||r.return()}finally{if(i)throw l}}return o}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"===typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}var W=function(e){var t=e.title,r=e.multiple,n=e.triggerClose,p=e.pickedFiles,h=e.onChange,j=e.filter,x=(0,m.$)().t,O=(0,f.useState)(!1),w=O[0],N=O[1],k=V(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.useReducer)(v,b({},g,e))}(),2),P=k[0],S=k[1],C=(0,f.useState)(1),A=C[0],I=C[1],Z=R(M({page:A},j?Object.fromEntries(j.map((function(e,t){var r=V(e,3),n=r[0],l=r[1],o=r[2];return["where[".concat(t,"]"),'["'.concat(n,'","').concat(l,'","').concat(o,'"]')]}))):{})),L=Z.data,D=Z.isError,q=Z.isLoading,U=Z.mutate,z=(0,f.useCallback)((function(e){}),[]),T=(0,f.useCallback)(function(){var e,t=(e=l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S({name:"isLoading",value:!0}),e.next=3,s.Ip.create(t[0],{root:"/"});case 3:S({name:"isLoading",value:!1}),U();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,l){var o=e.apply(t,r);function a(e){_(o,n,l,a,i,"next",e)}function i(e){_(o,n,l,a,i,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[S,U]),W=(0,d.uI)({onDrop:T,noClick:!0,noKeyboard:!0,multiple:!1}),K=W.open,Q=W.getInputProps,Y=(0,f.useCallback)((function(e){var t=e.name,l=e.value;if("selectedFiles"===t){var o=p.includes(l)?p.filter((function(e){return e!==l})):r?$(p).concat([l]):[l];return h(o),void(!r&&n&&n())}S({name:t,value:l})}),[S,h,n,r,p]),B=(0,f.useMemo)((function(){return M({},P,{multiple:!!r,files:(null===L||void 0===L?void 0:L.data)||[],isLoading:q||D,selectedFiles:p,updateValue:Y})}),[P,L,q,D,Y,r,p]);return(0,o.jsxs)(y.Provider,{value:B,children:[(0,o.jsx)("input",M({},Q({className:"hidden"}))),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h1",{className:"text-4xl font-semibold",children:t||x(r?"Select files":"Select a file")}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(a.A,{className:"flex-none",size:40,onClick:function(){return N(!w)},children:(0,o.jsx)(u.R.Search,{className:"!-mx-2 aspect-square w-8 !fill-transparent"})}),(0,o.jsx)(a.A,{color:"green",size:40,variant:"filled",className:"flex-none",onClick:K,children:(0,o.jsx)(u.R.Plus,{className:"!-mx-3 aspect-square w-8"})})]})]}),w&&(0,o.jsx)(F,{}),(0,o.jsx)("hr",{className:"my-5 mt-0 mb-2 h-0.5 w-full border-none bg-gray-200"}),(0,o.jsx)(E,{onDeleteClick:z}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[n&&(0,o.jsx)(i.z,{onClick:n,disabled:!p.length,color:"green",children:"Accept"}),(0,o.jsx)(c.t,{total:(null===L||void 0===L?void 0:L.last_page)||1,onChange:I,className:"mx-auto items-center"})]})]})}},96454:function(e,t,r){var n=r(52322),l=r(53610),o=r(6277),a=r(52829);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}t.Z=function(e){var t=e.className,r=c(e,["className"]),u=(0,a.$)().t;return(0,n.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({className:(0,o.Z)("flex min-h-[300px] flex-col justify-center text-center text-xl font-semibold text-gray-400",t)},r,{children:[(0,n.jsx)(l.R.QuestionMark,{size:40,className:"mx-auto"}),(0,n.jsx)("p",{children:u("No items available...")})]}))}}}]);