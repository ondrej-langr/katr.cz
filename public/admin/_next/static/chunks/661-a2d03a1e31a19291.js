"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[661],{95501:function(e,t,r){r.d(t,{VY:function(){return de},Be:function(){return p},DQ:function(){return d}});var n=r(52322),i=r(2784),a=r(63955),o=r(93118),l=r(59377),u=r(33965),s=r(5632);function c(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=(0,i.createContext)({exitView:function(){},currentView:"update",itemIsMissing:!1,itemIsLoading:!0,itemIsError:!1}),d=function(){return(0,i.useContext)(f)},p=function(e){var t=e.children,r=e.viewType,a=(0,s.useRouter)().push,d=(0,o.Z)(),p=(0,l.Z)(),m=p.data,v=p.isError,b=p.isLoading,h=p.itemIsMissing,y=(0,i.useMemo)((function(){if(m&&"create"===r){m.id;return c(m,["id"])}return m}),[m,r]);return(0,n.jsx)(f.Provider,{value:{currentView:r,exitView:function(){a(u.Uq.getListUrl(null===d||void 0===d?void 0:d.name))},itemData:y,itemIsError:v,itemIsLoading:b,itemIsMissing:h},children:t})},m=r(33972),v=r(94776),b=r.n(v),h=r(25237),y=r(52829);function x(e,t,r,n,i,a,o){try{var l=e[a](o),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,i)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){x(a,n,i,o,l,"next",e)}function l(e){x(a,n,i,o,l,"throw",e)}o(void 0)}))}}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=(0,h.default)(g(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(837),r.e(805),r.e(1),r.e(508),r.e(668)]).then(r.bind(r,51668));case 2:return e.abrupt("return",e.sent.LazyEditor);case 3:case"end":return e.stop()}}),e)}))),{loadableGenerated:{webpack:function(){return[51668]}},ssr:!1}),O=(0,i.forwardRef)((function(e,t){var r=(0,a.Gc)().control,o=(0,y.$)().t,l=(0,i.useCallback)((function(e){return function(){var t=g(b().mark((function t(r){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=JSON,t.next=4,r.saver.save();case 4:return t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[]);return(0,n.jsx)(a.Qr,{control:r,name:"content",render:function(r){var i=r.field.onChange;return(0,n.jsx)(w,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){j(e,t,r[t])}))}return e}({editorRef:t,onChange:l(i),placeholder:o("Start typing here...")},e))}})})),N=(0,i.forwardRef)((function(e,t){var r,l=(t.current||{}).editorRef,u=d(),s=u.currentView,c=u.itemData,f=(0,a.Gc)().formState,p=(0,o.Z)(),v=(0,i.useMemo)((function(){if(p)return(0,m.x)(p)}),[p]);return v?(0,n.jsxs)(n.Fragment,{children:["simple"===(null===p||void 0===p||null===(r=p.admin)||void 0===r?void 0:r.layout)?v&&(0,n.jsx)(m.Z,{fields:v}):(0,n.jsx)(O,{initialValue:null===c||void 0===c?void 0:c.content,autofocus:"update"===s,ref:l}),f.isSubmitting&&(0,n.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]}):null})),S=r(59935),P=r(85409),k=r(53610),C=r(6277),E=r(59748),U=r(5386),Z=r(85482);function I(e,t,r,n,i,a,o){try{var l=e[a](o),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,i)}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){V(e,t,r[t])}))}return e}var R=function(){var e=(0,i.useRef)(null),t=(0,Z.kY)().mutate,r=d(),n=r.currentView,a=r.itemData,l=(0,y.$)().t,c=(0,o.Z)(),f=(0,s.useRouter)().push,p=(0,E.z)(),m=function(){var r,i=(r=b().mark((function r(i){var o,s,d,m,v,h;return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=c.name,s=p.showNotification({id:"update"===n?"on-update-entry":"on-create-entry",loading:!0,title:"update"===n?"Updating":"Creating",message:l("update"===n?"Updating your entry, please wait...":"Creating new entry, please wait..."),autoClose:!1,disallowClose:!0}),!e.current){r.next=11;break}return r.next=6,null===(d=e.current)||void 0===d?void 0:d.isReady;case 6:return r.t0=JSON,r.next=9,e.current.save();case 9:r.t1=r.sent,i.content=r.t0.stringify.call(r.t0,r.t1);case 11:if("update"!==n){r.next=27;break}return r.prev=12,m=(0,U.d$)(a,i),v=a.id,r.next=17,u.Uq.update({id:v,model:o},m);case 17:return r.next=19,t(u.Uq.apiGetUrl(v,o),(function(e){return A({},e,{finalValues:m})}));case 19:p.updateNotification(s,{message:l("Your entry is updated!"),autoClose:2e3}),r.next=25;break;case 22:r.prev=22,r.t2=r.catch(12),p.updateNotification(s,{color:"red",message:l("An error happened"),autoClose:2e3});case 25:r.next=41;break;case 27:if("create"!==n){r.next=41;break}return r.prev=28,r.next=31,u.Uq.create({model:o},i);case 31:if(null===(h=r.sent)||void 0===h?void 0:h.data){r.next=34;break}throw new Error("No data has been received");case 34:f(u.Uq.getListUrl(null===c||void 0===c?void 0:c.name)),p.updateNotification(s,{message:l("New entry has been created!"),autoClose:2e3}),r.next=41;break;case 38:r.prev=38,r.t3=r.catch(28),p.updateNotification(s,{color:"red",message:l("An error happened"),autoClose:2e3});case 41:case"end":return r.stop()}}),r,null,[[12,22],[28,38]])})),function(){var e=this,t=arguments;return new Promise((function(n,i){var a=r.apply(e,t);function o(e){I(a,n,i,o,l,"next",e)}function l(e){I(a,n,i,o,l,"throw",e)}o(void 0)}))});return function(e){return i.apply(this,arguments)}}();return[m,e]};function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r,n,i,a,o){try{var l=e[a](o),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,i)}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){D(e,t,r[t])}))}return e}function L(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(u){l=!0,i=u}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $=function(){var e,t,r=(0,i.useState)(!1),o=r[0],l=r[1],u=T(R(),1)[0],s=d().currentView,c=(0,i.useState)("create"===s),f=c[0],p=c[1],m=(0,a.Gc)(),v=m.register,h=m.watch,x=m.formState,g=v("title"),j=g.ref,w=L(g,["ref"]),O=(0,i.useRef)(null),N=(0,y.$)().t,S=h("title"),E=function(){var e,t=(e=b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,u({title:S});case 3:l(!1),p(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){M(a,n,i,o,l,"next",e)}function l(e){M(a,n,i,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e;f&&O.current&&(null===(e=O.current)||void 0===e||e.focus())}),[f]),(0,n.jsxs)("div",{className:"flex w-full items-center",children:[(0,n.jsxs)("div",{className:"relative w-full",children:[(0,n.jsx)("input",z({className:(0,C.Z)("w-full bg-transparent text-5xl font-bold outline-none",!f&&"cursor-default"),placeholder:N("Enter your title here..."),readOnly:!f,ref:function(e){j(e),O.current=e}},w)),(null===(e=x.errors)||void 0===e||null===(t=e.title)||void 0===t?void 0:t.message)&&(0,n.jsx)("small",{className:"font-bold text-red-500",children:x.errors.title.message})]}),"update"===s&&(f?(0,n.jsx)(P.A,{type:"button",variant:"light",className:"ml-5 bg-white text-green-500 hover:scale-110",title:N("Save changes"),size:50,loading:o,onClick:E,children:(0,n.jsx)(k.R.Check,{size:40,className:"h-10 w-10"})}):(0,n.jsx)(P.A,{type:"button",variant:"light",className:"ml-5 text-gray-300 hover:scale-110",title:N("Edit title"),size:50,onClick:function(){return p(!0)},children:(0,n.jsx)(k.R.Pencil,{size:40,className:"h-10 w-10"})}))]})},q=function(){var e,t=d().currentView,r=(0,o.Z)(),i=(0,y.$)().t;return(0,n.jsxs)("header",{className:"mr-9 w-full pb-5 xl:mr-0",children:["simple"===(null===r||void 0===r||null===(e=r.admin)||void 0===e?void 0:e.layout)?(0,n.jsx)("h1",{className:"mt-0 text-5xl font-bold",children:i("update"==t?"Update an entry":"Create an entry")}):(0,n.jsx)($,{}),(0,n.jsx)(S.i,{size:"sm",mt:"lg"})]})},Y=r(30621),G=r(49898),Q=r(72722),B=r(89673),H=r(28879),J=r.n(H),X=r(52170),F=r(35817),K=r(74559),W=r(24917);function ee(e,t,r,n,i,a,o){try{var l=e[a](o),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,i)}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){te(e,t,r[t])}))}return e}function ne(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ie=function(e){var t=e.className,r=ne(e,["className"]);return(0,n.jsx)(B.Z,re({className:(0,C.Z)("relative top-0.5 inline-block h-4",t)},r))},ae="D.M. YYYY @ HH:mm",oe=function(e){var t,r=e.isSubmitting,l=d(),s=l.itemData,c=l.itemIsLoading,f=l.currentView,p=l.exitView,v=(0,o.Z)(),h=(0,a.Gc)(),x=h.watch,g=h.setValue,j=x(),w=(0,F.o)(),O=(0,y.$)().t,N=(0,i.useMemo)((function(){return"update"!==f||!!Object.keys((0,U.d$)(s||{},j)).length}),[j,f,s]),S=function(){var e,t=(e=b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(O(X.X3.ON_DELETE_REQUEST_PROMPT))){e.next=4;break}return p(),e.next=4,u.Uq.delete({id:null===s||void 0===s?void 0:s.id,model:null===v||void 0===v?void 0:v.name});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){ee(a,n,i,o,l,"next",e)}function l(e){ee(a,n,i,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),E=(0,i.useMemo)((function(){if(v){var e=v.columns,t=(e.title,e.content,ne(e,["title","content"]));return(0,m.x)(re({},v,{columns:t}))}}),[v]),Z=(0,i.useMemo)((function(){var e="";return"create"===f?e=r?"Publishing":"Publish":"update"===f&&(e=r?"Updating":"Update"),O(e)}),[f,r,O]),I=(0,i.useMemo)((function(){var e="";if(!(null===v||void 0===v?void 0:v.isDraftable))return e;if("create"===f)e=r?"Saving":"Save as concept";else if("update"===f){if(!s)return e;e=s.is_published?"Unpublish":"Publish"}return O(e)}),[f,r,v,s,O]);return(0,n.jsxs)("aside",{className:(0,C.Z)(w.aside,"sticky top-0 pr-5"),children:[(0,n.jsxs)(Q.Z,{className:"!pt-0",title:"Publish",children:["update"===f&&(0,n.jsx)("div",{className:(0,C.Z)("w-full bg-white",((null===s||void 0===s?void 0:s.updated_at)||(null===s||void 0===s?void 0:s.created_at))&&"px-4 py-5"),children:(null===v||void 0===v?void 0:v.hasTimestamps)&&(0,n.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[!!(null===s||void 0===s?void 0:s.updated_at)&&(0,n.jsxs)("li",{children:[O("Updated at:")," ",c?(0,n.jsx)(ie,{className:"w-full max-w-[6rem]"}):(0,n.jsx)("span",{className:"font-semibold text-blue-600",children:J()(null===s||void 0===s?void 0:s.updated_at).format(ae)})]}),!!(null===s||void 0===s?void 0:s.created_at)&&(0,n.jsxs)("li",{children:[O("Created at:")," ",c?(0,n.jsx)(ie,{className:"w-full max-w-[6rem]"}):(0,n.jsx)("span",{className:"font-semibold text-blue-600",children:J()(null===s||void 0===s?void 0:s.created_at).format(ae)})]})]})}),(0,n.jsxs)(K.Z,{sx:function(e){return{borderTop:"2px solid ".concat(e.colors.gray[2])}},position:"apart",className:"items-center gap-5 px-4 py-4",children:["update"===f?(0,n.jsx)(P.A,{size:"lg",type:"button",loading:r,onClick:S,color:"red",variant:"light",className:(0,C.Z)(r&&"!cursor-progress","text-sm text-red-500"),children:(0,n.jsx)(k.R.Trash,{className:"aspect-square w-5"})}):(0,n.jsx)("span",{}),(null===v||void 0===v?void 0:v.isDraftable)&&(0,n.jsx)(W.z,{size:"sm",variant:"white",type:"submit",disabled:r,className:"ml-auto",onClick:function(){g("is_published",!!s&&!s.is_published)},px:"sm",children:I}),(0,n.jsx)(W.z,{size:"lg",color:"green",type:"submit",disabled:!N,loading:r,onClick:function(){"create"===f&&g("is_published",!0)},children:Z})]})]}),"post-like"===(null===v||void 0===v||null===(t=v.admin)||void 0===t?void 0:t.layout)&&E&&E.length&&(0,n.jsx)(Q.Z,{title:"Other info",className:"mt-10",children:(0,n.jsx)("div",{className:"grid gap-5 p-4",children:(0,n.jsx)(m.Z,{fields:E})})})]})},le=r(1571),ue=r(18362);function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(u){l=!0,i=u}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var de=function(){var e=d(),t=e.currentView,r=e.itemData,l=e.itemIsLoading,s=fe(R(),2),c=s[0],f=s[1],p=(0,i.useRef)({editorRef:f}),m=(0,o.Z)(),v=(0,y.$)().t,b=(0,i.useMemo)((function(){return m&&(0,G.j7)(m,"update"===t)}),[m,t]),h=(0,a.cI)({defaultValues:(null===r||void 0===r?void 0:r.data)||{},reValidateMode:"onBlur",mode:"onTouched",resolver:b&&(0,Y.X)(b)});return(0,i.useEffect)((function(){return r&&h.reset(r)}),[r,h]),(0,n.jsx)(a.RV,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ce(e,t,r[t])}))}return e}({},h,{children:(0,n.jsxs)("form",{onSubmit:h.handleSubmit(c),autoComplete:"off",children:[(0,n.jsx)(le.Z,{className:"py-5",items:[{content:v("Entry types")},{isLinkTo:u.Uq.getListUrl(null===m||void 0===m?void 0:m.name),content:v((0,ue.fm)((null===m||void 0===m?void 0:m.name)||""))},{content:v("update"==t?"Update":"Create")},{content:l?(0,n.jsx)(B.Z,{className:"h-4 w-16 flex-none"}):(0,n.jsx)("p",{className:"flex-none text-green-500 underline",children:"update"==t?null===r||void 0===r?void 0:r.id:v("Create")})}]}),(0,n.jsxs)("div",{className:"mt-10 items-start justify-between xl:flex",children:[(0,n.jsxs)("div",{className:"relative -mx-3 grid w-full max-w-4xl gap-5 px-3",children:[(0,n.jsx)(q,{}),(0,n.jsx)(N,{ref:p})]}),(0,n.jsx)(oe,{isSubmitting:h.formState.isSubmitting})]})]})}))}},62626:function(e,t,r){r.r(t);var n=r(52322);t.default=function(e){var t=e.text,r=void 0===t?"Missing":t;return(0,n.jsx)("div",{className:"flex min-h-screen",children:(0,n.jsxs)("div",{className:"text-center m-auto",children:[(0,n.jsx)("h1",{className:"font-semibold text-6xl",children:"404"}),(0,n.jsx)("hr",{className:"border-t-8 w-1/4 mx-auto my-4 border-blue-100"}),(0,n.jsx)("p",{className:"text-gray-500 text-xl",children:r})]})})}}}]);