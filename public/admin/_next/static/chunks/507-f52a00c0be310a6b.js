(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{9748:function(t,e,n){"use strict";n.d(e,{z:function(){return s}});var r=n(2784),i=n(8797);function s(){const t=(0,r.useContext)(i.c);if(!t)throw new Error("@mantine/notifications: NotificationsProvider was not found in tree");return t}},8879:function(t){t.exports=function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",s="minute",a="hour",o="day",u="week",c="month",l="quarter",d="year",f="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},b={s:y,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,a=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:r,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",x={};x[g]=v;var w=function(t){return t instanceof S},$=function(t,e,n){var r;if(!t)return g;if("string"==typeof t)x[t]&&(r=t),e&&(x[t]=e,r=t);else{var i=t.name;x[i]=t,r=i}return!n&&r&&(g=r),r||!n&&g},j=function(t,e){if(w(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new S(n)},O=b;O.l=$,O.i=w,O.w=function(t,e){return j(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function v(t){this.$L=$(t.locale,null,!0),this.parse(t)}var y=v.prototype;return y.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(m);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},y.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},y.$utils=function(){return O},y.isValid=function(){return!(this.$d.toString()===h)},y.isSame=function(t,e){var n=j(t);return this.startOf(e)<=n&&n<=this.endOf(e)},y.isAfter=function(t,e){return j(t)<this.startOf(e)},y.isBefore=function(t,e){return this.endOf(e)<j(t)},y.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(t,e){var n=this,r=!!O.u(e)||e,l=O.p(t),h=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(o)},m=function(t,e){return O.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},p=this.$W,v=this.$M,y=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case d:return r?h(1,0):h(31,11);case c:return r?h(1,v):h(0,v+1);case u:var g=this.$locale().weekStart||0,x=(p<g?p+7:p)-g;return h(r?y-x:y+(6-x),v);case o:case f:return m(b+"Hours",0);case a:return m(b+"Minutes",1);case s:return m(b+"Seconds",2);case i:return m(b+"Milliseconds",3);default:return this.clone()}},y.endOf=function(t){return this.startOf(t,!1)},y.$set=function(t,e){var n,u=O.p(t),l="set"+(this.$u?"UTC":""),h=(n={},n[o]=l+"Date",n[f]=l+"Date",n[c]=l+"Month",n[d]=l+"FullYear",n[a]=l+"Hours",n[s]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],m=u===o?this.$D+(e-this.$W):e;if(u===c||u===d){var p=this.clone().set(f,1);p.$d[h](m),p.init(),this.$d=p.set(f,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},y.set=function(t,e){return this.clone().$set(t,e)},y.get=function(t){return this[O.p(t)]()},y.add=function(r,l){var f,h=this;r=Number(r);var m=O.p(l),p=function(t){var e=j(h);return O.w(e.date(e.date()+Math.round(t*r)),h)};if(m===c)return this.set(c,this.$M+r);if(m===d)return this.set(d,this.$y+r);if(m===o)return p(1);if(m===u)return p(7);var v=(f={},f[s]=e,f[a]=n,f[i]=t,f)[m]||1,y=this.$d.getTime()+r*v;return O.w(y,this)},y.subtract=function(t,e){return this.add(-1*t,e)},y.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=O.z(this),s=this.$H,a=this.$m,o=this.$M,u=n.weekdays,c=n.months,l=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].substr(0,s)},d=function(t){return O.s(s%12||12,t,"0")},f=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:O.s(o+1,2,"0"),MMM:l(n.monthsShort,o,c,3),MMMM:l(c,o),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,u,2),ddd:l(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(s),HH:O.s(s,2,"0"),h:d(1),hh:d(2),a:f(s,a,!0),A:f(s,a,!1),m:String(a),mm:O.s(a,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(t,e){return e||m[t]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,f,h){var m,p=O.p(f),v=j(r),y=(v.utcOffset()-this.utcOffset())*e,b=this-v,g=O.m(this,v);return g=(m={},m[d]=g/12,m[c]=g,m[l]=g/3,m[u]=(b-y)/6048e5,m[o]=(b-y)/864e5,m[a]=b/n,m[s]=b/e,m[i]=b/t,m)[p]||b,h?g:O.a(g)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return x[this.$L]},y.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=$(t,e,!0);return r&&(n.$L=r),n},y.clone=function(){return O.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),M=S.prototype;return j.prototype=M,[["$ms",r],["$s",i],["$m",s],["$H",a],["$W",o],["$M",c],["$y",d],["$D",f]].forEach((function(t){M[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),j.extend=function(t,e){return t.$i||(t(e,S,j),t.$i=!0),j},j.locale=$,j.isDayjs=w,j.unix=function(t){return j(1e3*t)},j.en=x[g],j.Ls=x,j.p={},j}()},7507:function(t,e,n){"use strict";n.d(e,{Z:function(){return q}});var r=n(2322),i=n(3792),s=n(4531),a=n(7763),o=n(5632),u=n(2784);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){c(t,e,n[e])}))}return t}var d=(0,u.createContext)({view:"create",isLoading:!0,exitView:function(){}}),f=function(){return(0,u.useContext)(d)},h=n(621),m=n(9898),p=n(3955),v=n(210),y=function(){var t=f().model,e=(0,p.Gc)().formState,n=(0,u.useMemo)((function(){if(t)return(0,v.x)(t)}),[t]);return(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsx)(v.Z,{fields:n}),e.isSubmitting&&(0,r.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]})},b=n(2829),g=function(){var t=f().view,e=(0,b.$)().t;return(0,r.jsx)("header",{className:"mr-9 w-full border-b-2 border-project-border pb-5 xl:mr-0",children:(0,r.jsx)("h1",{className:"text-5xl font-bold",children:e("update"==t?"Update an entry":"Create an entry")})})},x=n(8362),w=n(1571),$=n(9673),j=n(4776),O=n.n(j),S=n(2722),M=n(5026),D=n(7962),N=n(1519),_=n(6277),C=n(8879),k=n.n(C),P=n(2649),T=n(5386),L=n(5817);function A(t,e,n,r,i,s,a){try{var o=t[s](a),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(r,i)}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var E=function(t){var e=t.className,n=Y(t,["className"]);return(0,r.jsx)($.Z,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){U(t,e,n[e])}))}return t}({className:(0,_.Z)("relative top-0.5 inline-block h-4",e)},n))},H="D.M. YYYY @ HH:mm",Z=function(){var t=f(),e=t.isLoading,n=t.view,i=t.user,s=t.exitView,o=t.model,c=(0,p.Gc)(),l=c.watch,d=c.formState.isSubmitting,h=l(),m=(0,L.o)(),v=(0,b.$)().t,y=(0,u.useMemo)((function(){return"update"!==n||!!Object.keys((0,T.d$)(i||{},h)).length}),[h,n,i]),g=function(){var t,e=(t=O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!confirm(v(P.X3.ON_DELETE_REQUEST_PROMPT))){t.next=4;break}return s(),t.next=4,a.Uq.delete({id:null===i||void 0===i?void 0:i.id,model:"users"});case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function a(t){A(s,r,i,a,o,"next",t)}function o(t){A(s,r,i,a,o,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return(0,r.jsx)("aside",{className:(0,_.Z)(m.aside,"sticky top-0"),children:(0,r.jsxs)(S.Z,{className:"!pt-0",title:"Apply changes",children:["update"===n&&(0,r.jsx)("div",{className:(0,_.Z)("w-full bg-white py-5 px-4",!(null===i||void 0===i?void 0:i.updated_at)&&!(null===i||void 0===i?void 0:i.created_at)&&"hidden"),children:(null===o||void 0===o?void 0:o.hasTimestamps)&&(0,r.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[!!(null===i||void 0===i?void 0:i.updated_at)&&(0,r.jsxs)("li",{children:[v("Updated at:")," ",e?(0,r.jsx)(E,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:k()(null===i||void 0===i?void 0:i.updated_at).format(H)})]}),!!(null===i||void 0===i?void 0:i.created_at)&&(0,r.jsxs)("li",{children:[v("Created at:")," ",e?(0,r.jsx)(E,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:k()(null===i||void 0===i?void 0:i.created_at).format(H)})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-5 border-t-2 border-project-border px-4 py-4",children:["update"===n?(0,r.jsxs)(M.z,{size:"large",type:"button",disabled:d,onClick:g,className:(0,_.Z)(d&&"!cursor-progress","!pl-0 text-sm text-red-500"),children:[(0,r.jsx)(D.XHJ,{className:"mr-3 -mt-1 inline w-5"}),v("Delete")]}):(0,r.jsx)("span",{}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-end gap-5",children:[d&&(0,r.jsxs)("p",{className:"animate-pulse text-lg font-semibold text-orange-500",children:[(0,r.jsx)(N.RefreshIcon,{className:"mr-1.5 inline w-5 animate-spin"}),v("Saving...")]}),(0,r.jsx)(M.z,{size:"large",color:"success",type:"submit",disabled:d||!y,className:(0,_.Z)(d&&"!cursor-progress"),children:v("Ulo\u017eit")})]})]})]})})},I=n(9748);function z(t,e,n,r,i,s,a){try{var o=t[s](a),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(r,i)}var V=function(){var t=(0,o.useRouter)().push,e=f(),n=e.view,r=e.user,i=(0,I.z)(),s=(0,b.$)().t,u=function(){var e,o=(e=O().mark((function e(o){var u,c;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i.showNotification({loading:!0,title:"update"===n?"Updating":"Creating",message:s("update"===n?"Updating user data, please wait":"Creating new user, please wait"),autoClose:!1,disallowClose:!0}),"update"!==n){e.next=8;break}return e.next=4,a.KD.update(null===r||void 0===r?void 0:r.id,(0,T.d$)(r,o)).catch((function(){i.updateNotification(u,{color:"red",message:s("An error happened"),autoClose:2e3})}));case 4:e.sent,i.updateNotification(u,{message:s("User data has been updated!"),autoClose:2e3}),e.next=13;break;case 8:if("create"!==n){e.next=13;break}return e.next=11,a.KD.create((0,T.d$)(r||{},o)).catch((function(){i.updateNotification(u,{color:"red",message:s("An error happened"),autoClose:2e3})}));case 11:(null===(c=e.sent)||void 0===c?void 0:c.data)&&(t(a.KD.getListUrl()),i.updateNotification(u,{message:s("New user has been created!"),autoClose:2e3}));case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(t){z(s,r,i,a,o,"next",t)}function o(t){z(s,r,i,a,o,"throw",t)}a(void 0)}))});return function(t){return o.apply(this,arguments)}}();return u};function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=function(t){var e=t.children,n=(0,p.Gc)().handleSubmit,i=V();return(0,r.jsx)("form",{onSubmit:n(i),autoComplete:"off",children:e})},K={Context:d,ContextProvider:function(t){var e=t.view,n=t.children,u=(0,o.useRouter)(),c=u.query,f=u.push,h=(0,i.S)("users"),m=(0,s.a)(c.userId);return(0,r.jsx)(d.Provider,{value:l({view:e},m.data?{user:m.data}:{},{isLoading:m.isLoading||m.isError,exitView:function(){return f(a.KD.getListUrl())},model:h}),children:n})},useData:f,Content:function(){var t,e=f(),n=e.user,i=e.model,s=e.isLoading,a=e.view,o=(0,b.$)().t,c=(0,p.cI)({defaultValues:n||{},reValidateMode:"onBlur",mode:"onTouched",resolver:m.J&&(0,h.X)(m.J)}),l=c.reset;return(0,u.useEffect)((function(){n&&l(n)}),[n,l]),(0,r.jsx)(p.RV,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){J(t,e,n[e])}))}return t}({},c,{children:(0,r.jsxs)(F,{children:[(0,r.jsx)(w.Z,{className:"py-5",items:[{content:(0,x.fm)((null===i||void 0===i?void 0:i.tableName)||""),isLinkTo:"/".concat(null===i||void 0===i||null===(t=i.tableName)||void 0===t?void 0:t.toLowerCase())},{content:o("update"==a?"Update":"Create")}].concat(R("update"===a?[{content:s?(0,r.jsx)($.Z,{className:"h-4 w-16"}):(0,r.jsx)("p",{className:"text-green-500 underline",children:"update"==a?null===n||void 0===n?void 0:n.id:"Create"})}]:[]))}),(0,r.jsxs)("div",{className:"mt-10 items-start justify-between xl:flex",children:[(0,r.jsxs)("div",{className:"relative -mx-3 grid w-full max-w-4xl gap-5 px-3",children:[(0,r.jsx)(g,{}),(0,r.jsx)(y,{})]}),(0,r.jsx)(Z,{})]})]})}))}},q=K}}]);