"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[842],{16508:function(e,t,n){n.d(t,{b:function(){return U}});var r=n(94776),l=n.n(r),a=n(52322),i=n(85409),o=n(11794),s=n(24917),u=n(53610),c=n(41277),d=n(2784),f=n(95720),m=n(52829);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function v(e,t){return h({},e,p({},t.name,t.value))}var b={searchValue:"",multiple:!1,files:[],isUploading:!1,isLoading:!0,selectedFiles:[],updateValue:function(){}},g=(0,d.createContext)(b),x=function(){return(0,d.useContext)(g)},j=n(96454),y=n(6277),w=function(){return{itemsWrap:(0,y.Z)("grid grid-cols-1 sm:grid-cols-2 gap-7 items-start min-h-[200px] my-3 py-3 max-h-[520px] overflow-auto"),itemRoot:(0,y.Z)("relative block group"),itemSquare:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,y.Z)("aspect-[3/2] w-full rounded-lg bg-white shadow-md overflow-hidden relative",e?"group-hover:shadow-lg duration-200":"cursor-default")},itemLabel:(0,y.Z)("mt-2 overflow-hidden text-ellipsis font-semibold group-hover:underline text-left mb-0 leading-8 block whitespace-nowrap")}},N=n(59401),k=n(31005),C=w(),O=function(e){var t,n=e.id,r=e.filename,l=e.mimeType,i=x(),o=i.selectedFiles,s=i.updateValue,c=r.split(".").at(-1)||"unknown",f="image"===((null===(t=null===l||void 0===l?void 0:l.split("/"))||void 0===t?void 0:t[0])||"unknown"),m=(0,d.useCallback)((function(){s({name:"selectedFiles",value:n})}),[n,s]),p=(0,d.useMemo)((function(){return o.includes(n)}),[o,n]);return(0,a.jsxs)(N.k,{className:(0,y.Z)(C.itemRoot,"group"),onClick:m,type:"button",title:r,children:[(0,a.jsx)("div",{className:C.itemSquare(),children:f?(0,a.jsx)(k.Z,{alt:"uploaded file",imageId:n,className:"absolute top-0 left-0 h-full w-full object-cover",width:270}):(0,a.jsx)("div",{className:"flex h-full w-full",children:(0,a.jsx)("p",{className:"m-auto text-3xl font-bold text-gray-400",children:c})})}),(0,a.jsx)("h3",{className:C.itemLabel,children:r}),(0,a.jsx)("div",{className:"absolute top-0 right-0 m-2.5",children:(0,a.jsx)("div",{className:(0,y.Z)("flex h-10 w-10 rounded-lg border-2 border-project-border bg-white shadow-lg transition-all duration-150",p?"text-green-600":"text-white group-hover:text-blue-200"),children:(0,a.jsx)(u.R.Check,{className:(0,y.Z)("m-auto h-8 w-8 !fill-transparent",p?"scale-100":"scale-80 ")})})})]})},S=n(24774),P=function(){var e=w();return(0,a.jsx)(S.O,{className:e.itemSquare(!1)})};function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){var t=e.onDeleteClick,n=w(),r=x(),l=r.files,i=r.isLoading,o=r.isUploading;return(0,a.jsxs)("div",{className:n.itemsWrap,children:[i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P,{}),(0,a.jsx)(P,{}),(0,a.jsx)(P,{}),(0,a.jsx)(P,{}),(0,a.jsx)(P,{}),(0,a.jsx)(P,{})]}):l.length?l.map((function(e){return(0,a.jsx)(O,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}({onDeleteClick:t},e),e.id)})):(0,a.jsx)(j.Z,{className:"col-span-1 sm:col-span-2 md:col-span-4"}),o&&(0,a.jsx)(P,{})]})},Z=n(17080);var L=n(34272),E=function(){var e=(0,m.$)().t,t=x(),n=t.updateValue,r=t.searchValue;return(0,a.jsx)("div",{className:"flex w-full items-center",children:(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(L.o,{icon:(0,a.jsx)(u.R.Search,{size:20}),name:"query",className:"w-full",value:r,onInput:function(e){return n({name:"searchValue",value:e.currentTarget.value})},placeholder:e("Your filename, id, description...")})})})};function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t,n,r,l,a,i){try{var o=e[a](i),s=o.value}catch(u){return void n(u)}o.done?t(s):Promise.resolve(s).then(r,l)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(s){o=!0,l=s}finally{try{i||null==n.return||n.return()}finally{if(o)throw l}}return a}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"===typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}var U=function(e){e.title;var t,n=e.multiple,r=e.triggerClose,p=e.pickedFiles,x=e.onChange,j=e.where,y=(0,m.$)().t,w=q(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.useReducer)(v,h({},b,e))}(),2),N=w[0],k=w[1],C=(0,d.useState)(1),O=C[0],S=C[1],P=(t={page:O,where:V({},N.searchValue?{filename:{manipulator:"LIKE",value:"%".concat(N.searchValue,"%")}}:{},null!==j&&void 0!==j?j:{})},(0,Z.a)(c.Uq.getListUrl("files")+"/paged-items",t)),A=P.data,L=P.isError,z=P.isLoading,R=P.mutate,T=(0,d.useCallback)((function(e){}),[]),U=(0,d.useCallback)(function(){var e,t=(e=l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({name:"isLoading",value:!0}),e.next=3,c.Ip.create(t[0],{root:"/"});case 3:k({name:"isLoading",value:!1}),R();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function i(e){F(a,r,l,i,o,"next",e)}function o(e){F(a,r,l,i,o,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[k,R]),_=(0,f.uI)({onDrop:U,noClick:!0,noKeyboard:!0,multiple:!1}),M=_.open,$=_.getInputProps,K=(0,d.useCallback)((function(e){var t=e.name,l=e.value;if("selectedFiles"===t){var a=p.includes(l)?p.filter((function(e){return e!==l})):n?D(p).concat([l]):[l];return x(a),void(!n&&r&&r())}k({name:t,value:l})}),[k,x,r,n,p]),W=(0,d.useMemo)((function(){return V({},N,{multiple:!!n,files:(null===A||void 0===A?void 0:A.data)||[],isLoading:z||L,selectedFiles:p,updateValue:K})}),[N,A,z,L,K,n,p]);return(0,a.jsxs)(g.Provider,{value:W,children:[(0,a.jsx)("input",V({},$({className:"hidden"}))),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(E,{}),(0,a.jsx)(i.A,{color:"blue",size:42,variant:"filled",className:"flex-none",title:y("Add new"),ml:"xl",onClick:M,children:(0,a.jsx)(u.R.Plus,{className:"!-mx-3 aspect-square w-6"})})]}),(0,a.jsx)(I,{onDeleteClick:T}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o.t,{total:(null===A||void 0===A?void 0:A.last_page)||1,onChange:S,className:"items-center"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:r&&(0,a.jsx)(s.z,{onClick:r,disabled:!p.length,size:"md",color:"green",ml:"xl",children:"Accept"})})]})]})}},64842:function(e,t,n){var r=n(52322),l=n(31005),a=n(16508),i=n(74062),o=n(81428),s=n(24917),u=n(53610),c=n(6277),d=n(2784),f=n(52829),m=(0,d.forwardRef)((function(e,t){var n=e.wrapperClassName,m=e.label,p=e.className,h=e.selected,v=e.onChange,b=e.onBlur,g=e.multiple,x=e.error,j=(0,d.useState)(!1),y=j[0],w=j[1],N=(0,f.$)().t,k=(0,d.useCallback)((function(e){v(g?e:e[0]||null)}),[v,g]),C=(0,d.useCallback)((function(){w(!1),b&&b()}),[b,w]),O=(0,d.useMemo)((function(){return null===h||void 0===h?[]:Array.isArray(h)?h:[h]}),[h]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:(0,c.Z)(n,p),children:(0,r.jsx)(i.S,{size:"md",label:m,error:x,children:(0,r.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,r.jsx)("div",{className:"relative mr-6 aspect-square w-20 overflow-hidden rounded-full",children:O.length?(0,r.jsx)(l.Z,{width:80,quality:40,imageId:O[0],className:"absolute h-full w-full object-cover object-center"}):(0,r.jsx)("div",{className:"absolute flex h-full w-full bg-gray-200",children:(0,r.jsx)(u.R.Photo,{size:40,className:"icon icon-tabler icon-tabler-photo m-auto"})})}),(0,r.jsx)(o.J,{withArrow:!0,opened:y,onClose:C,withinPortal:!1,target:(0,r.jsx)(s.z,{className:"flex-none",color:"ghost",leftIcon:(0,r.jsx)(u.R.Pencil,{size:20}),size:"md",onClick:function(){return w(!0)},children:N("Change")}),width:590,placement:"end",position:"bottom",children:(0,r.jsx)(a.b,{where:{mimeType:{manipulator:"LIKE",value:"%image%"}},title:N("Choose an image"),triggerClose:C,multiple:g,pickedFiles:O,onChange:k})})]})})})})}));t.Z=m}}]);