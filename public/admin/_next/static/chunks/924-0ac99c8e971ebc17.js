"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[924],{16508:function(e,t,r){r.d(t,{b:function(){return W}});var n=r(94776),l=r.n(n),o=r(52322),i=r(85409),a=r(11794),c=r(24917),u=r(53610),s=r(33965),f=r(2784),d=r(95720),m=r(52829);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){p(e,t,r[t])}))}return e}function g(e,t){return b({},e,p({},t.name,t.value))}var v={searchValue:"",multiple:!1,files:[],isUploading:!1,isLoading:!0,selectedFiles:[],updateValue:function(){}},h=(0,f.createContext)(v),y=function(){return(0,f.useContext)(h)},j=r(96454),x=r(6277),O=function(){return{itemsWrap:(0,x.Z)("grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-7 items-start min-h-[200px] py-6"),itemRoot:(0,x.Z)("relative block group"),itemSquare:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,x.Z)("aspect-[4/2] w-full rounded-lg bg-white shadow-md overflow-hidden relative",e?"group-hover:shadow-lg duration-200":"cursor-default")},itemLabel:(0,x.Z)("mt-2 overflow-hidden text-ellipsis font-semibold group-hover:underline text-left mb-0 leading-8")}},w=r(59401),k=O(),N=function(e){var t=e.id,r=e.filename,n=y(),l=n.selectedFiles,i=n.updateValue,a=r.split(".").at(-1)||"unknown",c=a.includes("png")||a.includes("jpg")||a.includes("gif"),d=(0,f.useCallback)((function(){i({name:"selectedFiles",value:t})}),[t,i]),m=(0,f.useMemo)((function(){return l.includes(t)}),[l,t]);return(0,o.jsxs)(w.k,{className:(0,x.Z)(k.itemRoot,"group"),onClick:d,type:"button",children:[(0,o.jsx)("div",{className:k.itemSquare(),children:c?(0,o.jsx)("img",{alt:"uploaded file",className:"absolute top-0 left-0 h-full w-full object-cover",src:"/api".concat(s.Ip.getApiRawUrl(t))}):(0,o.jsx)("div",{className:"flex h-full w-full",children:(0,o.jsx)("p",{className:"m-auto text-3xl font-bold text-gray-400",children:a})})}),(0,o.jsx)("h3",{className:k.itemLabel,children:r}),(0,o.jsx)("div",{className:"absolute top-0 right-0 m-2.5",children:(0,o.jsx)("div",{className:(0,x.Z)("flex h-10 w-10 rounded-lg border-2 border-project-border bg-white shadow-lg transition-all duration-150",m?"text-green-600":"text-white group-hover:text-blue-200"),children:(0,o.jsx)(u.R.Check,{className:(0,x.Z)("m-auto h-8 w-8 !fill-transparent",m?"scale-100":"scale-80 ")})})})]})},P=r(24774),C=function(){var e=O();return(0,o.jsx)(P.O,{className:e.itemSquare(!1)})};function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e){var t=e.onDeleteClick,r=O(),n=y(),l=n.files,i=n.isLoading,a=n.isUploading;return(0,o.jsxs)("div",{className:r.itemsWrap,children:[i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C,{}),(0,o.jsx)(C,{}),(0,o.jsx)(C,{}),(0,o.jsx)(C,{}),(0,o.jsx)(C,{}),(0,o.jsx)(C,{})]}):l.length?l.map((function(e){return(0,o.jsx)(N,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}({onDeleteClick:t},e),e.id)})):(0,o.jsx)(j.Z,{className:"col-span-1 sm:col-span-2 md:col-span-4"}),a&&(0,o.jsx)(C,{})]})},A=r(11804),I=r(85482);function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}var R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A.x.get(e,{params:t}).then((function(e){return e.data}))};function z(e){var t=(0,I.ZP)([s.Uq.getListUrl("files")+"/paged-items",e],R),r=t.data,n=t.error;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Z(e,t,r[t])}))}return e}({data:r,isLoading:!n&&!r,isError:n},F(t,["data","error"]))}var D=r(34272),L=function(){var e=(0,m.$)().t;return(0,o.jsx)("div",{className:"flex w-full items-center",children:(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(D.o,{icon:(0,o.jsx)(u.R.Search,{size:20}),name:"query",className:"w-full",placeholder:e("Your filename, id, description...")})})})};function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t,r,n,l,o,i){try{var a=e[o](i),c=a.value}catch(u){return void r(u)}a.done?t(c):Promise.resolve(c).then(n,l)}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){$(e,t,r[t])}))}return e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,o=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(c){a=!0,l=c}finally{try{i||null==r.return||r.return()}finally{if(a)throw l}}return o}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}var W=function(e){e.title;var t=e.multiple,r=e.triggerClose,n=e.pickedFiles,p=e.onChange,y=e.filter,j=(0,m.$)().t,x=_(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.useReducer)(g,b({},v,e))}(),2),O=x[0],w=x[1],k=(0,f.useState)(1),N=k[0],P=k[1],C=z(M({page:N},y?Object.fromEntries(y.map((function(e,t){var r=_(e,3),n=r[0],l=r[1],o=r[2];return["where[".concat(t,"]"),'["'.concat(n,'","').concat(l,'","').concat(o,'"]')]}))):{})),S=C.data,A=C.isError,I=C.isLoading,Z=C.mutate,F=(0,f.useCallback)((function(e){}),[]),R=(0,f.useCallback)(function(){var e,t=(e=l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w({name:"isLoading",value:!0}),e.next=3,s.Ip.create(t[0],{root:"/"});case 3:w({name:"isLoading",value:!1}),Z();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,l){var o=e.apply(t,r);function i(e){U(o,n,l,i,a,"next",e)}function a(e){U(o,n,l,i,a,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[w,Z]),D=(0,d.uI)({onDrop:R,noClick:!0,noKeyboard:!0,multiple:!1}),q=D.open,$=D.getInputProps,T=(0,f.useCallback)((function(e){var l=e.name,o=e.value;if("selectedFiles"===l){var i=n.includes(o)?n.filter((function(e){return e!==o})):t?V(n).concat([o]):[o];return p(i),void(!t&&r&&r())}w({name:l,value:o})}),[w,p,r,t,n]),W=(0,f.useMemo)((function(){return M({},O,{multiple:!!t,files:(null===S||void 0===S?void 0:S.data)||[],isLoading:I||A,selectedFiles:n,updateValue:T})}),[O,S,I,A,T,t,n]);return(0,o.jsxs)(h.Provider,{value:W,children:[(0,o.jsx)("input",M({},$({className:"hidden"}))),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)(L,{}),(0,o.jsx)(i.A,{color:"blue",size:42,variant:"filled",className:"flex-none",title:j("Add new"),ml:"xl",onClick:q,children:(0,o.jsx)(u.R.Plus,{className:"!-mx-3 aspect-square w-6"})})]}),(0,o.jsx)(E,{onDeleteClick:F}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)(a.t,{total:(null===S||void 0===S?void 0:S.last_page)||1,onChange:P,className:"items-center"}),(0,o.jsx)("div",{className:"flex items-center gap-2",children:r&&(0,o.jsx)(c.z,{onClick:r,disabled:!n.length,size:"md",color:"green",ml:"xl",children:"Accept"})})]})]})}},96454:function(e,t,r){var n=r(52322),l=r(53610),o=r(6277),i=r(52829);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}t.Z=function(e){var t=e.className,r=c(e,["className"]),u=(0,i.$)().t;return(0,n.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({className:(0,o.Z)("flex min-h-[300px] flex-col justify-center text-center text-xl font-semibold text-gray-400",t)},r,{children:[(0,n.jsx)(l.R.QuestionMark,{size:40,className:"mx-auto"}),(0,n.jsx)("p",{children:u("No items available...")})]}))}},7924:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(52322),l=r(31005),o=r(74763),i=r(16508);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}var u=function(e){var t=e.multiple,r=e.onClose,l=e.pickedFiles,u=e.onChange,s=e.title,f=e.filter,d=c(e,["multiple","onClose","pickedFiles","onChange","title","filter"]);return(0,n.jsx)(o.u,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({onClose:r,title:s},d,{children:(0,n.jsx)(i.b,{filter:f,title:s,triggerClose:r,multiple:t,pickedFiles:l,onChange:u})}))},s=r(74062),f=r(24917),d=r(53610),m=r(6277),p=r(2784),b=r(52829),g=(0,p.forwardRef)((function(e,t){var r=e.wrapperClassName,o=e.label,i=e.className,a=e.selected,c=e.onChange,g=e.onBlur,v=e.multiple,h=e.error,y=(0,p.useState)(!1),j=y[0],x=y[1],O=(0,b.$)().t,w=(0,p.useCallback)((function(e){c(v?e:e[0]||null)}),[c,v]),k=(0,p.useCallback)((function(){x(!1),g&&g()}),[g,x]),N=(0,p.useMemo)((function(){return null===a||void 0===a?[]:Array.isArray(a)?a:[a]}),[a]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,m.Z)(r,i),children:(0,n.jsx)(s.S,{size:"md",label:o,error:h,children:(0,n.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,n.jsx)("div",{className:"relative mr-6 aspect-square w-20 overflow-hidden rounded-full",children:N.length?(0,n.jsx)(l.Z,{imageId:N[0],className:"absolute h-full w-full object-cover object-center"}):(0,n.jsx)("div",{className:"absolute flex h-full w-full bg-gray-200",children:(0,n.jsx)(d.R.Photo,{className:"m-auto aspect-square w-10 stroke-slate-500"})})}),(0,n.jsx)(f.z,{className:"flex-none",color:"ghost",leftIcon:(0,n.jsx)(d.R.Pencil,{size:20}),size:"md",onClick:function(){return x(!0)},children:O("Change")})]})})}),(0,n.jsx)(u,{title:O("Choose an image"),size:"xl",filter:[["mimeType","regexp","^image/.*$"]],multiple:v,opened:j,onClose:k,pickedFiles:N,onChange:w})]})}))}}]);