"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{7851:function(e,t,n){n.d(t,{VY:function(){return re},Be:function(){return f},DQ:function(){return d}});var r=n(2322),i=n(2784),a=n(3955),o=n(1293),s=n(6846),l=n(2507),u=n(5632),c=(0,i.createContext)({exitView:function(){},currentView:"update",itemIsMissing:!1,itemIsLoading:!0,itemIsError:!1}),d=function(){return(0,i.useContext)(c)},f=function(e){var t=e.children,n=e.viewType,i=(0,u.useRouter)().push,a=(0,o.Z)(),d=(0,s.Z)(),f=d.data,m=d.isError,p=d.isLoading,v=d.itemIsMissing;return(0,r.jsx)(c.Provider,{value:{currentView:n,exitView:function(){i(l.Uq.getListUrl(null===a||void 0===a?void 0:a.name))},itemData:f,itemIsError:m,itemIsLoading:p,itemIsMissing:v},children:t})},m=n(8425),p=n(2021),v=n.n(p),x=n(5237),b=n(2829);function h(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){h(a,r,i,o,s,"next",e)}function s(e){h(a,r,i,o,s,"throw",e)}o(void 0)}))}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=(0,x.default)(j(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(837),n.e(474),n.e(951)]).then(n.bind(n,2951));case 2:return e.abrupt("return",e.sent.LazyEditor);case 3:case"end":return e.stop()}}),e)}))),{loadableGenerated:{webpack:function(){return[2951]},modules:["../components/form/BlockEditor/BlockEditor.tsx -> ./LazyEditor"]},ssr:!1}),g=function(e){var t=(0,i.useRef)(),n=(0,a.Gc)().control,o=(0,b.$)().t,s=(0,i.useCallback)((function(e){return j(v().mark((function t(n,r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=JSON,t.next=4,n.saver.save();case 4:t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),(0,t.t0)(t.t3);case 7:case"end":return t.stop()}}),t)})))}),[]);return(0,i.useEffect)((function(){}),[]),(0,r.jsx)(a.Qr,{control:n,name:"content",render:function(n){var i=n.field.onChange;return(0,r.jsx)(w,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}({ref:t,placeholder:o("Start typing here...")},e,{onChange:s(i)}))}})};var O=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t,n=d().currentView,s=(0,a.Gc)(),l=s.formState,u=s.watch,c=(0,o.Z)(),f=u("content"),p=(0,i.useMemo)((function(){if(c)return(0,m.x)(c)}),[c]);return p?(0,r.jsxs)(r.Fragment,{children:["simple"===(null===c||void 0===c||null===(t=c.admin)||void 0===t?void 0:t.layout)?p&&(0,r.jsx)(m.Z,{fields:p}):(0,r.jsx)(g,{initialValue:f,autofocus:"update"===n}),l.isSubmitting&&(0,r.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]}):null},N=n(7962),k=n(6277),P=n(9748),E=n(7095);function S(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}var C=function(){var e,t=d(),n=t.currentView,r=t.itemData,i=(0,b.$)().t,a=(0,o.Z)(),s=(0,u.useRouter)().push,c=(0,P.z)();return e=v().mark((function e(t){var o,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.showNotification({loading:!0,title:"update"===n?"Updating":"Creating",message:i("update"===n?"Updating your entry, please wait...":"Creating new entry, please wait..."),autoClose:!1,disallowClose:!0}),"update"!==n){e.next=8;break}return e.next=4,l.Uq.update({id:r.id,model:a.name},(0,E.d$)(r,t)).catch((function(){c.updateNotification(o,{message:i("An error happened"),autoClose:2e3})}));case 4:e.sent,c.updateNotification(o,{message:i("Your entry is updated!"),autoClose:2e3}),e.next=13;break;case 8:if("create"!==n){e.next=13;break}return e.next=11,l.Uq.create({model:a.name},(0,E.d$)(r||{},t)).catch((function(){c.updateNotification(o,{message:i("An error happened"),autoClose:2e3})}));case 11:(null===(u=e.sent)||void 0===u?void 0:u.data)&&(s(l.Uq.getListUrl(null===a||void 0===a?void 0:a.name)),c.updateNotification(o,{message:i("New entry has been created!"),autoClose:2e3}));case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){S(a,r,i,o,s,"next",e)}function s(e){S(a,r,i,o,s,"throw",e)}o(void 0)}))}};function Z(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U(e,t,n[t])}))}return e}function I(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _=function(){var e,t=(0,i.useState)(!1),n=t[0],o=t[1],s=C(),l=d().currentView,u=(0,i.useState)("create"===l),c=u[0],f=u[1],m=(0,a.Gc)(),p=m.register,x=m.watch,h=p("title"),j=h.ref,y=I(h,["ref"]),w=(0,i.useRef)(null),g=(0,b.$)().t,O=x("title"),P=(e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,s({title:O});case 3:o(!1),f(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Z(a,r,i,o,s,"next",e)}function s(e){Z(a,r,i,o,s,"throw",e)}o(void 0)}))});return(0,i.useEffect)((function(){var e;c&&w.current&&(null===(e=w.current)||void 0===e||e.focus())}),[c]),(0,r.jsxs)("div",{className:"flex w-full items-center",children:[(0,r.jsx)("input",V({className:(0,k.Z)("w-full bg-transparent text-5xl font-bold outline-none",!c&&"cursor-default"),placeholder:g("Enter your title here..."),readOnly:!c,ref:function(e){j(e),w.current=e}},y)),"update"===l&&(c?(0,r.jsx)("button",{type:"button",className:"ml-5 rounded-full bg-white p-1 text-green-500 shadow-md hover:scale-110",title:g("Save changes"),onClick:P,children:n?(0,r.jsx)("span",{className:"block aspect-square w-8 font-bold",children:"..."}):(0,r.jsx)(N.nQG,{className:"w-8"})}):(0,r.jsx)("button",{type:"button",className:"ml-5 text-gray-300 hover:scale-110",title:g("Edit title"),onClick:function(){return f(!0)},children:(0,r.jsx)(N.vdY,{className:"w-8"})}))]})},D=function(){var e,t=d().currentView,n=(0,o.Z)(),i=(0,b.$)().t;return(0,r.jsx)("header",{className:"mr-9 w-full border-b-2 border-project-border pb-5 xl:mr-0",children:"simple"===(null===n||void 0===n||null===(e=n.admin)||void 0===e?void 0:e.layout)?(0,r.jsx)("h1",{className:"text-5xl font-bold",children:i("update"==t?"Update an entry":"Create an entry")}):(0,r.jsx)(_,{})})},L=n(621),M=n(2577),$=function(e){var t=e.children,n=(0,a.Gc)().handleSubmit,i=C();return(0,r.jsx)("form",{onSubmit:n(i),autoComplete:"off",children:t})},R=n(9486),T=n(1922),q=n(4193),z=n(1519),G=n(8879),Y=n.n(G),B=n(9117),Q=n(6643);function H(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){X(e,t,n[t])}))}return e}function J(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var F=function(e){var t=e.className,n=J(e,["className"]);return(0,r.jsx)(q.Z,A({className:(0,k.Z)("relative top-0.5 inline-block h-4",t)},n))},K="D.M. YYYY @ HH:mm",W=function(e){var t,n,s=e.isSubmitting,u=d(),c=u.itemData,f=u.itemIsLoading,p=u.currentView,x=u.exitView,h=(0,o.Z)(),j=(0,(0,a.Gc)().watch)(),y=(0,Q.o)(),w=(0,b.$)().t,g=(0,i.useMemo)((function(){return"update"!==p||!!Object.keys((0,E.d$)(c||{},j)).length}),[j,p,c]),O=(n=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(w(B.X3.ON_DELETE_REQUEST_PROMPT))){e.next=4;break}return x(),e.next=4,l.Uq.delete({id:null===c||void 0===c?void 0:c.id,model:null===h||void 0===h?void 0:h.name});case 4:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(e){H(a,r,i,o,s,"next",e)}function s(e){H(a,r,i,o,s,"throw",e)}o(void 0)}))}),P=(0,i.useMemo)((function(){if(h){var e=h.columns,t=(e.title,e.content,J(e,["title","content"]));return(0,m.x)(A({},h,{columns:t}))}}),[h]);return(0,r.jsxs)("aside",{className:(0,k.Z)(y.aside,"sticky top-0 pr-5"),children:[(0,r.jsxs)(R.Z,{className:"!pt-0",title:"Publish",children:["update"===p&&(0,r.jsx)("div",{className:(0,k.Z)("w-full bg-white",((null===c||void 0===c?void 0:c.updated_at)||(null===c||void 0===c?void 0:c.created_at))&&"px-4 py-5"),children:(null===h||void 0===h?void 0:h.hasTimestamps)&&(0,r.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[!!(null===c||void 0===c?void 0:c.updated_at)&&(0,r.jsxs)("li",{children:[w("Updated at:")," ",f?(0,r.jsx)(F,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:Y()(null===c||void 0===c?void 0:c.updated_at).format(K)})]}),!!(null===c||void 0===c?void 0:c.created_at)&&(0,r.jsxs)("li",{children:[w("Created at:")," ",f?(0,r.jsx)(F,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:Y()(null===c||void 0===c?void 0:c.created_at).format(K)})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-5 border-t-2 border-project-border px-4 py-4",children:["update"===p?(0,r.jsxs)(T.z,{size:"large",type:"button",disabled:s,onClick:O,className:(0,k.Z)(s&&"!cursor-progress","!pl-0 text-sm text-red-500"),children:[(0,r.jsx)(N.XHJ,{className:"mr-3 -mt-1 inline w-5"}),w("Delete")]}):(0,r.jsx)("span",{}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-end gap-5",children:[s&&(0,r.jsxs)("p",{className:"animate-pulse text-lg font-semibold text-orange-500",children:[(0,r.jsx)(z.RefreshIcon,{className:"mr-1.5 inline w-5 animate-spin"}),w("Saving...")]}),(0,r.jsx)(T.z,{size:"large",color:"success",type:"submit",disabled:s||!g,className:(0,k.Z)(s&&"!cursor-progress"),children:w("Ulo\u017eit")})]})]})]}),"post-like"===(null===h||void 0===h||null===(t=h.admin)||void 0===t?void 0:t.layout)&&P&&P.length&&(0,r.jsx)(R.Z,{title:"Other info",className:"mt-10",children:(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(m.Z,{fields:P})})})]})},ee=n(8740),te=n(7572);function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(){var e=d(),t=e.currentView,n=e.itemData,s=e.itemIsLoading,u=(0,o.Z)(),c=(0,b.$)().t,f=(0,i.useMemo)((function(){return u&&(0,M.j)(u,"update"===t)}),[u,t]),m=(0,a.cI)({defaultValues:(null===n||void 0===n?void 0:n.data)||{},reValidateMode:"onBlur",mode:"onTouched",resolver:f&&(0,L.X)(f)});return(0,i.useEffect)((function(){return n&&m.reset(n)}),[n,m]),(0,r.jsx)(a.RV,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ne(e,t,n[t])}))}return e}({},m,{children:(0,r.jsxs)($,{children:[(0,r.jsx)(ee.Z,{className:"py-5",items:[{content:c("Entry types")},{isLinkTo:l.Uq.getListUrl(null===u||void 0===u?void 0:u.name),content:c((0,te.fm)((null===u||void 0===u?void 0:u.name)||""))},{content:c("update"==t?"Update":"Create")},{content:s?(0,r.jsx)(q.Z,{className:"h-4 w-16 flex-none"}):(0,r.jsx)("p",{className:"flex-none text-green-500 underline",children:"update"==t?null===n||void 0===n?void 0:n.id:c("Create")})}]}),(0,r.jsxs)("div",{className:"mt-10 items-start justify-between xl:flex",children:[(0,r.jsxs)("div",{className:"relative -mx-3 grid w-full max-w-4xl gap-5 px-3",children:[(0,r.jsx)(D,{}),(0,r.jsx)(O,{})]}),(0,r.jsx)(W,{isSubmitting:m.formState.isSubmitting})]})]})}))}},2831:function(e,t,n){n.r(t);var r=n(2322);t.default=function(e){var t=e.text,n=void 0===t?"Missing":t;return(0,r.jsx)("div",{className:"flex min-h-screen",children:(0,r.jsxs)("div",{className:"text-center m-auto",children:[(0,r.jsx)("h1",{className:"font-semibold text-6xl",children:"404"}),(0,r.jsx)("hr",{className:"border-t-8 w-1/4 mx-auto my-4 border-blue-100"}),(0,r.jsx)("p",{className:"text-gray-500 text-xl",children:n})]})})}}}]);