"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{6215:function(e,t,n){n.d(t,{VY:function(){return re},Be:function(){return f},DQ:function(){return d}});var r=n(2322),i=n(2784),a=n(3955),o=n(3118),s=n(9377),u=n(7763),l=n(5632),c=(0,i.createContext)({exitView:function(){},currentView:"update",itemIsMissing:!1,itemIsLoading:!0,itemIsError:!1}),d=function(){return(0,i.useContext)(c)},f=function(e){var t=e.children,n=e.viewType,i=(0,l.useRouter)().push,a=(0,o.Z)(),d=(0,s.Z)(),f=d.data,m=d.isError,p=d.isLoading,v=d.itemIsMissing;return(0,r.jsx)(c.Provider,{value:{currentView:n,exitView:function(){i(u.Uq.getListUrl(null===a||void 0===a?void 0:a.name))},itemData:f,itemIsError:m,itemIsLoading:p,itemIsMissing:v},children:t})},m=n(2854),p=n(4776),v=n.n(p),x=n(5237),b=n(2829);function h(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){h(a,r,i,o,s,"next",e)}function s(e){h(a,r,i,o,s,"throw",e)}o(void 0)}))}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=(0,x.default)(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(837),n.e(424),n.e(808),n.e(508),n.e(695)]).then(n.bind(n,6695));case 2:return e.abrupt("return",e.sent.LazyEditor);case 3:case"end":return e.stop()}}),e)}))),{loadableGenerated:{webpack:function(){return[6695]}},ssr:!1}),g=function(e){var t=(0,i.useRef)(),n=(0,a.Gc)().control,o=(0,b.$)().t,s=(0,i.useCallback)((function(e){return function(){var t=y(v().mark((function t(n,r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=JSON,t.next=4,n.saver.save();case 4:return t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}),[]);return(0,r.jsx)(a.Qr,{control:n,name:"content",render:function(n){var i=n.field.onChange;return(0,r.jsx)(w,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}({ref:t,onChange:s(i),placeholder:o("Start typing here...")},e))}})};var O=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t,n=d().currentView,s=(0,a.Gc)(),u=s.formState,l=s.watch,c=(0,o.Z)(),f=l("content"),p=(0,i.useMemo)((function(){if(c)return(0,m.x)(c)}),[c]);return p?(0,r.jsxs)(r.Fragment,{children:["simple"===(null===c||void 0===c||null===(t=c.admin)||void 0===t?void 0:t.layout)?p&&(0,r.jsx)(m.Z,{fields:p}):(0,r.jsx)(g,{initialValue:f,autofocus:"update"===n}),u.isSubmitting&&(0,r.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]}):null},N=n(7962),P=n(6277),k=n(9748),S=n(5386);function C(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}var E=function(){var e=d(),t=e.currentView,n=e.itemData,r=(0,b.$)().t,i=(0,o.Z)(),a=(0,l.useRouter)().push,s=(0,k.z)();return function(){var e,o=(e=v().mark((function e(o){var l,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=s.showNotification({loading:!0,title:"update"===t?"Updating":"Creating",id:"update"===t?"on-update-entry":"on-create-entry",message:r("update"===t?"Updating your entry, please wait...":"Creating new entry, please wait..."),autoClose:!1,disallowClose:!0}),"update"!==t){e.next=7;break}return e.next=4,u.Uq.update({id:n.id,model:i.name},(0,S.d$)(n,o)).catch((function(){s.updateNotification(l,{color:"red",message:r("An error happened"),autoClose:2e3})})).then((function(){s.updateNotification(l,{message:r("Your entry is updated!"),autoClose:2e3})}));case 4:e.sent,e.next=12;break;case 7:if("create"!==t){e.next=12;break}return e.next=10,u.Uq.create({model:i.name},(0,S.d$)(n||{},o)).catch((function(){s.updateNotification(l,{color:"red",message:r("An error happened"),autoClose:2e3})}));case 10:(null===(c=e.sent)||void 0===c?void 0:c.data)&&(a(u.Uq.getListUrl(null===i||void 0===i?void 0:i.name)),s.updateNotification(l,{message:r("New entry has been created!"),autoClose:2e3}));case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){C(a,r,i,o,s,"next",e)}function s(e){C(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e){return o.apply(this,arguments)}}()};function Z(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U(e,t,n[t])}))}return e}function I(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _=function(){var e=(0,i.useState)(!1),t=e[0],n=e[1],o=E(),s=d().currentView,u=(0,i.useState)("create"===s),l=u[0],c=u[1],f=(0,a.Gc)(),m=f.register,p=f.watch,x=m("title"),h=x.ref,y=I(x,["ref"]),j=(0,i.useRef)(null),w=(0,b.$)().t,g=p("title"),O=function(){var e,t=(e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,o({title:g});case 3:n(!1),c(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Z(a,r,i,o,s,"next",e)}function s(e){Z(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e;l&&j.current&&(null===(e=j.current)||void 0===e||e.focus())}),[l]),(0,r.jsxs)("div",{className:"flex w-full items-center",children:[(0,r.jsx)("input",V({className:(0,P.Z)("w-full bg-transparent text-5xl font-bold outline-none",!l&&"cursor-default"),placeholder:w("Enter your title here..."),readOnly:!l,ref:function(e){h(e),j.current=e}},y)),"update"===s&&(l?(0,r.jsx)("button",{type:"button",className:"ml-5 rounded-full bg-white p-1 text-green-500 shadow-md hover:scale-110",title:w("Save changes"),onClick:O,children:t?(0,r.jsx)("span",{className:"block aspect-square w-8 font-bold",children:"..."}):(0,r.jsx)(N.nQG,{className:"w-8"})}):(0,r.jsx)("button",{type:"button",className:"ml-5 text-gray-300 hover:scale-110",title:w("Edit title"),onClick:function(){return c(!0)},children:(0,r.jsx)(N.vdY,{className:"w-8"})}))]})},D=function(){var e,t=d().currentView,n=(0,o.Z)(),i=(0,b.$)().t;return(0,r.jsx)("header",{className:"mr-9 w-full border-b-2 border-project-border pb-5 xl:mr-0",children:"simple"===(null===n||void 0===n||null===(e=n.admin)||void 0===e?void 0:e.layout)?(0,r.jsx)("h1",{className:"text-5xl font-bold",children:i("update"==t?"Update an entry":"Create an entry")}):(0,r.jsx)(_,{})})},L=n(621),M=n(9898),$=function(e){var t=e.children,n=(0,a.Gc)().handleSubmit,i=E();return(0,r.jsx)("form",{onSubmit:n(i),autoComplete:"off",children:t})},R=n(2722),T=n(5026),q=n(9673),G=n(1519),Y=n(8879),z=n.n(Y),Q=n(2649),H=n(5817);function X(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}function J(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var F=function(e){var t=e.className,n=J(e,["className"]);return(0,r.jsx)(q.Z,B({className:(0,P.Z)("relative top-0.5 inline-block h-4",t)},n))},K="D.M. YYYY @ HH:mm",W=function(e){var t,n=e.isSubmitting,s=d(),l=s.itemData,c=s.itemIsLoading,f=s.currentView,p=s.exitView,x=(0,o.Z)(),h=(0,(0,a.Gc)().watch)(),y=(0,H.o)(),j=(0,b.$)().t,w=(0,i.useMemo)((function(){return"update"!==f||!!Object.keys((0,S.d$)(l||{},h)).length}),[h,f,l]),g=function(){var e,t=(e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(j(Q.X3.ON_DELETE_REQUEST_PROMPT))){e.next=4;break}return p(),e.next=4,u.Uq.delete({id:null===l||void 0===l?void 0:l.id,model:null===x||void 0===x?void 0:x.name});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){X(a,r,i,o,s,"next",e)}function s(e){X(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),O=(0,i.useMemo)((function(){if(x){var e=x.columns,t=(e.title,e.content,J(e,["title","content"]));return(0,m.x)(B({},x,{columns:t}))}}),[x]);return(0,r.jsxs)("aside",{className:(0,P.Z)(y.aside,"sticky top-0 pr-5"),children:[(0,r.jsxs)(R.Z,{className:"!pt-0",title:"Publish",children:["update"===f&&(0,r.jsx)("div",{className:(0,P.Z)("w-full bg-white",((null===l||void 0===l?void 0:l.updated_at)||(null===l||void 0===l?void 0:l.created_at))&&"px-4 py-5"),children:(null===x||void 0===x?void 0:x.hasTimestamps)&&(0,r.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[!!(null===l||void 0===l?void 0:l.updated_at)&&(0,r.jsxs)("li",{children:[j("Updated at:")," ",c?(0,r.jsx)(F,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:z()(null===l||void 0===l?void 0:l.updated_at).format(K)})]}),!!(null===l||void 0===l?void 0:l.created_at)&&(0,r.jsxs)("li",{children:[j("Created at:")," ",c?(0,r.jsx)(F,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:z()(null===l||void 0===l?void 0:l.created_at).format(K)})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-5 border-t-2 border-project-border px-4 py-4",children:["update"===f?(0,r.jsxs)(T.z,{size:"large",type:"button",disabled:n,onClick:g,className:(0,P.Z)(n&&"!cursor-progress","!pl-0 text-sm text-red-500"),children:[(0,r.jsx)(N.XHJ,{className:"mr-3 -mt-1 inline w-5"}),j("Delete")]}):(0,r.jsx)("span",{}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-end gap-5",children:[n&&(0,r.jsxs)("p",{className:"animate-pulse text-lg font-semibold text-orange-500",children:[(0,r.jsx)(G.RefreshIcon,{className:"mr-1.5 inline w-5 animate-spin"}),j("Saving...")]}),(0,r.jsx)(T.z,{size:"large",color:"success",type:"submit",disabled:n||!w,className:(0,P.Z)(n&&"!cursor-progress"),children:j("Ulo\u017eit")})]})]})]}),"post-like"===(null===x||void 0===x||null===(t=x.admin)||void 0===t?void 0:t.layout)&&O&&O.length&&(0,r.jsx)(R.Z,{title:"Other info",className:"mt-10",children:(0,r.jsx)("div",{className:"grid gap-5 p-4",children:(0,r.jsx)(m.Z,{fields:O})})})]})},ee=n(1571),te=n(8362);function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(){var e=d(),t=e.currentView,n=e.itemData,s=e.itemIsLoading,l=(0,o.Z)(),c=(0,b.$)().t,f=(0,i.useMemo)((function(){return l&&(0,M.j)(l,"update"===t)}),[l,t]),m=(0,a.cI)({defaultValues:(null===n||void 0===n?void 0:n.data)||{},reValidateMode:"onBlur",mode:"onTouched",resolver:f&&(0,L.X)(f)});return(0,i.useEffect)((function(){return n&&m.reset(n)}),[n,m]),(0,r.jsx)(a.RV,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ne(e,t,n[t])}))}return e}({},m,{children:(0,r.jsxs)($,{children:[(0,r.jsx)(ee.Z,{className:"py-5",items:[{content:c("Entry types")},{isLinkTo:u.Uq.getListUrl(null===l||void 0===l?void 0:l.name),content:c((0,te.fm)((null===l||void 0===l?void 0:l.name)||""))},{content:c("update"==t?"Update":"Create")},{content:s?(0,r.jsx)(q.Z,{className:"h-4 w-16 flex-none"}):(0,r.jsx)("p",{className:"flex-none text-green-500 underline",children:"update"==t?null===n||void 0===n?void 0:n.id:c("Create")})}]}),(0,r.jsxs)("div",{className:"mt-10 items-start justify-between xl:flex",children:[(0,r.jsxs)("div",{className:"relative -mx-3 grid w-full max-w-4xl gap-5 px-3",children:[(0,r.jsx)(D,{}),(0,r.jsx)(O,{})]}),(0,r.jsx)(W,{isSubmitting:m.formState.isSubmitting})]})]})}))}},2626:function(e,t,n){n.r(t);var r=n(2322);t.default=function(e){var t=e.text,n=void 0===t?"Missing":t;return(0,r.jsx)("div",{className:"flex min-h-screen",children:(0,r.jsxs)("div",{className:"text-center m-auto",children:[(0,r.jsx)("h1",{className:"font-semibold text-6xl",children:"404"}),(0,r.jsx)("hr",{className:"border-t-8 w-1/4 mx-auto my-4 border-blue-100"}),(0,r.jsx)("p",{className:"text-gray-500 text-xl",children:n})]})})}}}]);