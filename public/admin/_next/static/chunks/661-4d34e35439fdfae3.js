"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[661],{95501:function(e,t,r){r.d(t,{VY:function(){return ue},Be:function(){return d},DQ:function(){return f}});var n=r(52322),a=r(2784),i=r(63955),o=r(93118),l=r(59377),u=r(47763),s=r(5632),c=(0,a.createContext)({exitView:function(){},currentView:"update",itemIsMissing:!1,itemIsLoading:!0,itemIsError:!1}),f=function(){return(0,a.useContext)(c)},d=function(e){var t=e.children,r=e.viewType,a=(0,s.useRouter)().push,i=(0,o.Z)(),f=(0,l.Z)(),d=f.data,m=f.isError,p=f.isLoading,v=f.itemIsMissing;return(0,n.jsx)(c.Provider,{value:{currentView:r,exitView:function(){a(u.Uq.getListUrl(null===i||void 0===i?void 0:i.name))},itemData:d,itemIsError:m,itemIsLoading:p,itemIsMissing:v},children:t})},m=r(52854),p=r(94776),v=r.n(p),b=r(25237),h=r(52829);function x(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,a)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){x(i,n,a,o,l,"next",e)}function l(e){x(i,n,a,o,l,"throw",e)}o(void 0)}))}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=(0,b.default)(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(837),r.e(424),r.e(808),r.e(508),r.e(695)]).then(r.bind(r,76695));case 2:return e.abrupt("return",e.sent.LazyEditor);case 3:case"end":return e.stop()}}),e)}))),{loadableGenerated:{webpack:function(){return[76695]}},ssr:!1}),w=(0,a.forwardRef)((function(e,t){var r=(0,i.Gc)().control,o=(0,h.$)().t,l=(0,a.useCallback)((function(e){return function(){var t=y(v().mark((function t(r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=JSON,t.next=4,r.saver.save();case 4:return t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[]);return(0,n.jsx)(i.Qr,{control:r,name:"content",render:function(r){var a=r.field.onChange;return(0,n.jsx)(j,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){g(e,t,r[t])}))}return e}({editorRef:t,onChange:l(a),placeholder:o("Start typing here...")},e))}})})),O=(0,a.forwardRef)((function(e,t){var r,l=(t.current||{}).editorRef,u=f(),s=u.currentView,c=u.itemData,d=(0,i.Gc)().formState,p=(0,o.Z)(),v=(0,a.useMemo)((function(){if(p)return(0,m.x)(p)}),[p]);return v?(0,n.jsxs)(n.Fragment,{children:["simple"===(null===p||void 0===p||null===(r=p.admin)||void 0===r?void 0:r.layout)?v&&(0,n.jsx)(m.Z,{fields:v}):(0,n.jsx)(w,{initialValue:null===c||void 0===c?void 0:c.content,autofocus:"update"===s,ref:l}),d.isSubmitting&&(0,n.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]}):null})),N=r(53610),S=r(6277),k=r(59748),P=r(5386),C=r(85482);function E(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,a)}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){U(e,t,r[t])}))}return e}var R=function(){var e=(0,a.useRef)(null),t=(0,C.kY)().mutate,r=f(),n=r.currentView,i=r.itemData,l=(0,h.$)().t,c=(0,o.Z)(),d=(0,s.useRouter)().push,m=(0,k.z)(),p=function(){var r,a=(r=v().mark((function r(a){var o,s,f,p,b;return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=c.name,s=m.showNotification({id:"update"===n?"on-update-entry":"on-create-entry",loading:!0,title:"update"===n?"Updating":"Creating",message:l("update"===n?"Updating your entry, please wait...":"Creating new entry, please wait..."),autoClose:!1,disallowClose:!0}),r.t0=e.current,!r.t0){r.next=7;break}return r.next=6,e.current.isReady;case 6:r.t0=r.sent;case 7:if(!r.t0){r.next=11;break}return r.next=10,e.current.saver.save();case 10:a.content=r.sent;case 11:if("update"!==n){r.next=27;break}return r.prev=12,f=(0,P.d$)(i,a),p=i.id,r.next=17,u.Uq.update({id:p,model:o},f);case 17:return r.next=19,t(u.Uq.apiGetUrl(p,o),(function(e){return Z({},e,{finalValues:f})}));case 19:m.updateNotification(s,{message:l("Your entry is updated!"),autoClose:2e3}),r.next=25;break;case 22:r.prev=22,r.t1=r.catch(12),m.updateNotification(s,{color:"red",message:l("An error happened"),autoClose:2e3});case 25:r.next=41;break;case 27:if("create"!==n){r.next=41;break}return r.prev=28,r.next=31,u.Uq.create({model:o},a);case 31:if(null===(b=r.sent)||void 0===b?void 0:b.data){r.next=34;break}throw new Error("No data has been received");case 34:d(u.Uq.getListUrl(null===c||void 0===c?void 0:c.name)),m.updateNotification(s,{message:l("New entry has been created!"),autoClose:2e3}),r.next=41;break;case 38:r.prev=38,r.t2=r.catch(28),m.updateNotification(s,{color:"red",message:l("An error happened"),autoClose:2e3});case 41:case"end":return r.stop()}}),r,null,[[12,22],[28,38]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){E(i,n,a,o,l,"next",e)}function l(e){E(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}();return[p,e]};function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,a)}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){A(e,t,r[t])}))}return e}function M(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(u){l=!0,a=u}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(){var e,t,r=(0,a.useState)(!1),o=r[0],l=r[1],u=_(R(),1)[0],s=f().currentView,c=(0,a.useState)("create"===s),d=c[0],m=c[1],p=(0,i.Gc)(),b=p.register,x=p.watch,y=p.formState,g=b("title"),j=g.ref,w=M(g,["ref"]),O=(0,a.useRef)(null),k=(0,h.$)().t,P=x("title"),C=function(){var e,t=(e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,u({title:P});case 3:l(!1),m(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){V(i,n,a,o,l,"next",e)}function l(e){V(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,a.useEffect)((function(){var e;d&&O.current&&(null===(e=O.current)||void 0===e||e.focus())}),[d]),(0,n.jsxs)("div",{className:"flex w-full items-center",children:[(0,n.jsxs)("div",{className:"relative w-full",children:[(0,n.jsx)("input",D({className:(0,S.Z)("w-full bg-transparent text-5xl font-bold outline-none",!d&&"cursor-default"),placeholder:k("Enter your title here..."),readOnly:!d,ref:function(e){j(e),O.current=e}},w)),(null===(e=y.errors)||void 0===e||null===(t=e.title)||void 0===t?void 0:t.message)&&(0,n.jsx)("small",{className:"font-bold text-red-500",children:y.errors.title.message})]}),"update"===s&&(d?(0,n.jsx)("button",{type:"button",className:"ml-5 rounded-full bg-white p-1 text-green-500 shadow-md hover:scale-110",title:k("Save changes"),onClick:C,children:o?(0,n.jsx)("span",{className:"block aspect-square w-8 font-bold",children:"..."}):(0,n.jsx)(N.R.Check,{className:"h-10 w-10"})}):(0,n.jsx)("button",{type:"button",className:"ml-5 text-gray-300 hover:scale-110",title:k("Edit title"),onClick:function(){return m(!0)},children:(0,n.jsx)(N.R.Pencil,{className:"h-10 w-10"})}))]})},T=function(){var e,t=f().currentView,r=(0,o.Z)(),a=(0,h.$)().t;return(0,n.jsx)("header",{className:"mr-9 w-full border-b-2 border-project-border pb-5 xl:mr-0",children:"simple"===(null===r||void 0===r||null===(e=r.admin)||void 0===e?void 0:e.layout)?(0,n.jsx)("h1",{className:"text-5xl font-bold",children:a("update"==t?"Update an entry":"Create an entry")}):(0,n.jsx)(L,{})})},$=r(30621),q=r(49898),Y=r(72722),z=r(25026),G=r(89673),Q=r(28879),B=r.n(Q),H=r(52170),X=r(35817);function F(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,a)}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){J(e,t,r[t])}))}return e}function W(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ee=function(e){var t=e.className,r=W(e,["className"]);return(0,n.jsx)(G.Z,K({className:(0,S.Z)("relative top-0.5 inline-block h-4",t)},r))},te="D.M. YYYY @ HH:mm",re=function(e){var t,r=e.isSubmitting,l=f(),s=l.itemData,c=l.itemIsLoading,d=l.currentView,p=l.exitView,b=(0,o.Z)(),x=(0,(0,i.Gc)().watch)(),y=(0,X.o)(),g=(0,h.$)().t,j=(0,a.useMemo)((function(){return"update"!==d||!!Object.keys((0,P.d$)(s||{},x)).length}),[x,d,s]),w=function(){var e,t=(e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(g(H.X3.ON_DELETE_REQUEST_PROMPT))){e.next=4;break}return p(),e.next=4,u.Uq.delete({id:null===s||void 0===s?void 0:s.id,model:null===b||void 0===b?void 0:b.name});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){F(i,n,a,o,l,"next",e)}function l(e){F(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),O=(0,a.useMemo)((function(){if(b){var e=b.columns,t=(e.title,e.content,W(e,["title","content"]));return(0,m.x)(K({},b,{columns:t}))}}),[b]);return(0,n.jsxs)("aside",{className:(0,S.Z)(y.aside,"sticky top-0 pr-5"),children:[(0,n.jsxs)(Y.Z,{className:"!pt-0",title:"Publish",children:["update"===d&&(0,n.jsx)("div",{className:(0,S.Z)("w-full bg-white",((null===s||void 0===s?void 0:s.updated_at)||(null===s||void 0===s?void 0:s.created_at))&&"px-4 py-5"),children:(null===b||void 0===b?void 0:b.hasTimestamps)&&(0,n.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[!!(null===s||void 0===s?void 0:s.updated_at)&&(0,n.jsxs)("li",{children:[g("Updated at:")," ",c?(0,n.jsx)(ee,{className:"w-full max-w-[6rem]"}):(0,n.jsx)("span",{className:"font-semibold text-blue-600",children:B()(null===s||void 0===s?void 0:s.updated_at).format(te)})]}),!!(null===s||void 0===s?void 0:s.created_at)&&(0,n.jsxs)("li",{children:[g("Created at:")," ",c?(0,n.jsx)(ee,{className:"w-full max-w-[6rem]"}):(0,n.jsx)("span",{className:"font-semibold text-blue-600",children:B()(null===s||void 0===s?void 0:s.created_at).format(te)})]})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-5 border-t-2 border-project-border px-4 py-4",children:["update"===d?(0,n.jsxs)(z.z,{size:"large",type:"button",disabled:r,onClick:w,className:(0,S.Z)(r&&"!cursor-progress","!pl-0 text-sm text-red-500"),children:[(0,n.jsx)(N.R.Trash,{className:"mr-3 -mt-1 inline w-5"}),g("Delete")]}):(0,n.jsx)("span",{}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-end gap-5",children:[r&&(0,n.jsxs)("p",{className:"animate-pulse text-lg font-semibold text-orange-500",children:[(0,n.jsx)(N.R.Refresh,{className:"mr-1.5 inline w-5 animate-spin"}),g("Saving...")]}),(0,n.jsx)(z.z,{size:"large",color:"success",type:"submit",disabled:r||!j,className:(0,S.Z)(r&&"!cursor-progress"),children:g("Ulo\u017eit")})]})]})]}),"post-like"===(null===b||void 0===b||null===(t=b.admin)||void 0===t?void 0:t.layout)&&O&&O.length&&(0,n.jsx)(Y.Z,{title:"Other info",className:"mt-10",children:(0,n.jsx)("div",{className:"grid gap-5 p-4",children:(0,n.jsx)(m.Z,{fields:O})})})]})},ne=r(1571),ae=r(18362);function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(u){l=!0,a=u}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ue=function(){var e=f(),t=e.currentView,r=e.itemData,l=e.itemIsLoading,s=le(R(),2),c=s[0],d=s[1],m=(0,a.useRef)({editorRef:d}),p=(0,o.Z)(),v=(0,h.$)().t,b=(0,a.useMemo)((function(){return p&&(0,q.j)(p,"update"===t)}),[p,t]),x=(0,i.cI)({defaultValues:(null===r||void 0===r?void 0:r.data)||{},reValidateMode:"onBlur",mode:"onTouched",resolver:b&&(0,$.X)(b)});return(0,a.useEffect)((function(){return r&&x.reset(r)}),[r,x]),(0,n.jsx)(i.RV,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){oe(e,t,r[t])}))}return e}({},x,{children:(0,n.jsxs)("form",{onSubmit:x.handleSubmit(c),autoComplete:"off",children:[(0,n.jsx)(ne.Z,{className:"py-5",items:[{content:v("Entry types")},{isLinkTo:u.Uq.getListUrl(null===p||void 0===p?void 0:p.name),content:v((0,ae.fm)((null===p||void 0===p?void 0:p.name)||""))},{content:v("update"==t?"Update":"Create")},{content:l?(0,n.jsx)(G.Z,{className:"h-4 w-16 flex-none"}):(0,n.jsx)("p",{className:"flex-none text-green-500 underline",children:"update"==t?null===r||void 0===r?void 0:r.id:v("Create")})}]}),(0,n.jsxs)("div",{className:"mt-10 items-start justify-between xl:flex",children:[(0,n.jsxs)("div",{className:"relative -mx-3 grid w-full max-w-4xl gap-5 px-3",children:[(0,n.jsx)(T,{}),(0,n.jsx)(O,{ref:m})]}),(0,n.jsx)(re,{isSubmitting:x.formState.isSubmitting})]})]})}))}},62626:function(e,t,r){r.r(t);var n=r(52322);t.default=function(e){var t=e.text,r=void 0===t?"Missing":t;return(0,n.jsx)("div",{className:"flex min-h-screen",children:(0,n.jsxs)("div",{className:"text-center m-auto",children:[(0,n.jsx)("h1",{className:"font-semibold text-6xl",children:"404"}),(0,n.jsx)("hr",{className:"border-t-8 w-1/4 mx-auto my-4 border-blue-100"}),(0,n.jsx)("p",{className:"text-gray-500 text-xl",children:r})]})})}}}]);