(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{91668:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset-password",function(){return n(5645)}])},5645:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return F}});var t=n(52322),s=n(8168),o=n(75660),i=n(9870),a=n(5632),l=n(94776),c=n.n(l),u=n(30621),d=n(59748),m=n(89644),f=n.n(m),h=n(33965),w=n(63955),p=n(39097),x=n(65413),v=(0,x.object)().shape({email:(0,x.string)().email("Please enter valid email address").required("Dont forget to include this value")}).noUnknown(),b=(0,x.object)().shape({new_password:(0,x.string)().required("Dont forget to include this value"),confirmed_new_password:(0,x.string)().required("Dont forget to include this value").oneOf([(0,x.ref)("new_password"),null],"Passwords must match"),token:(0,x.string)().required("Dont forget to include this value")}).noUnknown(),g=n(52829),j=n(53610),y=n(54339),k=n(93024),N=n(24917);function _(e,r,n,t,s,o,i){try{var a=e[o](i),l=a.value}catch(c){return void n(c)}a.done?r(l):Promise.resolve(l).then(t,s)}function O(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function P(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){O(e,r,n[r])}))}return e}function S(e,r){if(null==e)return{};var n,t,s=function(e,r){if(null==e)return{};var n,t,s={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(s[n]=e[n]);return s}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var E=function(e){var r,n,s,o=e.token,i=(0,g.$)().t,a=(0,d.z)(),l=(0,w.cI)({resolver:(0,u.X)(b),defaultValues:{new_password:"",confirmed_new_password:"",token:o}}),m=l.register,x=l.formState,v=l.handleSubmit,O=l.setError,E=function(){var e,r=(e=c().mark((function e(r){var n,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.confirmed_new_password,n=S(r,["confirmed_new_password"]),e.prev=1,e.next=4,h.H3.finalizePasswordReset(n);case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),!f().isAxiosError(e.t0)){e.next=12;break}throw(null===(t=e.t0.response)||void 0===t?void 0:t.status)?O("token",{message:"Your token seems expired..."}):a.showNotification({id:"reset-password-finalization-notification",color:"red",title:"An error happened",message:"An error happened during request. Please try again..."}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var r=this,n=arguments;return new Promise((function(t,s){var o=e.apply(r,n);function i(e){_(o,t,s,i,a,"next",e)}function a(e){_(o,t,s,i,a,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}(),q=null===(r=x.errors.token)||void 0===r?void 0:r.message,R=!!q;return(0,t.jsx)(w.RV,P({},l,{children:(0,t.jsx)("div",{className:"flex min-h-screen w-full",children:(0,t.jsxs)("div",{className:"m-auto w-full max-w-lg",children:[(0,t.jsx)("h1",{className:"mb-3 ml-5 text-2xl font-semibold",children:i("Create a new password")}),(0,t.jsx)("form",{onSubmit:v(E),children:(0,t.jsx)(y.X,{shadow:"xl",p:"md",withBorder:!0,className:"w-full",children:x.isSubmitSuccessful||R?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"text-center",children:[R?(0,t.jsx)(j.R.X,{className:"mx-auto aspect-square w-16 text-red-400"}):(0,t.jsx)(j.R.Check,{className:"mx-auto aspect-square w-16 text-green-400"}),(0,t.jsx)("p",{className:"mt-3 text-xl",children:i(R?q:"We are done here! You can login again and continue with your work.")}),(0,t.jsx)(p.default,{href:"/login",children:(0,t.jsx)("a",{className:"mt-5 block font-semibold text-blue-400 hover:underline",children:i("Login to my account")})})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid gap-5",children:[(0,t.jsx)(k.W,P({label:i("Your new password"),className:"w-full",error:i((null===(n=x.errors.new_password)||void 0===n?void 0:n.message)||"")},m("new_password"))),(0,t.jsx)(k.W,P({label:i("Your new password again"),className:"w-full",error:i((null===(s=x.errors.confirmed_new_password)||void 0===s?void 0:s.message)||"")},m("confirmed_new_password")))]}),(0,t.jsx)(N.z,{loading:x.isSubmitting,type:"submit",color:"green",size:"md",className:"mt-7",children:i(x.isSubmitting?"Working...":"Send")})]})})})]})})}))},q=n(47761),R=n(34272);function z(e,r,n,t,s,o,i){try{var a=e[o](i),l=a.value}catch(c){return void n(c)}a.done?r(l):Promise.resolve(l).then(t,s)}function X(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function A(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){X(e,r,n[r])}))}return e}var D=function(){var e,r=(0,g.$)().t,n=(0,d.z)(),s=(0,w.cI)({resolver:(0,u.X)(v),defaultValues:{email:""}}),o=s.register,i=s.formState,a=s.handleSubmit,l=(0,s.watch)("email"),m=function(){var e,r=(e=c().mark((function e(r){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.email,e.prev=1,e.next=4,h.H3.requestPasswordReset({email:t});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),!f().isAxiosError(e.t0)){e.next=11;break}throw n.showNotification({id:"reset-password-request-notification",color:"red",title:"An error happened",message:"An error happened during request. Please try again..."}),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var r=this,n=arguments;return new Promise((function(t,s){var o=e.apply(r,n);function i(e){z(o,t,s,i,a,"next",e)}function a(e){z(o,t,s,i,a,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,t.jsx)(w.RV,A({},s,{children:(0,t.jsx)("div",{className:"flex min-h-screen w-full",children:(0,t.jsxs)("div",{className:"m-auto w-full max-w-lg",children:[(0,t.jsx)("h1",{className:"mb-3 ml-5 text-2xl font-semibold",children:r("Reset password")}),(0,t.jsx)("form",{onSubmit:a(m),children:(0,t.jsx)(y.X,{shadow:"xl",p:"md",withBorder:!0,className:"w-full",children:i.isSubmitSuccessful?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(j.R.Check,{className:"mx-auto aspect-square w-16 text-green-400"}),(0,t.jsx)("p",{className:"mt-3 text-xl",children:(0,t.jsxs)(q.c,{i18nKey:"Please check your inbox on {{providedEmail}} and follow instructions there.",providedEmail:l,children:["Please check your inbox on ",(0,t.jsx)("b",{children:{providedEmail:l}})," ","and follow instructions there."]})}),(0,t.jsx)(p.default,{href:"/login",children:(0,t.jsx)("a",{className:"mt-5 block font-semibold text-blue-400 hover:underline",children:r("Back to login")})})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.o,A({label:"Your email",className:"w-full",type:"email",error:r((null===(e=i.errors.email)||void 0===e?void 0:e.message)||"")},o("email"))),(0,t.jsx)(N.z,{loading:i.isSubmitting,type:"submit",color:"green",size:"md",className:"mt-7",children:r(i.isSubmitting?"Working...":"Send")})]})})})]})})}))},W=function(){var e=(0,a.useRouter)().query;return(null===e||void 0===e?void 0:e.token)?(0,t.jsx)(E,{token:null===e||void 0===e?void 0:e.token}):(0,t.jsx)(D,{})},C=function(){var e=(0,s.bN)().isBooting;return e?(0,t.jsx)(i.a,{show:e}):(0,t.jsx)(W,{})};C.getLayout=function(e){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.XW,{}),e]})};var F=C}},function(e){e.O(0,[568,95,557,110,774,888,179],(function(){return r=91668,e(e.s=r);var r}));var r=e.O();_N_E=r}]);