(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{99962:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/user-roles",function(){return n(1231)}])},96454:function(e,r,n){"use strict";var t=n(52322),o=n(53610),i=n(6277),a=n(52829);function s(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function l(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}r.Z=function(e){var r=e.className,n=l(e,["className"]),c=(0,a.$)().t;return(0,t.jsxs)("div",function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){s(e,r,n[r])}))}return e}({className:(0,i.Z)("flex min-h-[300px] flex-col justify-center text-center text-xl font-semibold text-gray-400",r)},n,{children:[(0,t.jsx)(o.R.QuestionMark,{size:40,className:"mx-auto"}),(0,t.jsx)("p",{children:c("No items available...")})]}))}},76902:function(e,r,n){"use strict";n.d(r,{c:function(){return s}});var t=n(8168),o=n(41277),i=n(2784),a=n(85482),s=function(e,r,n){var s=(0,t.bN)().models,l=(0,i.useMemo)((function(){return void 0!==r}),[r]),c=(0,a.ZP)(l&&s?o.Uq.apiGetUrl(r,e):null,n),u=c.data,f=c.error,d=c.mutate;return(0,i.useMemo)((function(){return{data:u,isLoading:!f&&!u,itemIsMissing:f,isError:f,mutate:d}}),[u,f,d])}},25865:function(e,r,n){"use strict";n.d(r,{y:function(){return p}});var t=n(11804),o=n(41277),i=n(85482);function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function s(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){s(e,r,n[r])}))}return e}function c(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function u(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.x.get(e,{params:r}).then((function(e){return e.data}))},d=function(e){var r=e.where,n=l({},c(e,["where"]));return r&&(n.where=Object.entries(r||{}).map((function(e){var r=u(e,2),n=r[0],t=r[1],o=t.manipulator,i=t.value;return"".concat(n,".").concat(o,".").concat(i)})).join(";")),n};function p(e,r,n){var t=(0,i.ZP)([o.Uq.apiGetListUrl(e||""),d(null!==r&&void 0!==r?r:{})],f,l({isPaused:function(){return!e}},n)),a=t.data,s=t.error;return l({data:a,isLoading:!s&&!a,isError:s},c(t,["data","error"]))}},97470:function(e,r,n){"use strict";n.d(r,{$:function(){return c}});var t=n(94776),o=n.n(t),i=n(80298),a=n(59748),s=n(52829);function l(e,r,n,t,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void n(c)}s.done?r(l):Promise.resolve(l).then(t,o)}var c=function(){var e=(0,a.z)(),r=(0,i.M)(),n=(0,s.$)().t;return function(){var t,i=(t=o().mark((function t(i,a){var s,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.showNotification({id:r,loading:!0,title:i.title,message:i.message,autoClose:!1,disallowClose:!0}),t.prev=1,t.next=4,a();case 4:return l=t.sent,e.updateNotification(s,{message:i.successMessage||n("Task completed successfully"),autoClose:4e3}),t.abrupt("return",l);case 9:throw t.prev=9,t.t0=t.catch(1),e.updateNotification(s,{color:"red",message:i.errorMessage?"function"===typeof i.errorMessage?i.errorMessage(t.t0):i.errorMessage:n("An error happened"),autoClose:4e3}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){l(i,n,o,a,s,"next",e)}function s(e){l(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,r){return i.apply(this,arguments)}}()}},1231:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return B}});var t=n(52322),o=n(94776),i=n.n(o),a=n(96454),s=n(8168),l=n(25865),c=n(97470),u=n(10107),f=n(70790),d=n(59935),p=n(24917),m=n(74559),h=n(85409),b=n(11794),v=n(53610),y=n(41277),g=n(6277),x=n(2784),j=n(52829),w=n(63955),O=n(85393),k=n(23384),C=n(58532),N=n(34272),P=n(40530),S=n(57897),A=n(45521),E=n(9687),M=n(93256),_=n(86184),I=[{label:"Create",isSimple:!0,key:(0,_.k)()},{label:"Read",key:(0,_.k)()},{label:"Update",key:(0,_.k)()},{label:"Delete",key:(0,_.k)()}],U=function(e){var r=e.modelInfo,n=e.modelName,o=(0,j.$)().t,i=I.map((function(e){var r,i=e.label,a=e.key,s=e.isSimple;return(0,t.jsx)(w.Qr,{name:"permissions.models.".concat(n,".").concat(null===(r=i.at(0))||void 0===r?void 0:r.toLowerCase()),render:function(e){var r=e.field,n=r.value,a=r.onChange;return(0,t.jsxs)("div",{className:"mt-5",children:[(0,t.jsx)(S.X,{mt:"xs",className:"cursor-pointer",label:i,checked:!!n,onChange:function(){return a(!n&&"allow-everything")}}),!s&&(0,t.jsx)(A.U,{in:!!n,children:(0,t.jsxs)(E.E,{required:!0,spacing:"xs",value:n,ml:33,orientation:"vertical",size:"sm",onChange:a,children:[(0,t.jsx)(M.Y,{disabled:!n,value:"allow-everything",label:o("Allow on everything")}),(0,t.jsx)(M.Y,{disabled:!n,value:"allow-own",label:o("Allow on only own and shared")})]})})]})}},a)})),a=v.R[r.icon];return(0,t.jsxs)("div",{children:[(0,t.jsxs)(k.D,{mb:"sm",order:5,className:"text-blue-500",children:[(0,t.jsx)(a,{size:17,className:"mr-2 -mb-0.5"}),o(n)]}),i]})},D=n(76902);function T(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function $(e,r,n,t,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void n(c)}s.done?r(l):Promise.resolve(l).then(t,o)}function z(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function a(e){$(i,t,o,a,s,"next",e)}function s(e){$(i,t,o,a,s,"throw",e)}a(void 0)}))}}function R(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Z(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){R(e,r,n[r])}))}return e}function L(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function q(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return T(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=function(e){var r=e.opened,n=e.onClose,o=e.optionToEdit,a=(0,w.cI)(),l=(0,j.$)().t,u=(0,D.c)("userroles",o).data,f=(0,c.$)(),d=(0,s.bN)().models,m=a.handleSubmit,h=a.formState,b=a.register,v=a.reset;(0,x.useEffect)((function(){o?u&&v(u):v({})}),[u,v,o,r]);var g=function(){var e=z(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{f({title:l(o?"Updating user role":"Creating user role"),message:l("Please wait..."),successMessage:l(o?"User role successfully updated":"User role has been created")},z(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=6;break}return r.id,t=L(r,["id"]),e.next=4,y._c.update(o,t);case 4:e.next=8;break;case 6:return e.next=8,y._c.create(r);case 8:n();case 9:case"end":return e.stop()}}),e)}))))}catch(t){}case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),S=(0,x.useMemo)((function(){if(d)return Object.entries(d).filter((function(e){var r=q(e,1)[0];return!["userRoles","users","settings"].includes(r)}))}),[d]);return(0,t.jsx)(w.RV,Z({},a,{children:(0,t.jsx)(O.d,{opened:r,onClose:n,position:"right",padding:32,size:500,className:" overflow-auto",title:(0,t.jsx)(k.D,{order:4,children:o?"Update user role":"Create user role"}),children:(0,t.jsxs)("form",{className:"h-full",onSubmit:m(g),children:[(0,t.jsxs)(C.M,{cols:1,spacing:"md",children:[(0,t.jsx)(N.o,Z({label:"Name"},b("label"))),(0,t.jsx)(P.g,Z({autosize:!0,label:l("Description"),minRows:4},b("description"))),(0,t.jsx)(k.D,{mt:"lg",order:4,children:"Permissions by models"}),(0,t.jsx)(C.M,{cols:1,className:"gap-10",children:S&&S.map((function(e){var r=q(e,2),n=r[0],o=r[1];return(0,t.jsx)(x.Fragment,{children:(0,t.jsx)(U,{modelInfo:o,modelName:n})},n)}))})]}),(0,t.jsx)("div",{className:"sticky right-0 -bottom-8 rounded-lg bg-white pt-5 pb-4",children:(0,t.jsx)(p.z,{className:"mr-auto block",type:"submit",loading:h.isSubmitting,loaderPosition:"right",children:l(o?"Save":"Create")})})]})})}))};function G(e,r,n,t,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void n(c)}s.done?r(l):Promise.resolve(l).then(t,o)}function X(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function a(e){G(i,t,o,a,s,"next",e)}function s(e){G(i,t,o,a,s,"throw",e)}a(void 0)}))}}var Q=(0,u.k)((function(){return{root:{td:{verticalAlign:"baseline"}}}})),W=(0,t.jsx)(f.r.Col,{span:12,children:(0,t.jsx)(d.i,{})}),Y=function(){var e=Q().classes,r=(0,j.$)().t,n=(0,s.bN)().currentUserIsAdmin,o=(0,x.useState)(1),u=o[0],w=o[1],O=(0,l.y)("userroles",{page:u}),k=O.data,C=O.mutate,N=(0,x.useState)(),P=N[0],S=N[1],A=(0,x.useState)(!1),E=A[0],M=A[1],_=(0,c.$)(),I=n,U=n,D=(0,x.useCallback)((function(e){return function(){S(e)}}),[]),T=(0,x.useCallback)((function(e){return X(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{_({title:"Deleting",message:r("Deleting selected user role, please wait..."),successMessage:r("User role deleted!")},X(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y._c.delete(e);case 2:return r.next=4,C();case 4:case"end":return r.stop()}}),r)}))))}catch(t){}case 1:case"end":return n.stop()}}),n)})))}),[r,_,C]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:n&&(0,t.jsx)(p.z,{color:"green",mt:"lg",leftIcon:(0,t.jsx)(v.R.Plus,{}),onClick:function(){return M(!0)},children:r("Add new")})}),(0,t.jsxs)(f.r,{sx:{minWidth:800},className:(0,g.Z)(e.root,"mt-5 min-h-[400px]"),columns:12,children:[(0,t.jsx)(f.r.Col,{span:2,className:"font-semibold uppercase",children:r("Title")}),(0,t.jsx)(f.r.Col,{span:8,className:"font-semibold uppercase",children:r("Description")}),(0,t.jsx)(f.r.Col,{span:2,children:(0,t.jsx)("span",{className:"hidden",children:r("Tools")})}),(0,t.jsx)(f.r.Col,{span:12,children:(0,t.jsx)(d.i,{size:"sm"})}),(null===k||void 0===k?void 0:k.data)?k.data.map((function(e,r){return(0,t.jsxs)(x.Fragment,{children:[0!==r&&W,(0,t.jsx)(f.r.Col,{span:2,children:e.label}),(0,t.jsx)(f.r.Col,{span:8,children:e.description}),(0,t.jsx)(f.r.Col,{span:2,children:0!==e.id&&(0,t.jsxs)(m.Z,{className:"ml-auto",position:"right",spacing:"xs",noWrap:!0,children:[I&&(0,t.jsx)(h.A,{onClick:D(e.id),color:"blue",children:(0,t.jsx)(v.R.Edit,{})}),U&&(0,t.jsx)(h.A,{onClick:T(e.id),color:"red",children:(0,t.jsx)(v.R.Trash,{})})]})})]},e.id)})):(0,t.jsx)(f.r.Col,{span:12,children:(0,t.jsx)(a.Z,{})})]}),k&&(0,t.jsx)(m.Z,{position:"center",my:"xl",children:(0,t.jsx)(b.t,{className:"my-auto",page:u,onChange:w,total:k.last_page})}),(0,t.jsx)(F,{opened:E||!!P,optionToEdit:P,onClose:function(){C(),S(void 0),M(!1)}})]})},V=n(57704),B=function(){return(0,t.jsx)(V.Gv,{children:(0,t.jsx)(Y,{})})}}},function(e){e.O(0,[568,232,484,673,365,774,888,179],(function(){return r=99962,e(e.s=r);var r}));var r=e.O();_N_E=r}]);