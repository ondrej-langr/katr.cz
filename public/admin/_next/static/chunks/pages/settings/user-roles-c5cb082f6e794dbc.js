(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{99962:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/user-roles",function(){return t(1231)}])},96454:function(e,r,t){"use strict";var n=t(52322),o=t(53610),i=t(6277),a=t(52829);function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function l(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}r.Z=function(e){var r=e.className,t=l(e,["className"]),c=(0,a.$)().t;return(0,n.jsxs)("div",function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){s(e,r,t[r])}))}return e}({className:(0,i.Z)("flex min-h-[300px] flex-col justify-center text-center text-xl font-semibold text-gray-400",r)},t,{children:[(0,n.jsx)(o.R.QuestionMark,{size:40,className:"mx-auto"}),(0,n.jsx)("p",{children:c("No items available...")})]}))}},76902:function(e,r,t){"use strict";t.d(r,{c:function(){return l}});var n=t(8168),o=t(41277),i=t(85482);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=function(e,r,t){var l=(0,n.bN)().models,c=void 0!==r,u=(0,i.ZP)(c&&l?o.Uq.apiGetUrl(r,e):null,t),f=u.data,d=u.error;return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){a(e,r,t[r])}))}return e}({data:f,isLoading:!d&&!f,itemIsMissing:d,isError:d},s(u,["data","error"]))}},25865:function(e,r,t){"use strict";t.d(r,{y:function(){return p}});var n=t(11804),o=t(41277),i=t(85482);function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){s(e,r,t[r])}))}return e}function c(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function u(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.x.get(e,{params:r}).then((function(e){return e.data}))},d=function(e){var r=e.where,t=l({},c(e,["where"]));return r&&(t.where=Object.entries(r||{}).map((function(e){var r=u(e,2),t=r[0],n=r[1],o=n.manipulator,i=n.value;return"".concat(t,".").concat(o,".").concat(i)})).join(";")),t};function p(e,r,t){var n=(0,i.ZP)([o.Uq.apiGetListUrl(e||""),d(null!==r&&void 0!==r?r:{})],f,l({isPaused:function(){return!e}},t)),a=n.data,s=n.error;return l({data:a,isLoading:!s&&!a,isError:s},c(n,["data","error"]))}},97470:function(e,r,t){"use strict";t.d(r,{$:function(){return c}});var n=t(94776),o=t.n(n),i=t(80298),a=t(59748),s=t(52829);function l(e,r,t,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void t(c)}s.done?r(l):Promise.resolve(l).then(n,o)}var c=function(){var e=(0,a.z)(),r=(0,i.M)(),t=(0,s.$)().t;return function(){var n,i=(n=o().mark((function n(i,a){var s,l;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=e.showNotification({id:r,loading:!0,title:i.title,message:i.message,autoClose:!1,disallowClose:!0}),n.prev=1,n.next=4,a();case 4:return l=n.sent,e.updateNotification(s,{message:i.successMessage||t("Task completed successfully"),autoClose:4e3}),n.abrupt("return",l);case 9:throw n.prev=9,n.t0=n.catch(1),e.updateNotification(s,{color:"red",message:i.errorMessage?"function"===typeof i.errorMessage?i.errorMessage(n.t0):i.errorMessage:t("An error happened"),autoClose:4e3}),n.t0;case 13:case"end":return n.stop()}}),n,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(t,o){var i=n.apply(e,r);function a(e){l(i,t,o,a,s,"next",e)}function s(e){l(i,t,o,a,s,"throw",e)}a(void 0)}))});return function(e,r){return i.apply(this,arguments)}}()}},1231:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return B}});var n=t(52322),o=t(94776),i=t.n(o),a=t(96454),s=t(8168),l=t(25865),c=t(97470),u=t(10107),f=t(70790),d=t(59935),p=t(24917),m=t(74559),b=t(85409),h=t(11794),y=t(53610),v=t(41277),g=t(6277),j=t(2784),x=t(52829),w=t(63955),O=t(85393),k=t(23384),P=t(58532),S=t(34272),C=t(40530),N=t(57897),E=t(45521),A=t(9687),I=t(93256),_=t(86184),M=[{label:"Create",isSimple:!0,key:(0,_.k)()},{label:"Read",key:(0,_.k)()},{label:"Update",key:(0,_.k)()},{label:"Delete",key:(0,_.k)()}],U=function(e){var r=e.modelInfo,t=e.modelName,o=(0,x.$)().t,i=M.map((function(e){var r,i=e.label,a=e.key,s=e.isSimple;return(0,n.jsx)(w.Qr,{name:"permissions.models.".concat(t,".").concat(null===(r=i.at(0))||void 0===r?void 0:r.toLowerCase()),render:function(e){var r=e.field,t=r.value,a=r.onChange;return(0,n.jsxs)("div",{className:"mt-5",children:[(0,n.jsx)(N.X,{mt:"xs",className:"cursor-pointer",label:i,checked:!!t,onChange:function(){return a(!t&&"allow-everything")}}),!s&&(0,n.jsx)(E.U,{in:!!t,children:(0,n.jsxs)(A.E,{required:!0,spacing:"xs",value:t,ml:33,orientation:"vertical",size:"sm",onChange:a,children:[(0,n.jsx)(I.Y,{disabled:!t,value:"allow-everything",label:o("Allow on everything")}),(0,n.jsx)(I.Y,{disabled:!t,value:"allow-own",label:o("Allow on only own and shared")})]})})]})}},a)})),a=y.R[r.icon];return(0,n.jsxs)("div",{children:[(0,n.jsxs)(k.D,{mb:"sm",order:5,className:"text-blue-500",children:[(0,n.jsx)(a,{size:17,className:"mr-2 -mb-0.5"}),o(t)]}),i]})},D=t(76902);function T(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function $(e,r,t,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void t(c)}s.done?r(l):Promise.resolve(l).then(n,o)}function z(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function a(e){$(i,n,o,a,s,"next",e)}function s(e){$(i,n,o,a,s,"throw",e)}a(void 0)}))}}function R(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){R(e,r,t[r])}))}return e}function L(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function q(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return T(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=function(e){var r=e.opened,t=e.onClose,o=e.optionToEdit,a=(0,w.cI)(),l=(0,x.$)().t,u=(0,D.c)("userroles",o).data,f=(0,c.$)(),d=(0,s.bN)().models,m=a.handleSubmit,b=a.formState,h=a.register,y=a.reset;(0,j.useEffect)((function(){o?u&&y(u):y({})}),[u,y,o,r]);var g=function(){var e=z(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{f({title:l(o?"Updating user role":"Creating user role"),message:l("Please wait..."),successMessage:l(o?"User role successfully updated":"User role has been created")},z(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=6;break}return r.id,n=L(r,["id"]),e.next=4,v._c.update(o,n);case 4:e.next=8;break;case 6:return e.next=8,v._c.create(r);case 8:t();case 9:case"end":return e.stop()}}),e)}))))}catch(n){}case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),N=(0,j.useMemo)((function(){if(d)return Object.entries(d).filter((function(e){var r=q(e,1)[0];return!["userRoles","users","settings"].includes(r)}))}),[d]);return(0,n.jsx)(w.RV,Z({},a,{children:(0,n.jsx)(O.d,{opened:r,onClose:t,position:"right",padding:32,size:500,className:" overflow-auto",title:(0,n.jsx)(k.D,{order:4,children:o?"Update user role":"Create user role"}),children:(0,n.jsxs)("form",{className:"h-full",onSubmit:m(g),children:[(0,n.jsxs)(P.M,{cols:1,spacing:"md",children:[(0,n.jsx)(S.o,Z({label:"Name"},h("label"))),(0,n.jsx)(C.g,Z({autosize:!0,label:l("Description"),minRows:4},h("description"))),(0,n.jsx)(k.D,{mt:"lg",order:4,children:"Permissions by models"}),(0,n.jsx)(P.M,{cols:1,className:"gap-10",children:N&&N.map((function(e){var r=q(e,2),t=r[0],o=r[1];return(0,n.jsx)(j.Fragment,{children:(0,n.jsx)(U,{modelInfo:o,modelName:t})},t)}))})]}),(0,n.jsx)("div",{className:"sticky right-0 -bottom-8 rounded-lg bg-white pt-5 pb-4",children:(0,n.jsx)(p.z,{className:"mr-auto block",type:"submit",loading:b.isSubmitting,loaderPosition:"right",children:l(o?"Save":"Create")})})]})})}))};function G(e,r,t,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void t(c)}s.done?r(l):Promise.resolve(l).then(n,o)}function X(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function a(e){G(i,n,o,a,s,"next",e)}function s(e){G(i,n,o,a,s,"throw",e)}a(void 0)}))}}var Q=(0,u.k)((function(){return{root:{td:{verticalAlign:"baseline"}}}})),W=(0,n.jsx)(f.r.Col,{span:12,children:(0,n.jsx)(d.i,{})}),Y=function(){var e=Q().classes,r=(0,x.$)().t,t=(0,s.bN)().currentUserIsAdmin,o=(0,j.useState)(1),u=o[0],w=o[1],O=(0,l.y)("userroles",{page:u}),k=O.data,P=O.mutate,S=(0,j.useState)(),C=S[0],N=S[1],E=(0,j.useState)(!1),A=E[0],I=E[1],_=(0,c.$)(),M=t,U=t,D=(0,j.useCallback)((function(e){return function(){N(e)}}),[]),T=(0,j.useCallback)((function(e){return X(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{_({title:"Deleting",message:r("Deleting selected user role, please wait..."),successMessage:r("User role deleted!")},X(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v._c.delete(e);case 2:return r.next=4,P();case 4:case"end":return r.stop()}}),r)}))))}catch(n){}case 1:case"end":return t.stop()}}),t)})))}),[r,_,P]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:t&&(0,n.jsx)(p.z,{color:"green",mt:"lg",leftIcon:(0,n.jsx)(y.R.Plus,{}),onClick:function(){return I(!0)},children:r("Add new")})}),(0,n.jsxs)(f.r,{sx:{minWidth:800},className:(0,g.Z)(e.root,"mt-5 min-h-[400px]"),columns:12,children:[(0,n.jsx)(f.r.Col,{span:2,className:"font-semibold uppercase",children:r("Title")}),(0,n.jsx)(f.r.Col,{span:8,className:"font-semibold uppercase",children:r("Description")}),(0,n.jsx)(f.r.Col,{span:2,children:(0,n.jsx)("span",{className:"hidden",children:r("Tools")})}),(0,n.jsx)(f.r.Col,{span:12,children:(0,n.jsx)(d.i,{size:"sm"})}),(null===k||void 0===k?void 0:k.data)?k.data.map((function(e,r){return(0,n.jsxs)(j.Fragment,{children:[0!==r&&W,(0,n.jsx)(f.r.Col,{span:2,children:e.label}),(0,n.jsx)(f.r.Col,{span:8,children:e.description}),(0,n.jsx)(f.r.Col,{span:2,children:0!==e.id&&(0,n.jsxs)(m.Z,{className:"ml-auto",position:"right",spacing:"xs",noWrap:!0,children:[M&&(0,n.jsx)(b.A,{onClick:D(e.id),color:"blue",children:(0,n.jsx)(y.R.Edit,{})}),U&&(0,n.jsx)(b.A,{onClick:T(e.id),color:"red",children:(0,n.jsx)(y.R.Trash,{})})]})})]},e.id)})):(0,n.jsx)(f.r.Col,{span:12,children:(0,n.jsx)(a.Z,{})})]}),k&&(0,n.jsx)(m.Z,{position:"center",my:"xl",children:(0,n.jsx)(h.t,{className:"my-auto",page:u,onChange:w,total:k.last_page})}),(0,n.jsx)(F,{opened:A||!!C,optionToEdit:C,onClose:function(){P(),N(void 0),I(!1)}})]})},V=t(57704),B=function(){return(0,n.jsx)(V.Gv,{children:(0,n.jsx)(Y,{})})}}},function(e){e.O(0,[568,232,484,673,365,774,888,179],(function(){return r=99962,e(e.s=r);var r}));var r=e.O();_N_E=r}]);