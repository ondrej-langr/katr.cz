(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{40070:function(e,n,t){"use strict";t.d(n,{V:function(){return o}});var r=t(2784);function o({timeout:e=2e3}={}){const[n,t]=(0,r.useState)(null),[o,i]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null);return{copy:n=>{"clipboard"in navigator?navigator.clipboard.writeText(n).then((()=>{return n=!0,clearTimeout(a),l(setTimeout((()=>i(!1)),e)),void i(n);var n})).catch((e=>t(e))):t(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{i(!1),t(null),clearTimeout(a)},error:n,copied:o}}},89519:function(e,n,t){"use strict";t.d(n,{U:function(){return i}});var r=t(2784);function o(e){return n=>{if(n)if("function"===typeof n)e(n);else if("object"===typeof n&&"nativeEvent"in n){const{currentTarget:t}=n;"checkbox"===t.type?e(t.checked):e(t.value)}else e(n);else e(n)}}function i(e){const[n,t]=(0,r.useState)(e);return[n,o(t)]}},22796:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/system",function(){return t(25378)}])},25378:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return le}});var r=t(52322),o=t(94776),i=t.n(o),a=t(31005),l=t(96454),s=t(8168),c=t(25865),u=t(97470),d=t(10107),f=t(70790),p=t(59935),m=t(24917),h=t(74559),v=t(40530),x=t(54339),b=t(85409),j=t(11794),g=t(53610),y=t(41277),w=t(6277),C=t(2784),O=t(52829),S=t(85393),k=t(23384),P=t(58532),A=t(34272),N=t(17335),E=t(76902),T=t(63955),I=t(74062),_=t(23191),z=t(89519);function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function R(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){R(e,n,t[n])}))}return e}function V(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw o}}return i}}(e,n)||M(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,n){if(e){if("string"===typeof e)return D(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?D(e,n):void 0}}var Z=function(){var e=(0,T.Gc)(),n=e.register,t=e.watch,o=e.setValue,i=V((0,z.U)(""),2),a=i[0],l=i[1],s=t("content.data",[]),c=(0,O.$)().t,u=function(e,n){return function(){var t,r=$(s),i=r.findIndex((function(e){return e.id===n})),a="up"===e?i-1:i+1;t=[r[a],r[i]],r[i]=t[0],r[a]=t[1],o("content.data",r)}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(x.X,{shadow:"xs",p:"md",withBorder:!0,children:[(0,r.jsx)(A.o,{value:a,label:c("Add new entry"),placeholder:c("Some text"),icon:(0,r.jsx)(g.R.Plus,{size:20}),onChange:l,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(e.preventDefault(),e.stopPropagation(),function(){if(a){var e=Date.now().toString(36)+Math.random().toString(36).substring(2);o("content.data[".concat((s||[]).length,"]"),{id:e,value:a}),l("")}}())}}),(0,r.jsx)(I.S,{label:c("Items"),mt:"lg",children:(0,r.jsx)(P.M,{cols:1,children:s&&Array.isArray(s)?s.map((function(e,t){return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"mr-1 flex",children:[(0,r.jsx)(b.A,{disabled:0===t,onClick:u("up",e.id),children:(0,r.jsx)(g.R.ChevronUp,{size:18})}),(0,r.jsx)(b.A,{disabled:(s||[]).length-1===t,onClick:u("down",e.id),children:(0,r.jsx)(g.R.ChevronDown,{size:18})})]}),(0,r.jsx)(A.o,U({className:"w-full"},n("content.data[".concat(t,"].value")))),(0,r.jsx)(b.A,{ml:"md",color:"red",onClick:(i=e.id,function(){o("content.data",s.filter((function(e){return e.id!==i})))}),children:(0,r.jsx)(g.R.Trash,{})})]},e.id);var i})):(0,r.jsx)(_.x,{color:"dimmed",children:c("No items for now")})})})]})})};function B(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var L=function(){var e=(0,O.$)().t,n=(0,T.Gc)().register;return(0,r.jsx)(v.g,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){B(e,n,t[n])}))}return e}({autosize:!0,label:e("Value"),minRows:4},n("content.data")))},X=t(64842),F=function(){var e=(0,T.Gc)().control;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(T.Qr,{name:"content.data",control:e,render:function(e){var n=e.field,t=n.onChange,o=n.value;return(0,r.jsx)(X.Z,{label:"Image",onChange:t,selected:o})}})})};function G(e,n,t,r,o,i,a){try{var l=e[i](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,o)}function Q(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){G(i,r,o,a,l,"next",e)}function l(e){G(i,r,o,a,l,"throw",e)}a(void 0)}))}}function W(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){W(e,n,t[n])}))}return e}function K(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var q=function(e){var n=e.opened,t=e.onClose,o=e.optionToEdit,a=(0,s.bN)().currentUserIsAdmin,l=(0,E.c)("settings",o).data,c=(0,O.$)().t,d=(0,u.$)(),f=(0,T.cI)({defaultValues:{}}),p=f.register,h=f.watch,v=f.reset,b=f.control,j=f.handleSubmit,g=f.setValue,w=f.formState;(0,C.useEffect)((function(){o?l&&v(l):v({})}),[l,v,o,n]);var I=h("content"),_=function(){var e=Q(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{d({title:c(o?"Updating option":"Creating option"),message:c("Please wait..."),successMessage:c(o?"Option successfully updated":"Option has been created")},Q(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=6;break}return n.id,r=K(n,["id"]),e.next=4,y.gb.update(o,r);case 4:e.next=8;break;case 6:return e.next=8,y.gb.create(n);case 8:t();case 9:case"end":return e.stop()}}),e)}))))}catch(r){}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(T.RV,H({},f,{children:(0,r.jsx)(S.d,{opened:n,onClose:t,position:"right",size:700,padding:"xl",className:" overflow-auto",title:(0,r.jsx)(k.D,{order:4,children:o?"Update an option":"Create an option"}),children:(0,r.jsxs)("form",{className:"h-full",onSubmit:j(_),children:[(0,r.jsxs)(P.M,{cols:1,spacing:"md",children:[a&&(0,r.jsxs)(x.X,{withBorder:!0,shadow:"lg",mb:"lg",radius:"md",p:"xs",children:[(0,r.jsx)(A.o,H({label:"Slug"},p("name"))),(0,r.jsx)(T.Qr,{name:"content.type",control:b,render:function(e){var n=e.field,t=n.name,o=n.onChange,i=n.onBlur,a=n.value;return(0,r.jsx)(N.Ph,{placeholder:"Select type",name:t,onChange:function(e){o(e),g("content.data",void 0)},onBlur:i,value:a,label:"Select datatype",pt:"md",data:[{value:"list",label:"List"},{value:"textArea",label:"Long text"},{value:"image",label:"Image"}]})}})]}),(0,r.jsx)(A.o,H({label:"Label"},p("label"))),"list"===(null===I||void 0===I?void 0:I.type)&&(0,r.jsx)(Z,{}),"textArea"===(null===I||void 0===I?void 0:I.type)&&(0,r.jsx)(L,{}),"image"===(null===I||void 0===I?void 0:I.type)&&(0,r.jsx)(F,{})]}),(0,r.jsx)("div",{className:"right-0 mt-8 rounded-lg pb-4",children:(0,r.jsx)(m.z,{className:"mr-auto block",type:"submit",loading:w.isSubmitting,loaderPosition:"right",children:c(o?"Save":"Create")})})]})})}))},J=t(51337),Y=t(40070),ee=function(e){var n=e.name,t=(0,Y.V)(),o=(0,O.$)().t;return(0,r.jsx)(J.u,{label:o("Copied!"),gutter:5,placement:"center",position:"bottom",radius:"xl",transition:"slide-down",transitionDuration:150,opened:t.copied,children:(0,r.jsx)(b.A,{color:"blue",onClick:function(){return t.copy(n)},size:20,children:(0,r.jsx)(g.R.Paperclip,{size:20})})})};function ne(e,n,t,r,o,i,a){try{var l=e[i](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,o)}function te(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){ne(i,r,o,a,l,"next",e)}function l(e){ne(i,r,o,a,l,"throw",e)}a(void 0)}))}}var re=(0,d.k)((function(){return{root:{td:{verticalAlign:"baseline"}}}})),oe=(0,r.jsx)(f.r.Col,{span:12,children:(0,r.jsx)(p.i,{})}),ie=function(){var e=re().classes,n=(0,O.$)().t,t=(0,s.bN)().currentUserIsAdmin,o=(0,C.useState)(1),d=o[0],S=o[1],k=(0,c.y)("settings",{page:d}),P=k.data,A=k.mutate,N=(0,C.useState)(),E=N[0],T=N[1],I=(0,C.useState)(!1),_=I[0],z=I[1],D=(0,u.$)(),R=t?6:8,U=(0,C.useCallback)((function(e){return function(){T(e)}}),[]),V=(0,C.useCallback)((function(e){return te(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{D({title:"Deleting",message:n("Deleting selected option, please wait..."),successMessage:n("Option deleted!")},te(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.gb.delete(e);case 2:return n.next=4,A();case 4:case"end":return n.stop()}}),n)}))))}catch(r){}case 1:case"end":return t.stop()}}),t)})))}),[n,D,A]);return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)(m.z,{color:"green",mt:"lg",onClick:function(){return z(!0)},children:n("Add new")}),(0,r.jsxs)(f.r,{sx:{minWidth:800},className:(0,w.Z)(e.root,"mt-5 min-h-[400px]"),columns:12,children:[t&&(0,r.jsx)(f.r.Col,{span:2,className:"font-semibold uppercase",children:n("Slug")}),(0,r.jsx)(f.r.Col,{span:2,className:"font-semibold uppercase",children:n("Title")}),(0,r.jsx)(f.r.Col,{span:R,className:"font-semibold uppercase",children:n("Value")}),(0,r.jsx)(f.r.Col,{span:2,children:(0,r.jsx)("span",{className:"hidden",children:n("Tools")})}),(0,r.jsx)(f.r.Col,{span:12,children:(0,r.jsx)(p.i,{size:"sm"})}),(null===P||void 0===P?void 0:P.data)?P.data.map((function(e,n){var o,i,l,s,c;return(0,r.jsxs)(C.Fragment,{children:[0!==n&&oe,t&&(0,r.jsx)(f.r.Col,{span:2,children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(ee,{name:e.name}),e.name]})}),(0,r.jsx)(f.r.Col,{span:2,children:e.label}),(0,r.jsx)(f.r.Col,{span:R,children:"textArea"===(null===(o=e.content)||void 0===o?void 0:o.type)?(0,r.jsx)(v.g,{autosize:!0,readOnly:!0,value:e.content.data}):"list"===(null===(i=e.content)||void 0===i?void 0:i.type)?(0,r.jsx)(x.X,{sx:function(e){return{borderColor:e.colors.gray[4]}},withBorder:!0,p:"sm",children:(0,r.jsx)("ul",{className:"list-disc pl-5",children:null===(l=e.content)||void 0===l?void 0:l.data.map((function(e){var n=e.id,t=e.value;return(0,r.jsx)("li",{dangerouslySetInnerHTML:{__html:t}},n)}))})}):"image"===(null===(s=e.content)||void 0===s?void 0:s.type)?(0,r.jsx)(a.Z,{className:"h-20 w-auto",imageId:null===(c=e.content)||void 0===c?void 0:c.data}):"none"}),(0,r.jsx)(f.r.Col,{span:2,children:(0,r.jsxs)(h.Z,{className:"ml-auto",position:"right",spacing:"xs",noWrap:!0,children:[(0,r.jsx)(b.A,{onClick:U(e.id),color:"blue",children:(0,r.jsx)(g.R.Edit,{})}),t&&(0,r.jsx)(b.A,{onClick:V(e.id),color:"red",children:(0,r.jsx)(g.R.Trash,{})})]})})]},e.id)})):(0,r.jsx)(f.r.Col,{span:12,children:(0,r.jsx)(l.Z,{})})]}),P&&(0,r.jsx)(h.Z,{position:"center",my:"xl",children:(0,r.jsx)(j.t,{className:"my-auto",page:d,onChange:S,total:P.last_page})}),(0,r.jsx)(q,{opened:_||!!E,optionToEdit:E,onClose:function(){A(),T(void 0),z(!1)}})]})},ae=t(57704),le=function(){return(0,r.jsx)(ae.Gv,{children:(0,r.jsx)(ie,{})})}}},function(e){e.O(0,[568,706,360,682,484,673,589,842,774,888,179],(function(){return n=22796,e(e.s=n);var n}));var n=e.O();_N_E=n}]);