"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{45597:function(e,t,n){n.d(t,{S:function(){return g}});var r=n(52322),i=n(21755),o=n(74559),a=n(23191),l=n(17335),u=n(2784),s=n(40873),c=n.n(s),d=n(52829),f=n(71522);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b={cs:"Czech",en:"English",fr:"Francais",de:"German"},h={en:"gb",cs:"cz"},x=(0,u.forwardRef)((function(e,t){var n,i=e.label,l=e.value,u=p(e,["label","value"]);return(0,r.jsx)("div",v({ref:t},u,{children:(0,r.jsxs)(o.Z,{noWrap:!0,children:[(0,r.jsx)(c(),{width:18,code:null!==(n=h[l])&&void 0!==n?n:l}),(0,r.jsx)("div",{children:(0,r.jsx)(a.x,{size:"sm",children:i})})]})}))})),g=function(e){var t=e.value,n=e.disabled,o=p(e,["value","disabled"]),a=(0,d.$)().t,s=(0,i.r)(),m=(0,u.useMemo)((function(){var e;if(s)return s.i18n.languages.map((function(t){return{label:a(null!==(e=b[t])&&void 0!==e?e:t),value:t}}))}),[s,a]);return(0,r.jsx)(l.Ph,v({data:m||[],label:a("Language"),placeholder:a("Select an option"),shadow:"xl",disabled:!s||n,itemComponent:x,value:t,icon:(0,r.jsx)(c(),{width:18,code:t&&h[t]||t,fallback:(0,r.jsx)(f.Z,{size:18})})},o))}},85333:function(e,t,n){n.d(t,{xN:function(){return ye},Be:function(){return Q},$_:function(){return Pe},fb:function(){return Me},h4:function(){return Ze},NC:function(){return Ge},DQ:function(){return K}});var r=n(52322),i=n(72722),o=n(76902),a=n(25865),l=n(23191),u=n(24774),s=n(24893),c=n(46530),d=n(2784);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b=(0,d.forwardRef)((function(e,t){e.avatar,e.email,e.id;var n=e.name,i=(e.password,e.role),a=(e.state,p(e,["avatar","email","id","name","password","role","state"])),s=(0,o.c)("userroles",i),c=s.data,d=s.isLoading;return(0,r.jsxs)("div",v({ref:t},a,{children:[(0,r.jsx)(l.x,{children:n}),(0,r.jsx)(l.x,{size:"xs",color:"blue",children:!c||d?(0,r.jsx)(u.O,{width:100,height:20}):c.label})]}))})),h=function(e){var t=m({},e),n=(0,a.y)("users",{limit:5,where:v({},t.value&&Number.isNaN(Number(t.value))?{name:{manipulator:"LIKE",value:"%".concat(t.value,"%")}}:{},t.value&&!Number.isNaN(Number(t.value))?{id:{manipulator:"LIKE",value:t.value}}:{})},{isPaused:function(){return!t.value}}).data;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.F,v({label:"User",itemComponent:b,placeholder:(0,c.t)("Start typing to see options"),filter:function(){return!0},nothingFound:t.value?(0,r.jsx)("div",{children:(0,c.t)("Nothing has been found")}):void 0},t,{data:((null===n||void 0===n?void 0:n.data)||[]).map((function(e){return v({},e,{value:String(e.name)})}))}))})},x=n(54557),g=n(81428),y=n(24917),j=n(74559),O=n(30678),w=n(63955),S=n(52829),N=n(78181),P=n(94776),k=n.n(P),C=n(93118),E=n(59377),I=n(41277),Z=n(5632),D=n(30621),_=n(49898),L=n(97470),U=n(71424),A=n(89644),M=n.n(A),V=n(61941),z=n(21755);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(s){return void n(s)}l.done?t(u):Promise.resolve(u).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){$(o,r,i,a,l,"next",e)}function l(e){$(o,r,i,a,l,"throw",e)}a(void 0)}))}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){F(e,t,n[t])}))}return e}function G(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J=(0,d.createContext)({exitView:function(){},currentView:"update",itemIsMissing:!1,itemIsLoading:!0,itemIsError:!1,mutateItem:T(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),onSubmit:T(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),setAsideOpen:function(){},asideOpen:!1,setLanguage:function(){}}),K=function(){return(0,d.useContext)(J)},Q=function(e){var t,n=e.children,i=e.viewType,o=(0,z.r)(),a=(0,d.useState)(null===o||void 0===o||null===(t=o.i18n)||void 0===t?void 0:t.default),l=a[0],u=a[1],s=Y((0,V._)({key:"aside-toggled",defaultValue:!0,deserialize:function(e){return"true"===e}}),2),c=s[0],f=s[1],m=(0,Z.useRouter)().push,v=(0,d.useRef)(null),p=(0,d.useRef)({editorRef:v}),b=(0,C.Z)(),h=(0,S.$)().t,x=(0,E.Z)(l),g=x.data,y=x.isError,j=x.isLoading,O=x.itemIsMissing,N=x.mutate,P=(0,d.useMemo)((function(){return b&&(0,_.j7)(b,"update"===i)}),[b,i]),A=(0,w.cI)({defaultValues:(null===g||void 0===g?void 0:g.data)||{},reValidateMode:"onChange",mode:"onTouched",resolver:P&&(0,D.X)(P)}),R=A.setError,$=(0,L.$)(),F=(0,d.useMemo)((function(){if(g&&"create"===i){g.id;return G(g,["id"])}return g}),[g,i]);(0,d.useEffect)((function(){g&&A.reset(q({},g,g.content?{content:JSON.stringify(g.content)}:{}))}),[g,A]);var K=(0,d.useCallback)(function(){var e=T(k().mark((function e(t){var n,r,o,a,u,s,c,d,f,p,x,y,j,O;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.name,!v.current){e.next=10;break}return e.next=5,null===(r=v.current)||void 0===r?void 0:r.isReady;case 5:return e.t0=JSON,e.next=8,v.current.save();case 8:e.t1=e.sent,t.content=e.t0.stringify.call(e.t0,e.t1);case 10:return e.prev=10,e.next=13,$({title:"update"===i?"Updating":"Creating",message:h("update"===i?"Updating your entry, please wait...":"Creating new entry, please wait..."),successMessage:h("create"===i?"Your entry is created!":"Your entry is updated!")},T(k().mark((function e(){var r,o,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("update"!==i){e.next=9;break}return r=(0,U.d$)(g,t),o=g.id,e.next=5,I.Uq.update({id:o,model:n,language:l},r);case 5:return e.next=7,N((function(e){return(null===e||void 0===e?void 0:e.id)?q({},e||{},r):e}),{revalidate:!0});case 7:e.next=16;break;case 9:if("create"!==i){e.next=16;break}return e.next=12,I.Uq.create({model:n},t);case 12:if(null===(a=e.sent)||void 0===a?void 0:a.data){e.next=15;break}throw new Error("No data has been received");case 15:m(I.Uq.getListUrl(null===b||void 0===b?void 0:b.name));case 16:case"end":return e.stop()}}),e)}))));case 13:e.next=38;break;case 15:if(e.prev=15,e.t2=e.catch(10),!M().isAxiosError(e.t2)||900409!==(null===(o=e.t2.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.code)){e.next=38;break}if(u=e.t2.response.data.data,!Array.isArray(u)||!u.length){e.next=38;break}for(s=!0,c=!1,d=void 0,e.prev=22,f=u[Symbol.iterator]();!(s=(p=f.next()).done);s=!0)x=p.value,j=null===b||void 0===b||null===(y=b.columns)||void 0===y?void 0:y[x],O=x,"slug"===x&&"slug"===(null===j||void 0===j?void 0:j.type)&&(O=j.of),R(O,{message:h("This field is unique and other entry has the same value")});e.next=30;break;case 26:e.prev=26,e.t3=e.catch(22),c=!0,d=e.t3;case 30:e.prev=30,e.prev=31,s||null==f.return||f.return();case 33:if(e.prev=33,!c){e.next=36;break}throw d;case 36:return e.finish(33);case 37:return e.finish(30);case 38:case"end":return e.stop()}}),e,null,[[10,15],[22,26,30,38],[31,,33,37]])})));return function(t){return e.apply(this,arguments)}}(),[b,g,N,m,$,R,h,i,l]),Q=(0,d.useMemo)((function(){return{currentView:i,exitView:function(){m(I.Uq.getListUrl(null===b||void 0===b?void 0:b.name))},itemData:F,itemIsError:y,itemIsLoading:"update"===i&&j,itemIsMissing:O,mutateItem:N,asideOpen:c,setAsideOpen:f,onSubmit:A.handleSubmit(K),language:l,setLanguage:u}}),[c,null===b||void 0===b?void 0:b.name,A,y,j,O,N,K,m,f,F,i,l]);return(0,r.jsx)(w.RV,q({},A,{children:(0,r.jsx)(J.Provider,{value:Q,children:"function"===typeof n?n({formContentRefs:p}):n})}))},X=n(85409),B=n(21818),H=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.O,{width:"100%",height:30}),(0,r.jsx)(u.O,{width:"100%",height:30}),(0,r.jsx)(u.O,{width:"100%",height:30}),(0,r.jsx)(u.O,{width:"100%",height:30})]});function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(){return ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ee.apply(this,arguments)}var te=function(e){var t=e.id,n=e.name,i=e.onItemDelete;return(0,r.jsxs)("div",{className:"flex justify-between rounded-lg bg-gray-50 px-4 py-2",children:[(0,r.jsx)(l.x,{size:"lg",children:n}),(0,r.jsx)(X.A,{color:"red",variant:"light",onClick:function(){return i(t)},children:(0,r.jsx)(B.Z,{width:20,height:20})})]})},ne=function(){var e=(0,w.Gc)(),t=e.watch,n=e.setValue,i=e.getValues,o=t("coeditors"),l=!Object.keys(o||{}).length,u=(0,a.y)("users",{limit:999,where:{id:{manipulator:"IN",value:Object.keys(o||{})}}},{isPaused:function(){return l}}),s=u.data,c=u.isLoading,f=(0,d.useCallback)((function(e){var t="coeditors",r=ee({},i(t));delete r[e],n(t,r)}),[n,i]);return!c||l?(0,r.jsx)(r.Fragment,{children:((null===s||void 0===s?void 0:s.data)||[]).map((function(e){return(0,r.jsx)(te,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}({onItemDelete:f},e),e.id)}))}):H};function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(){var e=K(),t=e.itemData,n=(e.itemIsLoading,(0,x.x)()),o=(0,d.useState)(!1),a=o[0],l=o[1],u=(0,d.useState)(),s=u[0],c=u[1],f=(0,d.useState)(!1),m=f[0],v=f[1],p=(0,w.Gc)(),b=p.setValue,P=p.getValues,k=(0,S.$)().t,C=(0,d.useCallback)((function(e){var t,n=e.id;l(!0);var r=null!==(t=P("coeditors"))&&void 0!==t?t:{};b("coeditors",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){re(e,t,n[t])}))}return e}({},r,re({},String(n),!0))),l(!1),v(!1),c("")}),[P,b]);return(null===n||void 0===n?void 0:n.can({action:"update",targetModel:"userRoles"}))||(null===n||void 0===n?void 0:n.id)===(null===t||void 0===t?void 0:t.created_by)?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Z,{title:k("Coeditors"),description:"Add coeditor and add permission to edit to some user",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-2.5 p-2.5",children:[(0,r.jsx)(ne,{}),(0,r.jsxs)(g.J,{closeOnClickOutside:!1,closeOnEscape:!1,opened:m,onClose:function(){return v(!1)},position:"bottom",placement:"center",withCloseButton:!0,title:k("Select user"),transition:"pop-top-right",className:"w-full",width:400,target:(0,r.jsx)(y.z,{className:"w-full",leftIcon:(0,r.jsx)(N.Z,{className:"h-7 w-7"}),variant:"light",type:"button",onClick:function(){return v((function(e){return!e}))},children:(0,r.jsx)("span",{className:"ml-auto inline-block",children:k("Add coeditor")})}),children:[(0,r.jsx)(h,{disabled:a,value:s,onChange:c,onItemSubmit:C}),(0,r.jsx)(j.Z,{position:"apart",style:{marginTop:15},children:(0,r.jsx)(O.e,{component:"button",color:"gray",size:"sm",disabled:a,onClick:function(){return v(!1)},children:k("Cancel")})})]})]})})}):null},oe=n(45597),ae=function(){var e=(0,S.$)().t,t=K(),n=t.currentView,o=t.language,a=t.setLanguage;return(0,r.jsx)(i.Z,{title:e("Internationalization"),children:(0,r.jsx)("div",{className:"mx-5 mb-5",children:(0,r.jsx)(oe.S,{value:o,onChange:function(e){return e&&a(e)},className:"w-full",shadow:"xl",disabled:"create"===n})})})},le=n(32769);function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ce=function(){var e,t=(0,S.$)().t,n=(0,C.Z)(),o=(0,d.useMemo)((function(){if(n){var e=n.columns,t=(e.title,e.content,se(e,["title","content"]));return(0,le.x)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ue(e,t,n[t])}))}return e}({},n,{columns:t}))}}),[n]);return"post-like"===(null===n||void 0===n||null===(e=n.admin)||void 0===e?void 0:e.layout)&&o&&o.length?(0,r.jsx)(i.Z,{title:t("Other info"),children:(0,r.jsx)("div",{className:"grid gap-5 p-4",children:(0,r.jsx)(le.Z,{fields:o})})}):null},de=n(74531),fe=n(6277),me=n(39097);function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var be=function(e){var t=e.className,n=pe(e,["className"]);return(0,r.jsx)(u.O,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ve(e,t,n[t])}))}return e}({className:(0,fe.Z)("relative top-0.5 inline-block h-4",t)},n))},he=function(e){var t=e.userId,n=(0,S.$)().t,i=(0,de.a)(t,{isPaused:function(){return!t}}),o=i.data,a=i.isLoading,l=(0,x.x)(),u=Number(t)===Number(null===l||void 0===l?void 0:l.id);return!a&&o&&t?(0,r.jsx)(me.default,{href:u?"/settings/profile":I.KD.getUrl(t),children:(0,r.jsx)("a",{className:"font-semibold text-blue-600",children:u?n("Me"):o.name})}):(0,r.jsx)(be,{className:"inline-block"})},xe="D.M. YYYY @ HH:mm",ge=function(){var e=K(),t=e.itemData,n=e.itemIsLoading,o=e.currentView,a=(0,S.$)().t,l=(0,C.Z)();return(null===l||void 0===l?void 0:l.hasTimestamps)||(null===l||void 0===l?void 0:l.ownable)?(0,r.jsx)(i.Z,{className:"!pt-0",title:a("Publish info"),children:"update"===o&&(0,r.jsx)("div",{className:"w-full px-4 py-5",children:(0,r.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[(null===l||void 0===l?void 0:l.hasTimestamps)&&(0,r.jsxs)(r.Fragment,{children:[!!(null===t||void 0===t?void 0:t.updated_at)&&(0,r.jsxs)("li",{children:[a("Updated at:")," ",n?(0,r.jsx)(be,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:(0,U.uD)(t.updated_at).format(xe)})]}),!!(null===t||void 0===t?void 0:t.created_at)&&(0,r.jsxs)("li",{children:[a("Created at:")," ",n?(0,r.jsx)(be,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:(0,U.uD)(t.created_at).format(xe)})]})]}),(null===l||void 0===l?void 0:l.ownable)&&(0,r.jsxs)(r.Fragment,{children:[!!(null===t||void 0===t?void 0:t.updated_by)&&"0"!==String(null===t||void 0===t?void 0:t.updated_by)&&(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"flex-none",children:a("Updated by:")})," ",(0,r.jsx)(he,{userId:null===t||void 0===t?void 0:t.updated_by})]})}),!!(null===t||void 0===t?void 0:t.created_by)&&"0"!==String(null===t||void 0===t?void 0:t.created_by)&&(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"flex-none",children:a("Created by:")})," ",(0,r.jsx)(he,{userId:null===t||void 0===t?void 0:t.created_by})]})})]})]})})}):null},ye=function(){var e=(0,C.Z)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ge,{}),(0,r.jsx)(ae,{}),(0,r.jsx)(ce,{}),e&&e.isSharable&&(0,r.jsx)(ie,{})]})},je=n(52170),Oe=n(54339),we=n(51337),Se=n(92172);function Ne(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(s){return void n(s)}l.done?t(u):Promise.resolve(u).then(r,i)}var Pe=function(){var e=(0,(0,w.Gc)().watch)(),t=(0,S.$)().t,n=K(),i=n.itemData,o=n.currentView,a=n.setAsideOpen,l=n.asideOpen,u=n.exitView,s=(0,C.Z)(),c=(0,x.x)(),f=(0,w.Gc)(),m=f.setValue,v=f.formState,p=(0,d.useMemo)((function(){return"update"!==o||!!Object.keys((0,U.d$)(i||{},e)).length}),[e,o,i]),b=function(){var e,n=(e=k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(t(je.X3.ON_DELETE_REQUEST_PROMPT))){e.next=4;break}return u(),e.next=4,I.Uq.delete({id:null===i||void 0===i?void 0:i.id,model:null===s||void 0===s?void 0:s.name});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ne(o,r,i,a,l,"next",e)}function l(e){Ne(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}(),h=(0,d.useMemo)((function(){var e="";return"create"===o?e=v.isSubmitting?"Publishing":"Publish":"update"===o&&(e=v.isSubmitting?"Updating":"Update"),t(e)}),[o,v.isSubmitting,t]),g=(0,d.useMemo)((function(){var e="";if(!(null===s||void 0===s?void 0:s.isDraftable))return e;if("create"===o)e=v.isSubmitting?"Saving":"Save as concept";else if("update"===o){if(!i)return e;e=i.is_published?"Unpublish":"Publish"}return t(e)}),[o,v.isSubmitting,s,i,t]);return(0,r.jsxs)(Oe.X,{shadow:"lg",component:"footer",className:"align-center container sticky bottom-1 left-0 z-10 mx-auto flex max-h-20 items-center justify-between border-2 border-project-border p-3",children:["update"===o&&s&&(null===c||void 0===c?void 0:c.can({action:"create",targetModel:null===s||void 0===s?void 0:s.name}))?(0,r.jsx)(we.u,{withArrow:!0,label:t("Delete"),position:"top",color:"gray",children:(0,r.jsx)(X.A,{size:"xl",type:"button",loading:v.isSubmitting,onClick:b,color:"red",variant:"light",styles:{root:{width:50,height:50}},className:(0,fe.Z)(v.isSubmitting&&"!cursor-progress"),children:(0,r.jsx)(B.Z,{className:"aspect-square w-10"})})}):(0,r.jsx)("span",{}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(null===s||void 0===s?void 0:s.isDraftable)&&(0,r.jsx)(y.z,{size:"sm",variant:"white",type:"submit",disabled:v.isSubmitting,className:"ml-auto",onClick:function(){m("is_published",!!i&&!i.is_published)},px:"sm",children:g}),(0,r.jsx)(y.z,{size:"lg",color:"green",type:"submit",disabled:!p,loading:v.isSubmitting,onClick:function(){"create"===o&&m("is_published",!0)},children:h}),(0,r.jsx)(we.u,{withArrow:!0,label:t("Toggle more options"),position:"top",color:"gray",children:(0,r.jsx)(X.A,{size:"xl",color:"blue",variant:"light",type:"button",className:(0,fe.Z)(v.isSubmitting&&"!cursor-progress"),styles:{root:{width:50,height:50}},onClick:function(){return a((function(e){return!e}))},children:(0,r.jsx)(Se.Z,{className:(0,fe.Z)("aspect-square w-20 duration-150",l&&"rotate-180")})})})]})]})},ke=n(59935);function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ce(e,t,n[t])}))}return e}var Ie=function(){var e,t,n=K().itemIsLoading,i=(0,w.Gc)(),o=i.register,a=i.formState,l=(0,S.$)().t;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"relative w-full",children:[(0,r.jsx)("input",Ee({className:(0,fe.Z)("w-full !border-b-2 border-project-border bg-transparent pb-5 text-5xl font-bold outline-none duration-200 focus:border-blue-500"),disabled:n,placeholder:l(n?"Loading...":"Title here...")},o("title"))),(null===(e=a.errors)||void 0===e||null===(t=e.title)||void 0===t?void 0:t.message)&&(0,r.jsx)("small",{className:"font-bold text-red-500",children:a.errors.title.message})]})})},Ze=function(){var e,t=K().currentView,n=(0,C.Z)(),i=(0,S.$)().t;return(0,r.jsx)("header",{className:"mr-9 w-full pb-5 xl:mr-0",children:"simple"===(null===n||void 0===n||null===(e=n.admin)||void 0===e?void 0:e.layout)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"mt-0 text-5xl font-bold",children:i("update"==t?"Update an entry":"Create an entry")}),(0,r.jsx)(ke.i,{size:"sm",mt:"lg"})]}):(0,r.jsx)(Ie,{})})};function De(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(s){return void n(s)}l.done?t(u):Promise.resolve(u).then(r,i)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){De(o,r,i,a,l,"next",e)}function l(e){De(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=(0,n(25237).default)(_e(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(837),n.e(9),n.e(604)]).then(n.bind(n,77444));case 2:return e.abrupt("return",e.sent.LazyEditor);case 3:case"end":return e.stop()}}),e)}))),{loadableGenerated:{webpack:function(){return[77444]}},ssr:!1}),Ae=(0,d.forwardRef)((function(e,t){var n=(0,w.Gc)().control,i=(0,S.$)().t,o=(0,d.useCallback)((function(e){return function(){var t=_e(k().mark((function t(n){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=JSON,t.next=4,n.saver.save();case 4:return t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[]);return(0,r.jsx)(w.Qr,{control:n,name:"content",render:function(n){var a,l=n.field,u=l.onChange,s=l.name,c=n.formState.errors;return(0,r.jsx)(Ue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Le(e,t,n[t])}))}return e}({editorRef:t,onChange:o(u),placeholder:i("Start typing here..."),error:null===c||void 0===c||null===(a=c[s])||void 0===a?void 0:a.message,className:"mb-20"},e))}})})),Me=(0,d.forwardRef)((function(e,t){var n,i,o=((null===(n=t)||void 0===n?void 0:n.current)||{}).editorRef,a=K(),l=a.currentView,u=a.itemData,s=(0,w.Gc)().formState,c=(0,C.Z)(),f=(0,d.useMemo)((function(){if(c)return(0,le.x)(c)}),[c]);return f?(0,r.jsxs)("div",{className:"flex min-h-screen flex-col gap-5",children:["simple"===(null===c||void 0===c||null===(i=c.admin)||void 0===i?void 0:i.layout)?f&&(0,r.jsx)(le.Z,{fields:f}):(0,r.jsx)(Ae,{initialValue:null===u||void 0===u?void 0:u.content,autofocus:"update"===l,ref:o}),s.isSubmitting&&(0,r.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]}):null})),Ve=n(62626),ze=n(1571),Re=n(97594);function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$e(e,t,n[t])}))}return e}function Fe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var qe=function(e){var t=e.children,n=K().onSubmit;return(0,r.jsx)("form",{autoComplete:"off",onSubmit:n,className:"flex",children:t})};qe.Content=function(e){var t=e.children,n=(0,C.Z)(),i=K(),o=i.currentView,a=i.itemIsLoading,l=i.itemData,s=(0,S.$)().t;return(0,r.jsxs)("div",{className:"container relative mx-auto mb-10",children:[(0,r.jsx)(ze.Z,{className:"py-5",items:[{content:s("Entry types")},{isLinkTo:I.Uq.getListUrl(null===n||void 0===n?void 0:n.name),content:s((0,Re.fm)((null===n||void 0===n?void 0:n.name)||""))},{content:s("update"==o?"Update":"Create")},{content:a&&"update"===o?(0,r.jsx)(u.O,{className:"h-4 w-16 flex-none"}):(0,r.jsx)("p",{className:"flex-none text-green-500 underline",children:"update"==o?null===l||void 0===l?void 0:l.id:s("Create")})}]}),(0,r.jsx)("div",{className:"mt-10 items-start justify-between xl:flex",children:(0,r.jsx)("div",{className:"relative w-full",children:t})})]})},qe.Aside=function(e){var t=e.children,n=e.className,i=Fe(e,["children","className"]),o=K().asideOpen;return(0,r.jsx)("aside",{className:(0,fe.Z)("sticky top-0 z-10 transition-[width] duration-300",o?"w-[500px]":"h-0 w-0 overflow-hidden"),children:(0,r.jsx)("div",Te({className:(0,fe.Z)("h-full w-[500px] py-5 pl-8",n)},i,{children:t}))})};var Ge=function(e){return function(){var t=(0,C.Z)();return t&&"users"!==t.name?(0,r.jsx)(Q,{viewType:e,children:function(e){var t=e.formContentRefs;return(0,r.jsxs)(qe,{children:[(0,r.jsxs)(qe.Content,{children:[(0,r.jsx)(Ze,{}),(0,r.jsx)(Me,{ref:t}),(0,r.jsx)(Pe,{})]}),(0,r.jsx)(qe.Aside,{open:!0,className:"flex flex-col gap-5",onClose:function(){},children:(0,r.jsx)(ye,{})})]})}}):(0,r.jsx)(Ve.default,{})}}},21755:function(e,t,n){n.d(t,{r:function(){return i}});var r=n(8168),i=function(){return(0,r.bN)().settings}},62626:function(e,t,n){n.r(t);var r=n(52322);t.default=function(e){var t=e.text,n=void 0===t?"Missing":t;return(0,r.jsx)("div",{className:"flex min-h-screen",children:(0,r.jsxs)("div",{className:"m-auto text-center",children:[(0,r.jsx)("h1",{className:"text-6xl font-semibold",children:"404"}),(0,r.jsx)("hr",{className:"mx-auto my-4 w-1/4 border-t-8 border-blue-100"}),(0,r.jsx)("p",{className:"text-xl text-gray-500",children:n})]})})}}}]);