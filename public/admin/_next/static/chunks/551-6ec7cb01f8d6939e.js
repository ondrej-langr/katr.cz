(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[551],{9748:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(2784),i=n(8797);function s(){const e=(0,r.useContext)(i.c);if(!e)throw new Error("@mantine/notifications: NotificationsProvider was not found in tree");return e}},8879:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",s="minute",a="hour",o="day",u="week",c="month",l="quarter",d="year",f="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},b=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},g={s:b,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+b(r,2,"0")+":"+b(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),s=n-i<0,a=t.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",x={};x[y]=v;var w=function(e){return e instanceof S},$=function(e,t,n){var r;if(!e)return y;if("string"==typeof e)x[e]&&(r=e),t&&(x[e]=t,r=e);else{var i=e.name;x[i]=e,r=i}return!n&&r&&(y=r),r||!n&&y},j=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new S(n)},O=g;O.l=$,O.i=w,O.w=function(e,t){return j(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function v(e){this.$L=$(e.locale,null,!0),this.parse(e)}var b=v.prototype;return b.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(O.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(m);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},b.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},b.$utils=function(){return O},b.isValid=function(){return!(this.$d.toString()===h)},b.isSame=function(e,t){var n=j(e);return this.startOf(t)<=n&&n<=this.endOf(t)},b.isAfter=function(e,t){return j(e)<this.startOf(t)},b.isBefore=function(e,t){return this.endOf(t)<j(e)},b.$g=function(e,t,n){return O.u(e)?this[t]:this.set(n,e)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(e,t){var n=this,r=!!O.u(t)||t,l=O.p(e),h=function(e,t){var i=O.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(o)},m=function(e,t){return O.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},p=this.$W,v=this.$M,b=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case d:return r?h(1,0):h(31,11);case c:return r?h(1,v):h(0,v+1);case u:var y=this.$locale().weekStart||0,x=(p<y?p+7:p)-y;return h(r?b-x:b+(6-x),v);case o:case f:return m(g+"Hours",0);case a:return m(g+"Minutes",1);case s:return m(g+"Seconds",2);case i:return m(g+"Milliseconds",3);default:return this.clone()}},b.endOf=function(e){return this.startOf(e,!1)},b.$set=function(e,t){var n,u=O.p(e),l="set"+(this.$u?"UTC":""),h=(n={},n[o]=l+"Date",n[f]=l+"Date",n[c]=l+"Month",n[d]=l+"FullYear",n[a]=l+"Hours",n[s]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],m=u===o?this.$D+(t-this.$W):t;if(u===c||u===d){var p=this.clone().set(f,1);p.$d[h](m),p.init(),this.$d=p.set(f,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},b.set=function(e,t){return this.clone().$set(e,t)},b.get=function(e){return this[O.p(e)]()},b.add=function(r,l){var f,h=this;r=Number(r);var m=O.p(l),p=function(e){var t=j(h);return O.w(t.date(t.date()+Math.round(e*r)),h)};if(m===c)return this.set(c,this.$M+r);if(m===d)return this.set(d,this.$y+r);if(m===o)return p(1);if(m===u)return p(7);var v=(f={},f[s]=t,f[a]=n,f[i]=e,f)[m]||1,b=this.$d.getTime()+r*v;return O.w(b,this)},b.subtract=function(e,t){return this.add(-1*e,t)},b.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=O.z(this),s=this.$H,a=this.$m,o=this.$M,u=n.weekdays,c=n.months,l=function(e,n,i,s){return e&&(e[n]||e(t,r))||i[n].substr(0,s)},d=function(e){return O.s(s%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:O.s(o+1,2,"0"),MMM:l(n.monthsShort,o,c,3),MMMM:l(c,o),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,u,2),ddd:l(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(s),HH:O.s(s,2,"0"),h:d(1),hh:d(2),a:f(s,a,!0),A:f(s,a,!1),m:String(a),mm:O.s(a,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(e,t){return t||m[e]||i.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(r,f,h){var m,p=O.p(f),v=j(r),b=(v.utcOffset()-this.utcOffset())*t,g=this-v,y=O.m(this,v);return y=(m={},m[d]=y/12,m[c]=y,m[l]=y/3,m[u]=(g-b)/6048e5,m[o]=(g-b)/864e5,m[a]=g/n,m[s]=g/t,m[i]=g/e,m)[p]||g,h?y:O.a(y)},b.daysInMonth=function(){return this.endOf(c).$D},b.$locale=function(){return x[this.$L]},b.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=$(e,t,!0);return r&&(n.$L=r),n},b.clone=function(){return O.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},v}(),D=S.prototype;return j.prototype=D,[["$ms",r],["$s",i],["$m",s],["$H",a],["$W",o],["$M",c],["$y",d],["$D",f]].forEach((function(e){D[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),j.extend=function(e,t){return e.$i||(e(t,S,j),e.$i=!0),j},j.locale=$,j.isDayjs=w,j.unix=function(e){return j(1e3*e)},j.en=x[y],j.Ls=x,j.p={},j}()},9551:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var r=n(2322),i=n(6479),s=n(8326),a=n(2507),o=n(5632),u=n(2784);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}var d=(0,u.createContext)({view:"create",isLoading:!0,exitView:function(){}}),f=function(){return(0,u.useContext)(d)},h=n(621),m=n(2577),p=n(3955),v=n(8425),b=function(){var e=f().model,t=(0,p.Gc)().formState,n=(0,u.useMemo)((function(){if(e)return(0,v.x)(e)}),[e]);return(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsx)(v.Z,{fields:n}),t.isSubmitting&&(0,r.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]})},g=n(2829),y=function(){var e=f().view,t=(0,g.$)().t;return(0,r.jsx)("header",{className:"mr-9 w-full border-b-2 border-project-border pb-5 xl:mr-0",children:(0,r.jsx)("h1",{className:"text-5xl font-bold",children:t("update"==e?"Update an entry":"Create an entry")})})},x=n(7572),w=n(8740),$=n(4193),j=n(2021),O=n.n(j),S=n(9486),D=n(1922),M=n(7962),N=n(1519),_=n(6277),C=n(8879),k=n.n(C),P=n(9117),T=n(7095),L=n(6643);function Y(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var A=function(e){var t=e.className,n=U(e,["className"]);return(0,r.jsx)($.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}({className:(0,_.Z)("relative top-0.5 inline-block h-4",t)},n))},H="D.M. YYYY @ HH:mm",Z=function(){var e,t=f(),n=t.isLoading,i=t.view,s=t.user,o=t.exitView,c=t.model,l=(0,p.Gc)(),d=l.watch,h=l.formState.isSubmitting,m=d(),v=(0,L.o)(),b=(0,g.$)().t,y=(0,u.useMemo)((function(){return"update"!==i||!!Object.keys((0,T.d$)(s||{},m)).length}),[m,i,s]),x=(e=O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(b(P.X3.ON_DELETE_REQUEST_PROMPT))){e.next=4;break}return o(),e.next=4,a.Uq.delete({id:null===s||void 0===s?void 0:s.id,model:"users"});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){Y(s,r,i,a,o,"next",e)}function o(e){Y(s,r,i,a,o,"throw",e)}a(void 0)}))});return(0,r.jsx)("aside",{className:(0,_.Z)(v.aside,"sticky top-0"),children:(0,r.jsxs)(S.Z,{className:"!pt-0",title:"Apply changes",children:["update"===i&&(0,r.jsx)("div",{className:(0,_.Z)("w-full bg-white py-5 px-4",!(null===s||void 0===s?void 0:s.updated_at)&&!(null===s||void 0===s?void 0:s.created_at)&&"hidden"),children:(null===c||void 0===c?void 0:c.hasTimestamps)&&(0,r.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[!!(null===s||void 0===s?void 0:s.updated_at)&&(0,r.jsxs)("li",{children:[b("Updated at:")," ",n?(0,r.jsx)(A,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:k()(null===s||void 0===s?void 0:s.updated_at).format(H)})]}),!!(null===s||void 0===s?void 0:s.created_at)&&(0,r.jsxs)("li",{children:[b("Created at:")," ",n?(0,r.jsx)(A,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:k()(null===s||void 0===s?void 0:s.created_at).format(H)})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-5 border-t-2 border-project-border px-4 py-4",children:["update"===i?(0,r.jsxs)(D.z,{size:"large",type:"button",disabled:h,onClick:x,className:(0,_.Z)(h&&"!cursor-progress","!pl-0 text-sm text-red-500"),children:[(0,r.jsx)(M.XHJ,{className:"mr-3 -mt-1 inline w-5"}),b("Delete")]}):(0,r.jsx)("span",{}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-end gap-5",children:[h&&(0,r.jsxs)("p",{className:"animate-pulse text-lg font-semibold text-orange-500",children:[(0,r.jsx)(N.RefreshIcon,{className:"mr-1.5 inline w-5 animate-spin"}),b("Saving...")]}),(0,r.jsx)(D.z,{size:"large",color:"success",type:"submit",disabled:h||!y,className:(0,_.Z)(h&&"!cursor-progress"),children:b("Ulo\u017eit")})]})]})]})})},I=n(9748);function z(e,t,n,r,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(r,i)}var V=function(){var e,t=(0,o.useRouter)().push,n=f(),r=n.view,i=n.user,s=(0,I.z)(),u=(0,g.$)().t;return e=O().mark((function e(n){var o,c;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.showNotification({loading:!0,title:"update"===r?"Updating":"Creating",message:u("update"===r?"Updating user data, please wait":"Creating new user, please wait"),autoClose:!1,disallowClose:!0}),"update"!==r){e.next=8;break}return e.next=4,a.KD.update(null===i||void 0===i?void 0:i.id,(0,T.d$)(i,n)).catch((function(){s.updateNotification(o,{message:u("An error happened"),autoClose:2e3})}));case 4:e.sent,s.updateNotification(o,{message:u("User data has been updated!"),autoClose:2e3}),e.next=13;break;case 8:if("create"!==r){e.next=13;break}return e.next=11,a.KD.create((0,T.d$)(i||{},n)).catch((function(){s.updateNotification(o,{message:u("An error happened"),autoClose:2e3})}));case 11:(null===(c=e.sent)||void 0===c?void 0:c.data)&&(t(a.KD.getListUrl()),s.updateNotification(o,{message:u("New user has been created!"),autoClose:2e3}));case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){z(s,r,i,a,o,"next",e)}function o(e){z(s,r,i,a,o,"throw",e)}a(void 0)}))}};function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var R=function(e){var t=e.children,n=(0,p.Gc)().handleSubmit,i=V();return(0,r.jsx)("form",{onSubmit:n(i),autoComplete:"off",children:t})},F={Context:d,ContextProvider:function(e){var t=e.view,n=e.children,u=(0,o.useRouter)(),c=u.query,f=u.push,h=(0,i.S)("users"),m=(0,s.a)(c.userId);return(0,r.jsx)(d.Provider,{value:l({view:t},m.data?{user:m.data}:{},{isLoading:m.isLoading||m.isError,exitView:function(){return f(a.KD.getListUrl())},model:h}),children:n})},useData:f,Content:function(){var e,t=f(),n=t.user,i=t.model,s=t.isLoading,a=t.view,o=(0,g.$)().t,c=(0,p.cI)({defaultValues:n||{},reValidateMode:"onBlur",mode:"onTouched",resolver:m.J&&(0,h.X)(m.J)}),l=c.reset;return(0,u.useEffect)((function(){n&&l(n)}),[n,l]),(0,r.jsx)(p.RV,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}({},c,{children:(0,r.jsxs)(R,{children:[(0,r.jsx)(w.Z,{className:"py-5",items:[{content:(0,x.fm)((null===i||void 0===i?void 0:i.tableName)||""),isLinkTo:"/".concat(null===i||void 0===i||null===(e=i.tableName)||void 0===e?void 0:e.toLowerCase())},{content:o("update"==a?"Update":"Create")}].concat(J("update"===a?[{content:s?(0,r.jsx)($.Z,{className:"h-4 w-16"}):(0,r.jsx)("p",{className:"text-green-500 underline",children:"update"==a?null===n||void 0===n?void 0:n.id:"Create"})}]:[]))}),(0,r.jsxs)("div",{className:"mt-10 items-start justify-between xl:flex",children:[(0,r.jsxs)("div",{className:"relative -mx-3 grid w-full max-w-4xl gap-5 px-3",children:[(0,r.jsx)(y,{}),(0,r.jsx)(b,{})]}),(0,r.jsx)(Z,{})]})]})}))}}}}]);