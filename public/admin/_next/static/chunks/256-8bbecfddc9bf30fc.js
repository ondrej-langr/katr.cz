"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{52885:function(e,t,n){n.d(t,{VY:function(){return se},Be:function(){return x},DQ:function(){return b}});var r=n(94776),i=n.n(r),a=n(52322),o=n(2784),s=n(63955),u=n(93118),l=n(59377),c=n(33965),d=n(5632);function f(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function m(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p,v=(0,o.createContext)({exitView:function(){},currentView:"update",itemIsMissing:!1,itemIsLoading:!0,itemIsError:!1,mutateItem:(p=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=p.apply(e,t);function a(e){f(i,n,r,a,o,"next",e)}function o(e){f(i,n,r,a,o,"throw",e)}a(void 0)}))})}),b=function(){return(0,o.useContext)(v)},x=function(e){var t=e.children,n=e.viewType,r=(0,d.useRouter)().push,i=(0,u.Z)(),s=(0,l.Z)(),f=s.data,p=s.isError,b=s.isLoading,x=s.itemIsMissing,h=s.mutate,g=(0,o.useMemo)((function(){if(f&&"create"===n){f.id;return m(f,["id"])}return f}),[f,n]);return(0,a.jsx)(v.Provider,{value:{currentView:n,exitView:function(){r(c.Uq.getListUrl(null===i||void 0===i?void 0:i.name))},itemData:g,itemIsError:p,itemIsLoading:b,itemIsMissing:x,mutateItem:h},children:t})},h=n(33972),g=n(25237),y=n(52829);function j(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){j(a,r,i,o,s,"next",e)}function s(e){j(a,r,i,o,s,"throw",e)}o(void 0)}))}}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=(0,g.default)(w(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(837),n.e(805),n.e(1),n.e(508),n.e(668)]).then(n.bind(n,51668));case 2:return e.abrupt("return",e.sent.LazyEditor);case 3:case"end":return e.stop()}}),e)}))),{loadableGenerated:{webpack:function(){return[51668]}},ssr:!1}),k=(0,o.forwardRef)((function(e,t){var n=(0,s.Gc)().control,r=(0,y.$)().t,u=(0,o.useCallback)((function(e){return function(){var t=w(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=JSON,t.next=4,n.saver.save();case 4:return t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[]);return(0,a.jsx)(s.Qr,{control:n,name:"content",render:function(n){var i,o=n.field,s=o.onChange,l=o.name,c=n.formState.errors;return(0,a.jsx)(N,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){O(e,t,n[t])}))}return e}({editorRef:t,onChange:u(s),placeholder:r("Start typing here..."),error:null===c||void 0===c||null===(i=c[l])||void 0===i?void 0:i.message},e))}})})),P=(0,o.forwardRef)((function(e,t){var n,r=(t.current||{}).editorRef,i=b(),l=i.currentView,c=i.itemData,d=(0,s.Gc)().formState,f=(0,u.Z)(),m=(0,o.useMemo)((function(){if(f)return(0,h.x)(f)}),[f]);return m?(0,a.jsxs)(a.Fragment,{children:["simple"===(null===f||void 0===f||null===(n=f.admin)||void 0===n?void 0:n.layout)?m&&(0,a.jsx)(h.Z,{fields:m}):(0,a.jsx)(k,{initialValue:null===c||void 0===c?void 0:c.content,autofocus:"update"===l,ref:r}),d.isSubmitting&&(0,a.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]}):null})),S=n(59935),E=n(6277);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}var U=function(){var e,t,n=(0,s.Gc)(),r=n.register,i=n.formState,o=(0,y.$)().t;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("input",Z({className:(0,E.Z)("w-full !border-b-2 border-project-border bg-transparent pb-5 text-5xl font-bold outline-none duration-200 focus:border-blue-500"),placeholder:o("Enter your title here...")},r("title"))),(null===(e=i.errors)||void 0===e||null===(t=e.title)||void 0===t?void 0:t.message)&&(0,a.jsx)("small",{className:"font-bold text-red-500",children:i.errors.title.message})]})})},_=function(){var e,t=b().currentView,n=(0,u.Z)(),r=(0,y.$)().t;return(0,a.jsx)("header",{className:"mr-9 w-full pb-5 xl:mr-0",children:"simple"===(null===n||void 0===n||null===(e=n.admin)||void 0===e?void 0:e.layout)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"mt-0 text-5xl font-bold",children:r("update"==t?"Update an entry":"Create an entry")}),(0,a.jsx)(S.i,{size:"sm",mt:"lg"})]}):(0,a.jsx)(U,{})})},V=n(30621),I=n(49898),M=n(72722),R=n(89673),D=n(28879),L=n.n(D),T=n(52170),q=n(5386),z=n(35817),$=n(53610),Y=n(74559),A=n(85409),G=n(24917);function F(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Q(e,t,n[t])}))}return e}function J(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var X=function(e){var t=e.className,n=J(e,["className"]);return(0,a.jsx)(R.Z,H({className:(0,E.Z)("relative top-0.5 inline-block h-4",t)},n))},B="D.M. YYYY @ HH:mm",K=function(e){var t,n=e.isSubmitting,r=b(),l=r.itemData,d=r.itemIsLoading,f=r.currentView,m=r.exitView,p=(0,u.Z)(),v=(0,s.Gc)(),x=v.watch,g=v.setValue,j=x(),w=(0,z.o)(),O=(0,y.$)().t,N=(0,o.useMemo)((function(){return"update"!==f||!!Object.keys((0,q.d$)(l||{},j)).length}),[j,f,l]),k=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){F(a,r,i,o,s,"next",e)}function s(e){F(a,r,i,o,s,"throw",e)}o(void 0)}))}}(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(O(T.X3.ON_DELETE_REQUEST_PROMPT))){e.next=4;break}return m(),e.next=4,c.Uq.delete({id:null===l||void 0===l?void 0:l.id,model:null===p||void 0===p?void 0:p.name});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=(0,o.useMemo)((function(){if(p){var e=p.columns,t=(e.title,e.content,J(e,["title","content"]));return(0,h.x)(H({},p,{columns:t}))}}),[p]),S=(0,o.useMemo)((function(){var e="";return"create"===f?e=n?"Publishing":"Publish":"update"===f&&(e=n?"Updating":"Update"),O(e)}),[f,n,O]),C=(0,o.useMemo)((function(){var e="";if(!(null===p||void 0===p?void 0:p.isDraftable))return e;if("create"===f)e=n?"Saving":"Save as concept";else if("update"===f){if(!l)return e;e=l.is_published?"Unpublish":"Publish"}return O(e)}),[f,n,p,l,O]);return(0,a.jsxs)("aside",{className:(0,E.Z)(w.aside,"sticky top-0 pr-5"),children:[(0,a.jsxs)(M.Z,{className:"!pt-0",title:"Publish",children:["update"===f&&(0,a.jsx)("div",{className:(0,E.Z)("w-full bg-white",((null===l||void 0===l?void 0:l.updated_at)||(null===l||void 0===l?void 0:l.created_at))&&"px-4 py-5"),children:(null===p||void 0===p?void 0:p.hasTimestamps)&&(0,a.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[!!(null===l||void 0===l?void 0:l.updated_at)&&(0,a.jsxs)("li",{children:[O("Updated at:")," ",d?(0,a.jsx)(X,{className:"w-full max-w-[6rem]"}):(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:L()(null===l||void 0===l?void 0:l.updated_at).format(B)})]}),!!(null===l||void 0===l?void 0:l.created_at)&&(0,a.jsxs)("li",{children:[O("Created at:")," ",d?(0,a.jsx)(X,{className:"w-full max-w-[6rem]"}):(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:L()(null===l||void 0===l?void 0:l.created_at).format(B)})]})]})}),(0,a.jsxs)(Y.Z,{sx:function(e){return{borderTop:"2px solid ".concat(e.colors.gray[2])}},position:"apart",className:"items-center gap-5 px-4 py-4",children:["update"===f?(0,a.jsx)(A.A,{size:"lg",type:"button",loading:n,onClick:k,color:"red",variant:"light",className:(0,E.Z)(n&&"!cursor-progress","text-sm text-red-500"),children:(0,a.jsx)($.R.Trash,{className:"aspect-square w-5"})}):(0,a.jsx)("span",{}),(null===p||void 0===p?void 0:p.isDraftable)&&(0,a.jsx)(G.z,{size:"sm",variant:"white",type:"submit",disabled:n,className:"ml-auto",onClick:function(){g("is_published",!!l&&!l.is_published)},px:"sm",children:C}),(0,a.jsx)(G.z,{size:"lg",color:"green",type:"submit",disabled:!N,loading:n,onClick:function(){"create"===f&&g("is_published",!0)},children:S})]})]}),"post-like"===(null===p||void 0===p||null===(t=p.admin)||void 0===t?void 0:t.layout)&&P&&P.length&&(0,a.jsx)(M.Z,{title:"Other info",className:"mt-10",children:(0,a.jsx)("div",{className:"grid gap-5 p-4",children:(0,a.jsx)(h.Z,{fields:P})})})]})},W=n(1571),ee=n(18362),te=n(59748),ne=n(89644),re=n.n(ne);function ie(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ae(e,t,n[t])}))}return e}var se=function(){var e=b(),t=e.currentView,n=e.itemData,r=e.itemIsLoading,l=e.mutateItem,f=(0,o.useRef)(null),m=(0,o.useRef)({editorRef:f}),p=(0,te.z)(),v=(0,u.Z)(),x=(0,d.useRouter)().push,h=(0,y.$)().t,g=(0,o.useMemo)((function(){return v&&(0,I.j7)(v,"update"===t)}),[v,t]),j=(0,s.cI)({defaultValues:(null===n||void 0===n?void 0:n.data)||{},reValidateMode:"onChange",mode:"onTouched",resolver:g&&(0,V.X)(g)}),w=j.setError;(0,o.useEffect)((function(){return n&&j.reset(n)}),[n,j]);var O=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ie(a,r,i,o,s,"next",e)}function s(e){ie(a,r,i,o,s,"throw",e)}o(void 0)}))}}(i().mark((function e(r){var a,o,s,u,d,m,b,g,y,j,O,N,k,P,S;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=v.name,o=p.showNotification({id:"update"===t?"on-update-entry":"on-create-entry",loading:!0,title:"update"===t?"Updating":"Creating",message:h("update"===t?"Updating your entry, please wait...":"Creating new entry, please wait..."),autoClose:!1,disallowClose:!0}),!f.current){e.next=11;break}return e.next=6,null===(s=f.current)||void 0===s?void 0:s.isReady;case 6:return e.t0=JSON,e.next=9,f.current.save();case 9:e.t1=e.sent,r.content=e.t0.stringify.call(e.t0,e.t1);case 11:if(e.prev=11,"update"!==t){e.next=22;break}return u=(0,q.d$)(n,r),d=n.id,e.next=17,c.Uq.update({id:d,model:a},u);case 17:return e.next=19,l((function(e){return(null===e||void 0===e?void 0:e.id)?oe({},e||{},{finalValues:u}):e}));case 19:p.updateNotification(o,{message:h("Your entry is updated!"),autoClose:2e3}),e.next=29;break;case 22:if("create"!==t){e.next=29;break}return e.next=25,c.Uq.create({model:a},r);case 25:if(null===(m=e.sent)||void 0===m?void 0:m.data){e.next=28;break}throw new Error("No data has been received");case 28:x(c.Uq.getListUrl(null===v||void 0===v?void 0:v.name));case 29:e.next=55;break;case 31:if(e.prev=31,e.t2=e.catch(11),!re().isAxiosError(e.t2)||23e3!==(null===(b=e.t2.response)||void 0===b||null===(g=b.data)||void 0===g?void 0:g.code)){e.next=54;break}if(y=e.t2.response.data.data,!Array.isArray(y)||!y.length){e.next=54;break}for(j=!0,O=!1,N=void 0,e.prev=38,k=y[Symbol.iterator]();!(j=(P=k.next()).done);j=!0)S=P.value,w(S,{message:h("This field is unique and other entry has the same value")});e.next=46;break;case 42:e.prev=42,e.t3=e.catch(38),O=!0,N=e.t3;case 46:e.prev=46,e.prev=47,j||null==k.return||k.return();case 49:if(e.prev=49,!O){e.next=52;break}throw N;case 52:return e.finish(49);case 53:return e.finish(46);case 54:p.updateNotification(o,{color:"red",message:h("An error happened"),autoClose:2e3});case 55:case"end":return e.stop()}}),e,null,[[11,31],[38,42,46,54],[47,,49,53]])})));return function(t){return e.apply(this,arguments)}}();return(0,a.jsx)(s.RV,oe({},j,{children:(0,a.jsxs)("form",{onSubmit:j.handleSubmit(O),autoComplete:"off",children:[(0,a.jsx)(W.Z,{className:"py-5",items:[{content:h("Entry types")},{isLinkTo:c.Uq.getListUrl(null===v||void 0===v?void 0:v.name),content:h((0,ee.fm)((null===v||void 0===v?void 0:v.name)||""))},{content:h("update"==t?"Update":"Create")},{content:r?(0,a.jsx)(R.Z,{className:"h-4 w-16 flex-none"}):(0,a.jsx)("p",{className:"flex-none text-green-500 underline",children:"update"==t?null===n||void 0===n?void 0:n.id:h("Create")})}]}),(0,a.jsxs)("div",{className:"mt-10 items-start justify-between xl:flex",children:[(0,a.jsxs)("div",{className:"relative -mx-3 grid w-full max-w-4xl gap-5 px-3",children:[(0,a.jsx)(_,{}),(0,a.jsx)(P,{ref:m})]}),(0,a.jsx)(K,{isSubmitting:j.formState.isSubmitting})]})]})}))}},62626:function(e,t,n){n.r(t);var r=n(52322);t.default=function(e){var t=e.text,n=void 0===t?"Missing":t;return(0,r.jsx)("div",{className:"flex min-h-screen",children:(0,r.jsxs)("div",{className:"text-center m-auto",children:[(0,r.jsx)("h1",{className:"font-semibold text-6xl",children:"404"}),(0,r.jsx)("hr",{className:"border-t-8 w-1/4 mx-auto my-4 border-blue-100"}),(0,r.jsx)("p",{className:"text-gray-500 text-xl",children:n})]})})}}}]);