"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{52885:function(e,t,r){r.d(t,{VY:function(){return ue},Be:function(){return b},DQ:function(){return x}});var n=r(94776),i=r.n(n),a=r(52322),o=r(2784),s=r(63955),u=r(93118),l=r(59377),c=r(33965),d=r(5632);function f(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void r(l)}s.done?t(u):Promise.resolve(u).then(n,i)}function m(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var v,p=(0,o.createContext)({exitView:function(){},currentView:"update",itemIsMissing:!1,itemIsLoading:!0,itemIsError:!1,mutateItem:(v=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var i=v.apply(e,t);function a(e){f(i,r,n,a,o,"next",e)}function o(e){f(i,r,n,a,o,"throw",e)}a(void 0)}))})}),x=function(){return(0,o.useContext)(p)},b=function(e){var t=e.children,r=e.viewType,n=(0,d.useRouter)().push,i=(0,u.Z)(),s=(0,l.Z)(),f=s.data,v=s.isError,x=s.isLoading,b=s.itemIsMissing,h=s.mutate,y=(0,o.useMemo)((function(){if(f&&"create"===r){f.id;return m(f,["id"])}return f}),[f,r]);return(0,a.jsx)(p.Provider,{value:{currentView:r,exitView:function(){n(c.Uq.getListUrl(null===i||void 0===i?void 0:i.name))},itemData:y,itemIsError:v,itemIsLoading:x,itemIsMissing:b,mutateItem:h},children:t})},h=r(33972),y=r(25237),g=r(52829);function j(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void r(l)}s.done?t(u):Promise.resolve(u).then(n,i)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){j(a,n,i,o,s,"next",e)}function s(e){j(a,n,i,o,s,"throw",e)}o(void 0)}))}}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=(0,y.default)(w(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(837),r.e(805),r.e(1),r.e(508),r.e(668)]).then(r.bind(r,51668));case 2:return e.abrupt("return",e.sent.LazyEditor);case 3:case"end":return e.stop()}}),e)}))),{loadableGenerated:{webpack:function(){return[51668]}},ssr:!1}),k=(0,o.forwardRef)((function(e,t){var r=(0,s.Gc)().control,n=(0,g.$)().t,u=(0,o.useCallback)((function(e){return function(){var t=w(i().mark((function t(r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=JSON,t.next=4,r.saver.save();case 4:return t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[]);return(0,a.jsx)(s.Qr,{control:r,name:"content",render:function(r){var i,o=r.field,s=o.onChange,l=o.name,c=r.formState.errors;return(0,a.jsx)(N,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){O(e,t,r[t])}))}return e}({editorRef:t,onChange:u(s),placeholder:n("Start typing here..."),error:null===c||void 0===c||null===(i=c[l])||void 0===i?void 0:i.message},e))}})})),P=(0,o.forwardRef)((function(e,t){var r,n=(t.current||{}).editorRef,i=x(),l=i.currentView,c=i.itemData,d=(0,s.Gc)().formState,f=(0,u.Z)(),m=(0,o.useMemo)((function(){if(f)return(0,h.x)(f)}),[f]);return m?(0,a.jsxs)(a.Fragment,{children:["simple"===(null===f||void 0===f||null===(r=f.admin)||void 0===r?void 0:r.layout)?m&&(0,a.jsx)(h.Z,{fields:m}):(0,a.jsx)(k,{initialValue:null===c||void 0===c?void 0:c.content,autofocus:"update"===l,ref:n}),d.isSubmitting&&(0,a.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]}):null})),S=r(59935),E=r(6277);function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Z(e,t,r[t])}))}return e}var U=function(){var e,t,r=(0,s.Gc)(),n=r.register,i=r.formState,o=(0,g.$)().t;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("input",C({className:(0,E.Z)("w-full !border-b-2 border-project-border bg-transparent pb-5 text-5xl font-bold outline-none duration-200 focus:border-blue-500"),placeholder:o("Enter your title here...")},n("title"))),(null===(e=i.errors)||void 0===e||null===(t=e.title)||void 0===t?void 0:t.message)&&(0,a.jsx)("small",{className:"font-bold text-red-500",children:i.errors.title.message})]})})},_=function(){var e,t=x().currentView,r=(0,u.Z)(),n=(0,g.$)().t;return(0,a.jsx)("header",{className:"mr-9 w-full pb-5 xl:mr-0",children:"simple"===(null===r||void 0===r||null===(e=r.admin)||void 0===e?void 0:e.layout)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"mt-0 text-5xl font-bold",children:n("update"==t?"Update an entry":"Create an entry")}),(0,a.jsx)(S.i,{size:"sm",mt:"lg"})]}):(0,a.jsx)(U,{})})},V=r(30621),I=r(49898),M=r(72722),R=r(89673),D=r(28879),L=r.n(D),T=r(52170),q=r(5386),$=r(35817),z=r(53610),Y=r(74559),G=r(85409),A=r(24917);function F(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void r(l)}s.done?t(u):Promise.resolve(u).then(n,i)}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Q(e,t,r[t])}))}return e}function J(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var X=function(e){var t=e.className,r=J(e,["className"]);return(0,a.jsx)(R.Z,H({className:(0,E.Z)("relative top-0.5 inline-block h-4",t)},r))},B="D.M. YYYY @ HH:mm",K=function(e){var t,r=e.isSubmitting,n=x(),l=n.itemData,d=n.itemIsLoading,f=n.currentView,m=n.exitView,v=(0,u.Z)(),p=(0,s.Gc)(),b=p.watch,y=p.setValue,j=b(),w=(0,$.o)(),O=(0,g.$)().t,N=(0,o.useMemo)((function(){return"update"!==f||!!Object.keys((0,q.d$)(l||{},j)).length}),[j,f,l]),k=function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){F(a,n,i,o,s,"next",e)}function s(e){F(a,n,i,o,s,"throw",e)}o(void 0)}))}}(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(O(T.X3.ON_DELETE_REQUEST_PROMPT))){e.next=4;break}return m(),e.next=4,c.Uq.delete({id:null===l||void 0===l?void 0:l.id,model:null===v||void 0===v?void 0:v.name});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=(0,o.useMemo)((function(){if(v){var e=v.columns,t=(e.title,e.content,J(e,["title","content"]));return(0,h.x)(H({},v,{columns:t}))}}),[v]),S=(0,o.useMemo)((function(){var e="";return"create"===f?e=r?"Publishing":"Publish":"update"===f&&(e=r?"Updating":"Update"),O(e)}),[f,r,O]),Z=(0,o.useMemo)((function(){var e="";if(!(null===v||void 0===v?void 0:v.isDraftable))return e;if("create"===f)e=r?"Saving":"Save as concept";else if("update"===f){if(!l)return e;e=l.is_published?"Unpublish":"Publish"}return O(e)}),[f,r,v,l,O]);return(0,a.jsxs)("aside",{className:(0,E.Z)(w.aside,"sticky top-0 pr-5"),children:[(0,a.jsxs)(M.Z,{className:"!pt-0",title:"Publish",children:["update"===f&&(0,a.jsx)("div",{className:(0,E.Z)("w-full bg-white",((null===l||void 0===l?void 0:l.updated_at)||(null===l||void 0===l?void 0:l.created_at))&&"px-4 py-5"),children:(null===v||void 0===v?void 0:v.hasTimestamps)&&(0,a.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[!!(null===l||void 0===l?void 0:l.updated_at)&&(0,a.jsxs)("li",{children:[O("Updated at:")," ",d?(0,a.jsx)(X,{className:"w-full max-w-[6rem]"}):(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:L()(null===l||void 0===l?void 0:l.updated_at).format(B)})]}),!!(null===l||void 0===l?void 0:l.created_at)&&(0,a.jsxs)("li",{children:[O("Created at:")," ",d?(0,a.jsx)(X,{className:"w-full max-w-[6rem]"}):(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:L()(null===l||void 0===l?void 0:l.created_at).format(B)})]})]})}),(0,a.jsxs)(Y.Z,{sx:function(e){return{borderTop:"2px solid ".concat(e.colors.gray[2])}},position:"apart",className:"items-center gap-5 px-4 py-4",children:["update"===f?(0,a.jsx)(G.A,{size:"lg",type:"button",loading:r,onClick:k,color:"red",variant:"light",className:(0,E.Z)(r&&"!cursor-progress","text-sm text-red-500"),children:(0,a.jsx)(z.R.Trash,{className:"aspect-square w-5"})}):(0,a.jsx)("span",{}),(null===v||void 0===v?void 0:v.isDraftable)&&(0,a.jsx)(A.z,{size:"sm",variant:"white",type:"submit",disabled:r,className:"ml-auto",onClick:function(){y("is_published",!!l&&!l.is_published)},px:"sm",children:Z}),(0,a.jsx)(A.z,{size:"lg",color:"green",type:"submit",disabled:!N,loading:r,onClick:function(){"create"===f&&y("is_published",!0)},children:S})]})]}),"post-like"===(null===v||void 0===v||null===(t=v.admin)||void 0===t?void 0:t.layout)&&P&&P.length&&(0,a.jsx)(M.Z,{title:"Other info",className:"mt-10",children:(0,a.jsx)("div",{className:"grid gap-5 p-4",children:(0,a.jsx)(h.Z,{fields:P})})})]})},W=r(1571),ee=r(18362),te=r(89644),re=r.n(te),ne=r(97470);function ie(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void r(l)}s.done?t(u):Promise.resolve(u).then(n,i)}function ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){ie(a,n,i,o,s,"next",e)}function s(e){ie(a,n,i,o,s,"throw",e)}o(void 0)}))}}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){oe(e,t,r[t])}))}return e}var ue=function(){var e=x(),t=e.currentView,r=e.itemData,n=e.itemIsLoading,l=e.mutateItem,f=(0,o.useRef)(null),m=(0,o.useRef)({editorRef:f}),v=(0,u.Z)(),p=(0,d.useRouter)().push,b=(0,g.$)().t,h=(0,o.useMemo)((function(){return v&&(0,I.j7)(v,"update"===t)}),[v,t]),y=(0,s.cI)({defaultValues:(null===r||void 0===r?void 0:r.data)||{},reValidateMode:"onChange",mode:"onTouched",resolver:h&&(0,V.X)(h)}),j=y.setError,w=(0,ne.$)();(0,o.useEffect)((function(){return r&&y.reset(r)}),[r,y]);var O=function(){var e=ae(i().mark((function e(n){var a,o,s,u,d,m,x,h,y,g,O;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=v.name,!f.current){e.next=10;break}return e.next=5,null===(o=f.current)||void 0===o?void 0:o.isReady;case 5:return e.t0=JSON,e.next=8,f.current.save();case 8:e.t1=e.sent,n.content=e.t0.stringify.call(e.t0,e.t1);case 10:return e.prev=10,e.next=13,w({title:"update"===t?"Updating":"Creating",message:b("update"===t?"Updating your entry, please wait...":"Creating new entry, please wait..."),successMessage:b("create"===t?"Your entry is created!":"Your entry is updated!")},ae(i().mark((function e(){var o,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("update"!==t){e.next=9;break}return o=(0,q.d$)(r,n),s=r.id,e.next=5,c.Uq.update({id:s,model:a},o);case 5:return e.next=7,l((function(e){return(null===e||void 0===e?void 0:e.id)?se({},e||{},{finalValues:o}):e}));case 7:e.next=16;break;case 9:if("create"!==t){e.next=16;break}return e.next=12,c.Uq.create({model:a},n);case 12:if(null===(u=e.sent)||void 0===u?void 0:u.data){e.next=15;break}throw new Error("No data has been received");case 15:p(c.Uq.getListUrl(null===v||void 0===v?void 0:v.name));case 16:case"end":return e.stop()}}),e)}))));case 13:e.next=38;break;case 15:if(e.prev=15,e.t2=e.catch(10),!re().isAxiosError(e.t2)||23e3!==(null===(s=e.t2.response)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.code)){e.next=38;break}if(d=e.t2.response.data.data,!Array.isArray(d)||!d.length){e.next=38;break}for(m=!0,x=!1,h=void 0,e.prev=22,y=d[Symbol.iterator]();!(m=(g=y.next()).done);m=!0)O=g.value,j(O,{message:b("This field is unique and other entry has the same value")});e.next=30;break;case 26:e.prev=26,e.t3=e.catch(22),x=!0,h=e.t3;case 30:e.prev=30,e.prev=31,m||null==y.return||y.return();case 33:if(e.prev=33,!x){e.next=36;break}throw h;case 36:return e.finish(33);case 37:return e.finish(30);case 38:case"end":return e.stop()}}),e,null,[[10,15],[22,26,30,38],[31,,33,37]])})));return function(t){return e.apply(this,arguments)}}();return(0,a.jsx)(s.RV,se({},y,{children:(0,a.jsxs)("form",{onSubmit:y.handleSubmit(O),autoComplete:"off",children:[(0,a.jsx)(W.Z,{className:"py-5",items:[{content:b("Entry types")},{isLinkTo:c.Uq.getListUrl(null===v||void 0===v?void 0:v.name),content:b((0,ee.fm)((null===v||void 0===v?void 0:v.name)||""))},{content:b("update"==t?"Update":"Create")},{content:n?(0,a.jsx)(R.Z,{className:"h-4 w-16 flex-none"}):(0,a.jsx)("p",{className:"flex-none text-green-500 underline",children:"update"==t?null===r||void 0===r?void 0:r.id:b("Create")})}]}),(0,a.jsxs)("div",{className:"mt-10 items-start justify-between xl:flex",children:[(0,a.jsxs)("div",{className:"relative -mx-3 grid w-full max-w-4xl gap-5 px-3",children:[(0,a.jsx)(_,{}),(0,a.jsx)(P,{ref:m})]}),(0,a.jsx)(K,{isSubmitting:y.formState.isSubmitting})]})]})}))}},62626:function(e,t,r){r.r(t);var n=r(52322);t.default=function(e){var t=e.text,r=void 0===t?"Missing":t;return(0,n.jsx)("div",{className:"flex min-h-screen",children:(0,n.jsxs)("div",{className:"text-center m-auto",children:[(0,n.jsx)("h1",{className:"font-semibold text-6xl",children:"404"}),(0,n.jsx)("hr",{className:"border-t-8 w-1/4 mx-auto my-4 border-blue-100"}),(0,n.jsx)("p",{className:"text-gray-500 text-xl",children:r})]})})}}}]);