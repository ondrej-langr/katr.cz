(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{1922:function(e,t,r){"use strict";r.d(t,{z:function(){return f}});var n=r(2322),o=r(3610),i=r(6277),l=r(2784),a=r(2789),c=r.n(a);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var f=(0,l.forwardRef)((function(e,t){var r=e.children,l=e.className,a=e.size,f=void 0===a?"normal":a,d=e.color,b=e.type,m=void 0===b?"button":b,p=e.icon,v=s(e,["children","className","size","color","type","icon"]),h=p&&o.R[p];return(0,n.jsxs)("button",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){u(e,t,r[t])}))}return e}({ref:t,className:(0,i.Z)(c().root,c()["size--".concat(f)],d&&c()["color--".concat(d)],l),type:m},v,{children:[h&&(0,n.jsx)(h,{className:"mr-1.5 -ml-1 -mt-1 inline aspect-square w-5"}),r]}))}))},5471:function(e,t,r){"use strict";var n=r(2322),o=r(7962),i=r(6277),l=r(2829);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.Z=function(e){var t=e.className,r=c(e,["className"]),u=(0,l.$)().t;return(0,n.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({className:(0,i.Z)("flex min-h-[300px] flex-col justify-center text-center text-xl font-semibold text-gray-400",t)},r,{children:[(0,n.jsx)(o.zqj,{className:"mx-auto w-10"}),(0,n.jsx)("p",{children:u("No items available...")})]}))}},8727:function(e,t,r){"use strict";var n=r(2322),o=r(2948),i=r(9765),l=r(6277),a=r(2784);t.Z=function(e){var t=e.isOpen,r=e.onClose,c=e.title,u=e.children,s=e.size,f=void 0===s?"normal":s;return(0,n.jsx)(o.u,{appear:!0,show:t,as:a.Fragment,children:(0,n.jsx)(i.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto p-5",onClose:r,children:(0,n.jsxs)("div",{className:"grid min-h-screen text-center",children:[(0,n.jsx)(o.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(i.V.Overlay,{className:"fixed inset-0 bg-black opacity-70"})}),(0,n.jsx)(o.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,n.jsxs)("div",{className:(0,l.Z)("relative m-auto inline-block w-full transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all","small"===f&&"max-w-xl","normal"===f&&"max-w-4xl","big"===f&&"max-w-6xl","large"===f&&"max-w-7xl"),children:[c&&(0,n.jsx)(i.V.Title,{as:"h3",className:"ml-5 mt-5 border-b-2 pb-3 text-xl font-medium leading-6 text-gray-900",children:c}),u]})})]})})})}},1097:function(e,t,r){"use strict";r.d(t,{m:function(){return ve}});var n=r(2322),o=r(2784),i=r(1519),l=r(2021),a=r.n(l),c=r(9504),u=r(2507),s=r(5632),f=r(4424);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e,t){return t.reduce((function(t,r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}({},t,d({},"".concat("/"===e?"":e,"/").concat(r.name),{file:r,formattedSize:r.size/1e6+"MB",name:r.name.split(".").slice(0,-1).join(),uploaded:!1}))}),{})};function m(e,t,r,n,o,i,l){try{var a=e[i](l),c=a.value}catch(u){return void r(u)}a.done?t(c):Promise.resolve(c).then(n,o)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){p(e,t,r[t])}))}return e}var h={currentPath:"/",uploadingFiles:{},showNewFolderCreator:!1,workingFolders:{},files:void 0,isError:!1,isLoading:!0,mutateFiles:function(){},mutateFolders:function(){},getDropZoneInputProps:function(){},getDropZoneRootProps:function(){},openFilePicker:function(){},updateValue:function(){}},y=(0,o.createContext)(h),g=function(){return(0,o.useContext)(y)};function x(e,t){var r=t.name,n=t.value;if(r.startsWith("uploadingFiles.")){var o=r.split(".")[1];return v({},e,{uploadingFiles:v({},e.uploadingFiles,p({},o,v({},e.uploadingFiles[o]||{},n)))})}return v({},e,p({},r,n))}var j=function(e){var t,r=e.children,i=(0,o.useReducer)(x,h),l=i[0],d=i[1],p=(0,s.useRouter)(),g=p.push,j=p.query,O=(0,o.useMemo)((function(){return(j.folder||"/").replaceAll("//","/")}),[j]),w=(0,c.D)(O),P=w.data,k=w.isError,N=w.isLoading,S=w.mutateFiles,C=w.mutateFolders,F=(0,o.useCallback)((function(e,t){"currentPath"!==e?d({name:e,value:t}):g({query:{folder:t}})}),[d,g]),D=(0,o.useCallback)((t=a().mark((function e(t){var r,n,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=b(O,t),F("uploadingFiles",r),e.t0=regeneratorRuntime.keys(r);case 4:if((e.t1=e.t0()).done){e.next=21;break}return n=e.t1.value,o=!1,i=r[n],e.prev=8,e.next=11,u.Ip.create(i.file,{root:O});case 11:e.next=16;break;case 13:e.prev=13,e.t2=e.catch(8),o=!0;case 16:F("uploadingFiles.".concat(n),{error:o,uploaded:!0}),S(),e.next=4;break;case 21:case"end":return e.stop()}}),e,null,[[8,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function l(e){m(i,n,o,l,a,"next",e)}function a(e){m(i,n,o,l,a,"throw",e)}l(void 0)}))}),[F,O,S]),E=(0,f.uI)({onDrop:D,noClick:!0,noKeyboard:!0}),Z=E.getInputProps,_=E.getRootProps,I=E.open;return(0,n.jsx)(y.Provider,{value:v({},l,{files:P,isError:k,isLoading:N,updateValue:F,openFilePicker:I,getDropZoneRootProps:_,getDropZoneInputProps:Z,currentPath:O,mutateFiles:S,mutateFolders:C}),children:r})},O=r(6277),w=function(e){var t=e.isLast,r=e.onClick,o=e.icon,i=e.title,l=e.label;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:r,className:(0,O.Z)("flex flex-none items-center",t&&"pointer-events-none"),title:l,children:[(0,n.jsx)(o,{className:"w-6 text-blue-500"}),i&&(0,n.jsx)("span",{className:(0,O.Z)("ml-2 text-lg font-semibold",t&&"underline"),children:i})]}),!t&&(0,n.jsx)("span",{className:"mx-2 flex-none text-2xl font-semibold text-gray-300",children:"/"})]})},P=function(){var e=g(),t=e.currentPath,r=e.updateValue,l=(0,o.useMemo)((function(){return t.split("/").filter((function(e){return!!e}))}),[t]),a=(0,o.useCallback)((function(e){return function(){r("currentPath",e)}}),[r]);return(0,n.jsxs)("nav",{role:"navigation",className:"flex w-full items-center overflow-auto rounded-2xl border-2 border-project-border bg-white px-4",children:[(0,n.jsx)(w,{icon:i.HomeIcon,onClick:a("/"),isLast:!l.length}),l.map((function(e,t){return(0,n.jsx)(w,{icon:i.FolderOpenIcon,label:"/"+l.slice(0,t+1).join("/"),onClick:a("/"+l.slice(0,t+1).join("/")),title:e,isLast:t===l.length-1},e)}))]})},k=r(1922),N=r(276),S=r(3659),C=r(3610),F=r(2829);function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Z=(0,o.forwardRef)((function(e,t){var r=e.children,o=E(e,["children"]);return(0,n.jsx)(k.z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){D(e,t,r[t])}))}return e}({ref:t,color:"success"},o,{children:r}))})),_=function(){var e=g(),t=e.updateValue,r=e.openFilePicker,o=(0,F.$)().t;return(0,n.jsx)("div",{className:"ml-3 grid aspect-square h-full flex-none",children:(0,n.jsx)(N.Z,{buttonComponent:Z,buttonClassName:"h-full aspect-square flex",offset:[0,10],placement:"bottom-end",buttonContent:(0,n.jsx)(C.R.PlusIcon,{className:"absolute left-3 top-3 w-8"}),children:(0,n.jsxs)(S.Z,{children:[(0,n.jsx)(S.Z.Item,{icon:"DocumentAddIcon",onClick:r,title:"Add new file to current folder",children:o("Add new file")}),(0,n.jsx)(S.Z.Item,{icon:"FolderAddIcon",onClick:function(){return t("showNewFolderCreator",!0)},title:"Add new folder to current folder",children:o("Add new folder")})]})})})},I=function(){return(0,n.jsxs)("section",{className:"mb-5 flex h-[55px]",children:[(0,n.jsx)(P,{}),(0,n.jsx)(_,{})]})},z=r(8727);function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){L(e,t,r[t])}))}return e}var q=function(e){var t=e.isOpen,r=e.onClose,o=g(),i=o.getDropZoneInputProps,l=o.getDropZoneRootProps,a=(0,F.$)().t;return(0,n.jsx)(z.Z,{isOpen:t,onClose:r,size:"normal",children:(0,n.jsxs)("div",R({},l({className:"flex h-full min-h-[750px] w-full rounded-2xl border-4 border-dashed border-blue-300 bg-gray-100"}),{children:[(0,n.jsx)("input",R({},i({}))),(0,n.jsx)("div",{className:"m-auto text-center",children:(0,n.jsx)("p",{className:"text-xl font-semibold text-gray-400",children:a("Drag your files here here")})})]}))})},V=r(5471),A=r(8755),M=function(){return{itemsWrap:(0,O.Z)("grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-7 items-start"),itemRoot:(0,O.Z)("relative block group"),itemSquare:function(e){var t=void 0===e||e;return(0,O.Z)("aspect-square w-full rounded-lg bg-white shadow-md overflow-hidden relative",t?"group-hover:shadow-lg duration-200":"cursor-default")},itemLabel:(0,O.Z)("mt-2 overflow-hidden text-ellipsis font-semibold group-hover:underline")}},T=r(9097);function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var H=(0,o.forwardRef)((function(e,t){var r=e.children,o=e.icon,i=e.className,l=$(e,["children","icon","className"]);return(0,n.jsxs)("button",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){W(e,t,r[t])}))}return e}({ref:t,className:(0,O.Z)("rounded-lg bg-white p-1.5 text-gray-400",i)},l,{children:[(0,n.jsx)(o,{className:"aspect-square w-6"}),r]}))})),B=r(7962);function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){K(e,t,r[t])}))}return e}function X(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var J=M(),Q=function(e){var t=e.itemId,r=e.children,o=(e.className,X(e,["itemId","children","className"]));return(0,n.jsx)(T.default,{href:u.Ip.getUrl(t),children:(0,n.jsx)("a",U({},o,{children:r}))})},G=function(e){var t=e.id,r=e.filename,i=e.onDeleteClick,l=r.split(".").at(-1)||"unknown",a=l.includes("png")||l.includes("jpg")||l.includes("gif"),c=(0,o.useCallback)((function(){return i(t)}),[t,i]);return(0,n.jsxs)("article",{className:J.itemRoot,children:[(0,n.jsxs)(Q,{itemId:t,children:[(0,n.jsx)("div",{className:J.itemSquare(),children:a?(0,n.jsx)("img",{alt:"uploaded file",className:"absolute top-0 left-0 h-full w-full object-cover",src:"/api/entry-types/files/items/".concat(t)}):(0,n.jsx)("div",{className:"flex h-full w-full",children:(0,n.jsx)("p",{className:"m-auto text-3xl font-bold text-gray-400",children:l})})}),(0,n.jsx)("h1",{className:J.itemLabel,children:r})]}),(0,n.jsx)("div",{className:"absolute top-0 right-0 m-2.5",children:(0,n.jsx)(H,{icon:B.XHJ,onClick:c,className:"border-2 border-project-border shadow-lg duration-200 hover:border-red-500 hover:bg-red-500 hover:text-white disabled:opacity-50"})})]})},Y=function(){var e=M();return(0,n.jsx)("div",{className:e.itemSquare(!1)})},ee=function(e){var t,r,i=e.itemKey,l=e.name,a=e.onClick,c=e.onDeleteClick,u=g(),s=u.currentPath,f=u.workingFolders,d=(0,o.useState)(!1),b=d[0],m=d[1],p=M(),v=(0,o.useMemo)((function(){return"".concat("/"===s?"":s,"/").concat(i)}),[i,s]),h=function(){return m(!b)},y=(0,o.useMemo)((function(){return b?B.ry:B.ROc}),[b]),x=(0,o.useCallback)((function(){return a(v)}),[a,v]),j=(0,o.useCallback)((function(){return c(v)}),[c,v]);return(0,n.jsxs)("div",{className:p.itemRoot,onMouseEnter:h,onMouseLeave:h,role:"link",children:[(0,n.jsx)("div",{className:(0,O.Z)(p.itemSquare(),"flex cursor-pointer"),onClick:x,children:(0,n.jsx)(y,{className:"m-auto w-28 text-blue-500"})}),(0,n.jsx)("h1",{className:(0,O.Z)(p.itemLabel,"cursor-pointer text-left"),onClick:x,children:l}),(0,n.jsx)("div",{className:"absolute top-0 right-0 m-2.5",children:(0,n.jsx)(H,{icon:B.XHJ,onClick:j,className:"border-2 border-project-border shadow-lg duration-200 hover:border-red-500 hover:bg-red-500 hover:text-white disabled:opacity-50",disabled:"deleting"===(null===(t=f[v])||void 0===t?void 0:t.type)||"uploading"===(null===(r=f[v])||void 0===r?void 0:r.type)})})]})},te=r(1970),re=r(9644),ne=r.n(re),oe=r(5242),ie=r(3955),le=r(5482);function ae(e,t,r,n,o,i,l){try{var a=e[i](l),c=a.value}catch(u){return void r(u)}a.done?t(c):Promise.resolve(c).then(n,o)}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ce(e,t,r[t])}))}return e}var se=function(){var e,t,r=g(),i=r.updateValue,l=r.currentPath,c=(0,le.kY)().mutate,s=M(),f=(0,F.$)().t,d=(0,ie.cI)(),b=d.register,m=d.handleSubmit,p=d.setFocus,v=d.formState,h=d.setError;(0,o.useEffect)((function(){p("name")}),[p]);var y,x=(y=a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,e.prev=1,e.next=4,u.sg.create("".concat(l,"/").concat(r));case 4:return e.next=6,c((0,te.v)(l));case 6:i("showNewFolderCreator",!1),e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(1),!ne().isAxiosError(e.t0)||409!==(null===(n=e.t0.response)||void 0===n?void 0:n.status)){e.next=15;break}return h("name",{message:"This folder already exists"}),e.abrupt("return",!1);case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var o=y.apply(e,t);function i(e){ae(o,r,n,i,l,"next",e)}function l(e){ae(o,r,n,i,l,"throw",e)}i(void 0)}))});return(0,n.jsxs)(oe.E.button,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:(0,O.Z)(s.itemRoot,"text-left",v.isSubmitting&&"cursor-wait"),children:[(0,n.jsx)(oe.E.div,{className:(0,O.Z)(s.itemSquare(!1),"flex"),children:(0,n.jsx)(B.zWQ,{className:"m-auto w-28 text-blue-500"})}),(0,n.jsxs)("form",{onSubmit:m(x),className:"relative",children:[(0,n.jsx)("input",ue({className:"border-b-4 border-blue-500 bg-transparent text-lg font-semibold outline-0 disabled:opacity-50",disabled:v.isSubmitting||v.isSubmitSuccessful,autoComplete:"off"},b("name",{onBlur:function(){v.isSubmitting||i("showNewFolderCreator",!1)}}))),(null===(e=v.errors)||void 0===e||null===(t=e.name)||void 0===t?void 0:t.message)&&(0,n.jsx)("small",{className:"b-0 translate-y-full text-lg font-semibold text-red-500",children:f(v.errors.name.message)})]})]})};function fe(e,t,r,n,o,i,l){try{var a=e[i](l),c=a.value}catch(u){return void r(u)}a.done?t(c):Promise.resolve(c).then(n,o)}function de(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){fe(i,n,o,l,a,"next",e)}function a(e){fe(i,n,o,l,a,"throw",e)}l(void 0)}))}}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){be(e,t,r[t])}))}return e}var pe=function(){var e,t,r=g(),i=r.isLoading,l=r.isError,c=r.files,s=r.showNewFolderCreator,f=r.updateValue,d=r.workingFolders,b=r.mutateFiles,m=r.mutateFolders,p=M(),v=(0,F.$)().t,h=(0,o.useCallback)((function(e){f("currentPath",e)}),[f]),y=(0,o.useCallback)(de(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(v("Do you really want to delete this folder?"))){e.next=8;break}return r=t.split("/").at(-1),f("workingFolders",me({},d,{path:{type:"deleting"}})),e.next=5,u.sg.delete(t);case 5:return e.next=7,m((function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e!==r}))}));case 7:f("workingFolders",me({},d,{path:{type:"none"}}));case 8:case"end":return e.stop()}}),e)}))),[d,f,m,v]),x=(0,o.useCallback)(de(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(v("Do you really want to delete this file?"))){e.next=5;break}return e.next=3,u.Ip.delete(t);case 3:return e.next=5,b((function(e){return e?{data:e.data.filter((function(e){return e.id!==t}))}:e}));case 5:case"end":return e.stop()}}),e)}))),[b,v]);return i||l?(0,n.jsx)("div",{className:p.itemsWrap,children:new Array(10).fill(!0).map((function(e,t){return(0,n.jsx)(Y,{},t)}))}):(0,n.jsx)(n.Fragment,{children:(null===c||void 0===c||null===(e=c.files)||void 0===e?void 0:e.length)||(null===c||void 0===c||null===(t=c.folders)||void 0===t?void 0:t.length)||s?(0,n.jsx)("div",{className:p.itemsWrap,children:(0,n.jsxs)(n.Fragment,{children:[(null===c||void 0===c?void 0:c.folders)&&c.folders.map((function(e){return(0,n.jsx)(ee,{itemKey:e,name:e,onClick:h,onDeleteClick:y},e)})),(null===c||void 0===c?void 0:c.files)&&c.files.map((function(e){return(0,n.jsx)(G,me({onDeleteClick:x},e),e.id)})),(0,n.jsx)(A.M,{children:s&&(0,n.jsx)(se,{})})]})}):(0,n.jsx)(V.Z,{})})},ve=function(){var e=(0,o.useState)(!1),t=e[0],r=e[1],i=(0,o.useCallback)((function(e){var n;e.preventDefault(),t||"Files"!==((null===e||void 0===e||null===(n=e.dataTransfer)||void 0===n?void 0:n.types)||[]).join("")||r(!0)}),[t,r]),l=(0,o.useCallback)((function(e){e.preventDefault(),t&&r(!1)}),[t,r]),a=(0,o.useCallback)((function(){return r(!1)}),[r]);return(0,n.jsx)(j,{children:(0,n.jsxs)("div",{onDragOver:i,onDrop:l,children:[(0,n.jsx)(I,{}),(0,n.jsx)(pe,{}),(0,n.jsx)(q,{isOpen:t,onClose:a})]})})}},9504:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(1970),o=r(8958),i=function(e){var t=(0,o.y)("files",{path:e}),r=t.data,i=t.isError,l=t.isLoading,a=t.mutate,c=(0,n.j)(e),u=c.data,s=c.error,f=c.mutate;return{data:(null===r||void 0===r?void 0:r.data)||u?{files:null===r||void 0===r?void 0:r.data,folders:u}:void 0,isError:i||s,isLoading:l||!s&&!u,mutateFiles:a,mutateFolders:f}}},1970:function(e,t,r){"use strict";r.d(t,{v:function(){return i},j:function(){return l}});var n=r(9117),o=r(5482),i=function(e){return"".concat(n.Xn,"/files/folders?path=").concat(e)},l=function(e){return(0,o.ZP)(i(e),{isPaused:function(){return!e}})}},8958:function(e,t,r){"use strict";r.d(t,{y:function(){return u}});var n=r(5662),o=r(2507),i=r(5482);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=function(e,t){var r=void 0===t?{}:t;return n.x.get(e,{params:r}).then((function(e){return e.data}))};function u(e,t){var r=(0,i.ZP)([o.Uq.apiGetListUrl(e||""),t],c,{isPaused:function(){return!e}}),n=r.data,u=r.error;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){l(e,t,r[t])}))}return e}({data:n,isLoading:!u&&!n,isError:u},a(r,["data","error"]))}},2789:function(e){e.exports={root:"button_root__ys37e","size--large":"button_size--large__1r3yQ","size--small":"button_size--small__HNkLe","size--normal":"button_size--normal__4OeMn","color--success":"button_color--success__r4fw1","color--ghost":"button_color--ghost__BmmzL","color--warning":"button_color--warning__Vzrxp","color--error":"button_color--error__OjPlq"}}}]);