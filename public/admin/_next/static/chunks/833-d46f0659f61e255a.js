"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[833],{53833:function(e,t,n){n.d(t,{xN:function(){return xe},Be:function(){return K},$_:function(){return Oe},fb:function(){return Ue},h4:function(){return Ce},NC:function(){return ze},DQ:function(){return J}});var r=n(52322),i=n(72722),o=n(76902),a=n(25865),l=n(23191),s=n(24774),u=n(24893),c=n(46530),d=n(2784);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function v(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b=(0,d.forwardRef)((function(e,t){e.avatar,e.email,e.id;var n=e.name,i=(e.password,e.role),a=(e.state,v(e,["avatar","email","id","name","password","role","state"])),u=(0,o.c)("userroles",i),c=u.data,d=u.isLoading;return(0,r.jsxs)("div",p({ref:t},a,{children:[(0,r.jsx)(l.x,{children:n}),(0,r.jsx)(l.x,{size:"xs",color:"blue",children:!c||d?(0,r.jsx)(s.O,{width:100,height:20}):c.label})]}))})),h=function(e){var t=m({},e),n=(0,a.y)("users",{limit:5,where:p({},t.value&&Number.isNaN(Number(t.value))?{name:{manipulator:"LIKE",value:"%".concat(t.value,"%")}}:{},t.value&&!Number.isNaN(Number(t.value))?{id:{manipulator:"LIKE",value:t.value}}:{})},{isPaused:function(){return!t.value}}).data;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.F,p({label:"User",itemComponent:b,placeholder:(0,c.t)("Start typing to see options"),filter:function(){return!0},nothingFound:t.value?(0,r.jsx)("div",{children:(0,c.t)("Nothing has been found")}):void 0},t,{data:((null===n||void 0===n?void 0:n.data)||[]).map((function(e){return p({},e,{value:String(e.name)})}))}))})},x=n(54557),g=n(81428),y=n(24917),j=n(74559),w=n(30678),O=n(53610),N=n(63955),S=n(52829),P=n(94776),k=n.n(P),C=n(93118),E=n(59377),I=n(41277),D=n(5632),Z=n(30621),_=n(49898),U=n(97470),A=n(5019),V=n(89644),L=n.n(V),R=n(61941);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(u){return void n(u)}l.done?t(s):Promise.resolve(s).then(r,i)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){T(o,r,i,a,l,"next",e)}function l(e){T(o,r,i,a,l,"throw",e)}a(void 0)}))}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){z(e,t,n[t])}))}return e}function q(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y=(0,d.createContext)({exitView:function(){},currentView:"update",itemIsMissing:!1,itemIsLoading:!0,itemIsError:!1,mutateItem:$(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),onSubmit:$(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),setAsideOpen:function(){},asideOpen:!1}),J=function(){return(0,d.useContext)(Y)},K=function(e){var t=e.children,n=e.viewType,i=G((0,R._)({key:"aside-toggled",defaultValue:!0,deserialize:function(e){return"true"===e}}),2),o=i[0],a=i[1],l=(0,D.useRouter)().push,s=(0,d.useRef)(null),u=(0,d.useRef)({editorRef:s}),c=(0,C.Z)(),f=(0,S.$)().t,m=(0,E.Z)(),p=m.data,v=m.isError,b=m.isLoading,h=m.itemIsMissing,x=m.mutate,g=(0,d.useMemo)((function(){return c&&(0,_.j7)(c,"update"===n)}),[c,n]),y=(0,N.cI)({defaultValues:(null===p||void 0===p?void 0:p.data)||{},reValidateMode:"onChange",mode:"onTouched",resolver:g&&(0,Z.X)(g)}),j=y.setError,w=(y.formState,(0,U.$)()),O=(0,d.useMemo)((function(){if(p&&"create"===n){p.id;return q(p,["id"])}return p}),[p,n]);(0,d.useEffect)((function(){return p&&y.reset(p)}),[p,y]);var P=(0,d.useCallback)(function(){var e=$(k().mark((function e(t){var r,i,o,a,u,d,m,v,b,h,g,y,O,N;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.name,!s.current){e.next=10;break}return e.next=5,null===(i=s.current)||void 0===i?void 0:i.isReady;case 5:return e.t0=JSON,e.next=8,s.current.save();case 8:e.t1=e.sent,t.content=e.t0.stringify.call(e.t0,e.t1);case 10:return e.prev=10,e.next=13,w({title:"update"===n?"Updating":"Creating",message:f("update"===n?"Updating your entry, please wait...":"Creating new entry, please wait..."),successMessage:f("create"===n?"Your entry is created!":"Your entry is updated!")},$(k().mark((function e(){var i,o,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("update"!==n){e.next=9;break}return i=(0,A.d$)(p,t),o=p.id,e.next=5,I.Uq.update({id:o,model:r},i);case 5:return e.next=7,x((function(e){return(null===e||void 0===e?void 0:e.id)?F({},e||{},{finalValues:i}):e}),{});case 7:e.next=16;break;case 9:if("create"!==n){e.next=16;break}return e.next=12,I.Uq.create({model:r},t);case 12:if(null===(a=e.sent)||void 0===a?void 0:a.data){e.next=15;break}throw new Error("No data has been received");case 15:l(I.Uq.getListUrl(null===c||void 0===c?void 0:c.name));case 16:case"end":return e.stop()}}),e)}))));case 13:e.next=38;break;case 15:if(e.prev=15,e.t2=e.catch(10),!L().isAxiosError(e.t2)||23e3!==(null===(o=e.t2.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.code)){e.next=38;break}if(u=e.t2.response.data.data,!Array.isArray(u)||!u.length){e.next=38;break}for(d=!0,m=!1,v=void 0,e.prev=22,b=u[Symbol.iterator]();!(d=(h=b.next()).done);d=!0)g=h.value,O=null===c||void 0===c||null===(y=c.columns)||void 0===y?void 0:y[g],N=g,"slug"===g&&"slug"===(null===O||void 0===O?void 0:O.type)&&(N=O.of),j(N,{message:f("This field is unique and other entry has the same value")});e.next=30;break;case 26:e.prev=26,e.t3=e.catch(22),m=!0,v=e.t3;case 30:e.prev=30,e.prev=31,d||null==b.return||b.return();case 33:if(e.prev=33,!m){e.next=36;break}throw v;case 36:return e.finish(33);case 37:return e.finish(30);case 38:case"end":return e.stop()}}),e,null,[[10,15],[22,26,30,38],[31,,33,37]])})));return function(t){return e.apply(this,arguments)}}(),[c,p,x,l,w,j,f,n]);return(0,r.jsx)(N.RV,F({},y,{children:(0,r.jsx)(Y.Provider,{value:{currentView:n,exitView:function(){l(I.Uq.getListUrl(null===c||void 0===c?void 0:c.name))},itemData:O,itemIsError:v,itemIsLoading:"update"===n&&b,itemIsMissing:h,mutateItem:x,asideOpen:o,setAsideOpen:a,onSubmit:y.handleSubmit(P)},children:"function"===typeof t?t({formContentRefs:u}):t})}))},Q=n(85409),X=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.O,{width:"100%",height:30}),(0,r.jsx)(s.O,{width:"100%",height:30}),(0,r.jsx)(s.O,{width:"100%",height:30}),(0,r.jsx)(s.O,{width:"100%",height:30})]});function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}var W=function(e){var t=e.id,n=e.name,i=e.onItemDelete;return(0,r.jsxs)("div",{className:"flex justify-between rounded-lg bg-gray-50 px-4 py-2",children:[(0,r.jsx)(l.x,{size:"lg",children:n}),(0,r.jsx)(Q.A,{color:"red",variant:"light",onClick:function(){return i(t)},children:(0,r.jsx)(O.R.Trash,{width:20,height:20})})]})},ee=function(){var e=(0,N.Gc)(),t=e.watch,n=e.setValue,i=e.getValues,o=t("coeditors"),l=!Object.keys(o||{}).length,s=(0,a.y)("users",{limit:999,where:{id:{manipulator:"IN",value:Object.keys(o||{})}}},{isPaused:function(){return l}}),u=s.data,c=s.isLoading,f=(0,d.useCallback)((function(e){var t="coeditors",r=H({},i(t));delete r[e],n(t,r)}),[n,i]);return!c||l?(0,r.jsx)(r.Fragment,{children:((null===u||void 0===u?void 0:u.data)||[]).map((function(e){return(0,r.jsx)(W,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}({onItemDelete:f},e),e.id)}))}):X};function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=function(){var e=J(),t=e.itemData,n=(e.itemIsLoading,(0,x.x)()),o=(0,d.useState)(!1),a=o[0],l=o[1],s=(0,d.useState)(),u=s[0],c=s[1],f=(0,d.useState)(!1),m=f[0],p=f[1],v=(0,N.Gc)(),b=v.setValue,P=v.getValues,k=(0,S.$)().t,C=(0,d.useCallback)((function(e){var t,n=e.id;l(!0);var r=null!==(t=P("coeditors"))&&void 0!==t?t:{};b("coeditors",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){te(e,t,n[t])}))}return e}({},r,te({},String(n),!0))),l(!1),p(!1),c("")}),[P,b]);return(null===n||void 0===n?void 0:n.can({action:"update",targetModel:"userRoles"}))||(null===n||void 0===n?void 0:n.id)===(null===t||void 0===t?void 0:t.created_by)?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Z,{title:k("Coeditors"),description:"Add coeditor and add permission to edit to some user",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-2.5 p-2.5",children:[(0,r.jsx)(ee,{}),(0,r.jsxs)(g.J,{closeOnClickOutside:!1,closeOnEscape:!1,opened:m,onClose:function(){return p(!1)},position:"bottom",placement:"center",withCloseButton:!0,title:k("Select user"),transition:"pop-top-right",className:"w-full",width:400,target:(0,r.jsx)(y.z,{className:"w-full",leftIcon:(0,r.jsx)(O.R.Plus,{className:"h-7 w-7"}),variant:"light",type:"button",onClick:function(){return p((function(e){return!e}))},children:(0,r.jsx)("span",{className:"ml-auto inline-block",children:k("Add coeditor")})}),children:[(0,r.jsx)(h,{disabled:a,value:u,onChange:c,onItemSubmit:C}),(0,r.jsx)(j.Z,{position:"apart",style:{marginTop:15},children:(0,r.jsx)(w.e,{component:"button",color:"gray",size:"sm",disabled:a,onClick:function(){return p(!1)},children:"Cancel"})})]})]})})}):null},re=n(32769);function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ae=function(){var e,t=(0,S.$)().t,n=(0,C.Z)(),o=(0,d.useMemo)((function(){if(n){var e=n.columns,t=(e.title,e.content,oe(e,["title","content"]));return(0,re.x)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ie(e,t,n[t])}))}return e}({},n,{columns:t}))}}),[n]);return"post-like"===(null===n||void 0===n||null===(e=n.admin)||void 0===e?void 0:e.layout)&&o&&o.length?(0,r.jsx)(i.Z,{title:t("Other info"),children:(0,r.jsx)("div",{className:"grid gap-5 p-4",children:(0,r.jsx)(re.Z,{fields:o})})}):null},le=n(85812),se=n(6277),ue=n(28879),ce=n.n(ue),de=n(39097);function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var pe=function(e){var t=e.className,n=me(e,["className"]);return(0,r.jsx)(s.O,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fe(e,t,n[t])}))}return e}({className:(0,se.Z)("relative top-0.5 inline-block h-4",t)},n))},ve=function(e){var t=e.userId,n=(0,S.$)().t,i=(0,le.a)(t,{isPaused:function(){return!t}}),o=i.data,a=i.isLoading,l=(0,x.x)(),s=Number(t)===Number(null===l||void 0===l?void 0:l.id);return!a&&o&&t?(0,r.jsx)(de.default,{href:s?"/settings/profile":I.KD.getUrl(t),children:(0,r.jsx)("a",{className:"font-semibold text-blue-600",children:s?n("Me"):o.name})}):(0,r.jsx)(pe,{className:"inline-block"})},be="D.M. YYYY @ HH:mm",he=function(){var e=J(),t=e.itemData,n=e.itemIsLoading,o=e.currentView,a=(0,S.$)().t,l=(0,C.Z)();return(null===l||void 0===l?void 0:l.hasTimestamps)||(null===l||void 0===l?void 0:l.ownable)?(0,r.jsx)(i.Z,{className:"!pt-0",title:a("Publish info"),children:"update"===o&&(0,r.jsx)("div",{className:"w-full px-4 py-5",children:(0,r.jsxs)("ul",{className:"flex list-disc flex-col gap-2 pl-5",children:[(null===l||void 0===l?void 0:l.hasTimestamps)&&(0,r.jsxs)(r.Fragment,{children:[!!(null===t||void 0===t?void 0:t.updated_at)&&(0,r.jsxs)("li",{children:[a("Updated at:")," ",n?(0,r.jsx)(pe,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:ce()(null===t||void 0===t?void 0:t.updated_at).format(be)})]}),!!(null===t||void 0===t?void 0:t.created_at)&&(0,r.jsxs)("li",{children:[a("Created at:")," ",n?(0,r.jsx)(pe,{className:"w-full max-w-[6rem]"}):(0,r.jsx)("span",{className:"font-semibold text-blue-600",children:ce()(null===t||void 0===t?void 0:t.created_at).format(be)})]})]}),(null===l||void 0===l?void 0:l.ownable)&&(0,r.jsxs)(r.Fragment,{children:[(null===t||void 0===t?void 0:t.updated_by)&&"0"!==String(null===t||void 0===t?void 0:t.updated_by)&&(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"flex-none",children:a("Updated by:")})," ",(0,r.jsx)(ve,{userId:null===t||void 0===t?void 0:t.updated_by})]})}),(null===t||void 0===t?void 0:t.created_by)&&"0"!==String(null===t||void 0===t?void 0:t.created_by)&&(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"flex-none",children:a("Created by:")})," ",(0,r.jsx)(ve,{userId:null===t||void 0===t?void 0:t.created_by})]})})]})]})})}):null},xe=function(){var e=(0,C.Z)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(he,{}),(0,r.jsx)(ae,{}),e&&e.isSharable&&(0,r.jsx)(ne,{})]})},ge=n(52170),ye=n(54339),je=n(51337);function we(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(u){return void n(u)}l.done?t(s):Promise.resolve(s).then(r,i)}var Oe=function(){var e=(0,(0,N.Gc)().watch)(),t=(0,S.$)().t,n=J(),i=n.itemData,o=n.currentView,a=n.setAsideOpen,l=n.asideOpen,s=n.exitView,u=(0,C.Z)(),c=(0,x.x)(),f=(0,N.Gc)(),m=f.setValue,p=f.formState,v=(0,d.useMemo)((function(){return"update"!==o||!!Object.keys((0,A.d$)(i||{},e)).length}),[e,o,i]),b=function(){var e,n=(e=k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(t(ge.X3.ON_DELETE_REQUEST_PROMPT))){e.next=4;break}return s(),e.next=4,I.Uq.delete({id:null===i||void 0===i?void 0:i.id,model:null===u||void 0===u?void 0:u.name});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){we(o,r,i,a,l,"next",e)}function l(e){we(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}(),h=(0,d.useMemo)((function(){var e="";return"create"===o?e=p.isSubmitting?"Publishing":"Publish":"update"===o&&(e=p.isSubmitting?"Updating":"Update"),t(e)}),[o,p.isSubmitting,t]),g=(0,d.useMemo)((function(){var e="";if(!(null===u||void 0===u?void 0:u.isDraftable))return e;if("create"===o)e=p.isSubmitting?"Saving":"Save as concept";else if("update"===o){if(!i)return e;e=i.is_published?"Unpublish":"Publish"}return t(e)}),[o,p.isSubmitting,u,i,t]);return(0,r.jsxs)(ye.X,{shadow:"lg",component:"footer",className:"align-center container sticky bottom-5 left-0 z-10 mx-auto flex max-h-20 items-center justify-between border-2 border-project-border p-3",children:["update"===o&&u&&(null===c||void 0===c?void 0:c.can({action:"create",targetModel:null===u||void 0===u?void 0:u.name}))?(0,r.jsx)(je.u,{withArrow:!0,label:t("Delete"),position:"top",color:"gray",children:(0,r.jsx)(Q.A,{size:"xl",type:"button",loading:p.isSubmitting,onClick:b,color:"red",variant:"light",styles:{root:{width:50,height:50}},className:(0,se.Z)(p.isSubmitting&&"!cursor-progress"),children:(0,r.jsx)(O.R.Trash,{className:"aspect-square w-10"})})}):(0,r.jsx)("span",{}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(null===u||void 0===u?void 0:u.isDraftable)&&(0,r.jsx)(y.z,{size:"sm",variant:"white",type:"submit",disabled:p.isSubmitting,className:"ml-auto",onClick:function(){m("is_published",!!i&&!i.is_published)},px:"sm",children:g}),(0,r.jsx)(y.z,{size:"lg",color:"green",type:"submit",disabled:!v,loading:p.isSubmitting,onClick:function(){"create"===o&&m("is_published",!0)},children:h}),(0,r.jsx)(je.u,{withArrow:!0,label:t("Toggle more options"),position:"top",color:"gray",children:(0,r.jsx)(Q.A,{size:"xl",color:"blue",variant:"light",type:"button",className:(0,se.Z)(p.isSubmitting&&"!cursor-progress"),styles:{root:{width:50,height:50}},onClick:function(){return a((function(e){return!e}))},children:(0,r.jsx)(O.R.ChevronLeft,{className:(0,se.Z)("aspect-square w-20 duration-150",l&&"rotate-180")})})})]})]})},Ne=n(59935);function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Se(e,t,n[t])}))}return e}var ke=function(){var e,t,n=J().itemIsLoading,i=(0,N.Gc)(),o=i.register,a=i.formState,l=(0,S.$)().t;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"relative w-full",children:[(0,r.jsx)("input",Pe({className:(0,se.Z)("w-full !border-b-2 border-project-border bg-transparent pb-5 text-5xl font-bold outline-none duration-200 focus:border-blue-500"),disabled:n,placeholder:l(n?"Loading...":"Title here...")},o("title"))),(null===(e=a.errors)||void 0===e||null===(t=e.title)||void 0===t?void 0:t.message)&&(0,r.jsx)("small",{className:"font-bold text-red-500",children:a.errors.title.message})]})})},Ce=function(){var e,t=J().currentView,n=(0,C.Z)(),i=(0,S.$)().t;return(0,r.jsx)("header",{className:"mr-9 w-full pb-5 xl:mr-0",children:"simple"===(null===n||void 0===n||null===(e=n.admin)||void 0===e?void 0:e.layout)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"mt-0 text-5xl font-bold",children:i("update"==t?"Update an entry":"Create an entry")}),(0,r.jsx)(Ne.i,{size:"sm",mt:"lg"})]}):(0,r.jsx)(ke,{})})};function Ee(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(u){return void n(u)}l.done?t(s):Promise.resolve(s).then(r,i)}function Ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ee(o,r,i,a,l,"next",e)}function l(e){Ee(o,r,i,a,l,"throw",e)}a(void 0)}))}}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ze=(0,n(25237).default)(Ie(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(837),n.e(961),n.e(313)]).then(n.bind(n,69820));case 2:return e.abrupt("return",e.sent.LazyEditor);case 3:case"end":return e.stop()}}),e)}))),{loadableGenerated:{webpack:function(){return[69820]}},ssr:!1}),_e=(0,d.forwardRef)((function(e,t){var n=(0,N.Gc)().control,i=(0,S.$)().t,o=(0,d.useCallback)((function(e){return function(){var t=Ie(k().mark((function t(n){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=JSON,t.next=4,n.saver.save();case 4:return t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[]);return(0,r.jsx)(N.Qr,{control:n,name:"content",render:function(n){var a,l=n.field,s=l.onChange,u=l.name,c=n.formState.errors;return(0,r.jsx)(Ze,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){De(e,t,n[t])}))}return e}({editorRef:t,onChange:o(s),placeholder:i("Start typing here..."),error:null===c||void 0===c||null===(a=c[u])||void 0===a?void 0:a.message},e))}})})),Ue=(0,d.forwardRef)((function(e,t){var n,i,o=((null===(n=t)||void 0===n?void 0:n.current)||{}).editorRef,a=J(),l=a.currentView,s=a.itemData,u=(0,N.Gc)().formState,c=(0,C.Z)(),f=(0,d.useMemo)((function(){if(c)return(0,re.x)(c)}),[c]);return f?(0,r.jsxs)("div",{className:"flex min-h-screen flex-col gap-5",children:["simple"===(null===c||void 0===c||null===(i=c.admin)||void 0===i?void 0:i.layout)?f&&(0,r.jsx)(re.Z,{fields:f}):(0,r.jsx)(_e,{initialValue:null===s||void 0===s?void 0:s.content,autofocus:"update"===l,ref:o}),u.isSubmitting&&(0,r.jsx)("div",{className:"absolute inset-0 cursor-progress bg-white/20 backdrop-blur-[2px]"})]}):null})),Ae=n(62626),Ve=n(1571),Le=n(18362);function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Re(e,t,n[t])}))}return e}function Te(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var $e=function(e){var t=e.children,n=J().onSubmit;return(0,r.jsx)("form",{autoComplete:"off",onSubmit:n,className:"flex",children:t})};$e.Content=function(e){var t=e.children,n=(0,C.Z)(),i=J(),o=i.currentView,a=i.itemIsLoading,l=i.itemData,u=(0,S.$)().t;return(0,r.jsxs)("div",{className:"container relative mx-auto mb-10",children:[(0,r.jsx)(Ve.Z,{className:"py-5",items:[{content:u("Entry types")},{isLinkTo:I.Uq.getListUrl(null===n||void 0===n?void 0:n.name),content:u((0,Le.fm)((null===n||void 0===n?void 0:n.name)||""))},{content:u("update"==o?"Update":"Create")},{content:a&&"update"===o?(0,r.jsx)(s.O,{className:"h-4 w-16 flex-none"}):(0,r.jsx)("p",{className:"flex-none text-green-500 underline",children:"update"==o?null===l||void 0===l?void 0:l.id:u("Create")})}]}),(0,r.jsx)("div",{className:"mt-10 items-start justify-between xl:flex",children:(0,r.jsx)("div",{className:"relative w-full",children:t})})]})},$e.Aside=function(e){var t=e.children,n=e.className,i=Te(e,["children","className"]),o=J().asideOpen;return(0,r.jsx)("aside",{className:(0,se.Z)("sticky top-0 overflow-hidden transition-[width] duration-300",o?"w-[500px]":"h-0 w-0"),children:(0,r.jsx)("div",Me({className:(0,se.Z)("h-full w-[500px] py-5 pl-8",n)},i,{children:t}))})};var ze=function(e){return function(){var t=(0,C.Z)();return t&&"users"!==t.name?(0,r.jsx)(K,{viewType:e,children:function(e){var t=e.formContentRefs;return(0,r.jsxs)($e,{children:[(0,r.jsxs)($e.Content,{children:[(0,r.jsx)(Ce,{}),(0,r.jsx)(Ue,{ref:t}),(0,r.jsx)(Oe,{})]}),(0,r.jsx)($e.Aside,{className:"flex flex-col gap-5",open:!0,onClose:function(){},children:(0,r.jsx)(xe,{})})]})}}):(0,r.jsx)(Ae.default,{})}}},62626:function(e,t,n){n.r(t);var r=n(52322);t.default=function(e){var t=e.text,n=void 0===t?"Missing":t;return(0,r.jsx)("div",{className:"flex min-h-screen",children:(0,r.jsxs)("div",{className:"text-center m-auto",children:[(0,r.jsx)("h1",{className:"font-semibold text-6xl",children:"404"}),(0,r.jsx)("hr",{className:"border-t-8 w-1/4 mx-auto my-4 border-blue-100"}),(0,r.jsx)("p",{className:"text-gray-500 text-xl",children:n})]})})}}}]);