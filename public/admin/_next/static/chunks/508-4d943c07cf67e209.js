"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{16508:function(e,t,r){r.d(t,{b:function(){return M}});var n=r(94776),l=r.n(n),o=r(52322),a=r(25026),i=r(53610),c=r(47763),s=r(2784),u=r(74424);function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){f(e,t,r[t])}))}return e}function m(e,t){return d({},e,f({},t.name,t.value))}var p={searchValue:"",multiple:!1,files:[],isUploading:!1,isLoading:!0,selectedFiles:[],updateValue:function(){}},b=(0,s.createContext)(p),v=function(){return(0,s.useContext)(b)},h=r(96454),y=r(6277),g=function(){return{itemsWrap:(0,y.Z)("grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-7 items-start min-h-[200px] py-6"),itemRoot:(0,y.Z)("relative block group"),itemSquare:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,y.Z)("aspect-square w-full rounded-lg bg-white shadow-md overflow-hidden relative",e?"group-hover:shadow-lg duration-200":"cursor-default")},itemLabel:(0,y.Z)("mt-2 overflow-hidden text-ellipsis font-semibold group-hover:underline")}},x=g(),j=function(e){var t=e.id,r=e.filename,n=v(),l=(n.multiple,n.selectedFiles),a=n.updateValue,u=r.split(".").at(-1)||"unknown",f=u.includes("png")||u.includes("jpg")||u.includes("gif"),d=(0,s.useCallback)((function(){a({name:"selectedFiles",value:t})}),[t,a]),m=(0,s.useMemo)((function(){return l.includes(t)}),[l,t]);return(0,o.jsxs)("button",{className:(0,y.Z)(x.itemRoot,"group"),onClick:d,type:"button",children:[(0,o.jsx)("div",{className:x.itemSquare(),children:f?(0,o.jsx)("img",{alt:"uploaded file",className:"absolute top-0 left-0 h-full w-full object-cover",src:"/api".concat(c.Ip.getApiRawUrl(t))}):(0,o.jsx)("div",{className:"flex h-full w-full",children:(0,o.jsx)("p",{className:"m-auto text-3xl font-bold text-gray-400",children:u})})}),(0,o.jsx)("h1",{className:x.itemLabel,children:r}),(0,o.jsx)("div",{className:"absolute top-0 right-0 m-2.5",children:(0,o.jsx)("div",{className:(0,y.Z)("flex h-10 w-10 rounded-lg border-2 border-project-border bg-white shadow-lg transition-all duration-150",m?"text-green-600":"text-white group-hover:text-blue-200"),children:(0,o.jsx)(i.R.Check,{className:(0,y.Z)("m-auto h-8 w-8",m?"scale-100":"scale-80 ")})})})]})},w=function(){var e=g();return(0,o.jsx)("div",{className:e.itemSquare(!1)})};function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e){var t=e.onDeleteClick,r=g(),n=v(),l=n.files,a=n.isLoading;return(0,o.jsx)("div",{className:r.itemsWrap,children:a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w,{}),(0,o.jsx)(w,{}),(0,o.jsx)(w,{}),(0,o.jsx)(w,{}),(0,o.jsx)(w,{}),(0,o.jsx)(w,{})]}):l.length?l.map((function(e){return(0,o.jsx)(j,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){O(e,t,r[t])}))}return e}({onDeleteClick:t},e),e.id)})):(0,o.jsx)(h.Z,{className:"col-span-1 sm:col-span-2 md:col-span-4"})})},k=r(11804),P=r(85482);function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}var E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k.x.get(e,{params:t}).then((function(e){return e.data}))};function Z(e){var t=(0,P.ZP)([c.Uq.getListUrl("files")+"/paged-items",e],E),r=t.data,n=t.error;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}({data:r,isLoading:!n&&!r,isError:n},C(t,["data","error"]))}var A=r(72861),I=r(52829),L=function(){var e=(0,I.$)().t;return(0,o.jsx)("div",{className:"mt-5 flex w-full items-center",children:(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(A.Z,{name:"query",className:"w-full",placeholder:e("Your filename, id, description...")})})})};function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t,r,n,l,o,a){try{var i=e[o](a),c=i.value}catch(s){return void r(s)}i.done?t(c):Promise.resolve(c).then(n,l)}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){q(e,t,r[t])}))}return e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,o=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){i=!0,l=c}finally{try{a||null==r.return||r.return()}finally{if(i)throw l}}return o}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}var M=function(e){var t=e.multiple,r=e.triggerClose,n=e.pickedFiles,f=e.onChange,v=(0,s.useState)(!1),h=v[0],y=v[1],g=z(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.useReducer)(m,d({},p,e))}(),2),x=g[0],j=g[1],w=(0,s.useState)(1),O=w[0],k=w[1],P=Z({page:O}),S=P.data,C=P.isError,E=P.isLoading,A=P.mutate,I=function(e){return function(){k("next"===e?O+1:O-1)}},R=(0,s.useCallback)((function(e){}),[]),q=(0,s.useCallback)(function(){var e,t=(e=l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({name:"isLoading",value:!0}),e.next=3,c.Ip.create(t[0],{root:"/"});case 3:j({name:"isLoading",value:!1}),A();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,l){var o=e.apply(t,r);function a(e){D(o,n,l,a,i,"next",e)}function i(e){D(o,n,l,a,i,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[j,A]),_=(0,u.uI)({onDrop:q,noClick:!0,noKeyboard:!0,multiple:!1}),M=_.open,V=_.getInputProps,$=(0,s.useCallback)((function(e){var l=e.name,o=e.value;if("selectedFiles"===l){var a=n.includes(o)?n.filter((function(e){return e!==o})):t?U(n).concat([o]):[o];return f(a),void(!t&&r&&r())}j({name:l,value:o})}),[j,f,r,t,n]),T=(0,s.useMemo)((function(){return F({},x,{multiple:!!t,files:(null===S||void 0===S?void 0:S.data)||[],isLoading:E||C,selectedFiles:n,updateValue:$})}),[x,S,E,C,$,t,n]);return(0,o.jsx)(b.Provider,{value:T,children:(0,o.jsxs)("div",{className:"p-5",children:[(0,o.jsx)("input",F({},V({className:"hidden"}))),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h1",{className:"text-4xl font-semibold",children:t?"Select files":"Select a file"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(a.z,{className:"flex-none",onClick:function(){return y(!h)},children:(0,o.jsx)(i.R.Search,{className:"!-mx-2 aspect-square w-8"})}),(0,o.jsx)(a.z,{color:"success",className:"flex-none",onClick:M,children:(0,o.jsx)(i.R.Plus,{className:"!-mx-3 aspect-square w-8"})})]})]}),h&&(0,o.jsx)(L,{}),(0,o.jsx)("hr",{className:"my-5 mb-2 h-0.5 w-full border-none bg-gray-200"}),(0,o.jsx)(N,{onDeleteClick:R}),(0,o.jsxs)("div",{className:"mt-5 flex items-center justify-between",children:[r&&(0,o.jsx)(a.z,{onClick:r,disabled:!n.length,color:"success",children:"Accept"}),(0,o.jsxs)("div",{className:"ml-auto flex items-center",children:[(0,o.jsx)(a.z,{disabled:1===O||E,onClick:I("prev"),className:"",children:(0,o.jsx)(i.R.ChevronLeft,{className:"h-6 w-6"})}),(0,o.jsx)("div",{className:"flex items-center justify-center rounded-lg bg-gray-100 py-2 px-4 font-semibold",children:O}),(0,o.jsx)(a.z,{disabled:(null===S||void 0===S?void 0:S.last_page)===O||E,onClick:I("next"),children:(0,o.jsx)(i.R.ChevronRight,{className:"h-6 w-6"})})]})]})]})})}},96454:function(e,t,r){var n=r(52322),l=r(53610),o=r(6277),a=r(52829);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}t.Z=function(e){var t=e.className,r=c(e,["className"]),s=(0,a.$)().t;return(0,n.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({className:(0,o.Z)("flex min-h-[300px] flex-col justify-center text-center text-xl font-semibold text-gray-400",t)},r,{children:[(0,n.jsx)(l.R.QuestionMark,{size:10,className:"mx-auto"}),(0,n.jsx)("p",{children:s("No items available...")})]}))}}}]);