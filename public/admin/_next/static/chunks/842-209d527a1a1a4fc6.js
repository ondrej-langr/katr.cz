"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[842],{16508:function(e,t,r){r.d(t,{b:function(){return W}});var n=r(94776),l=r.n(n),o=r(52322),a=r(85409),i=r(11794),c=r(24917),s=r(53610),u=r(41277),f=r(2784),d=r(95720),m=r(52829);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){p(e,t,r[t])}))}return e}function h(e,t){return b({},e,p({},t.name,t.value))}var v={searchValue:"",multiple:!1,files:[],isUploading:!1,isLoading:!0,selectedFiles:[],updateValue:function(){}},g=(0,f.createContext)(v),j=function(){return(0,f.useContext)(g)},y=r(96454),x=r(6277),w=function(){return{itemsWrap:(0,x.Z)("grid grid-cols-1 sm:grid-cols-2 gap-7 items-start min-h-[200px] my-3 py-3 max-h-[520px] overflow-auto"),itemRoot:(0,x.Z)("relative block group"),itemSquare:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,x.Z)("aspect-[3/2] w-full rounded-lg bg-white shadow-md overflow-hidden relative",e?"group-hover:shadow-lg duration-200":"cursor-default")},itemLabel:(0,x.Z)("mt-2 overflow-hidden text-ellipsis font-semibold group-hover:underline text-left mb-0 leading-8 block whitespace-nowrap")}},O=r(59401),N=w(),k=function(e){var t=e.id,r=e.filename,n=j(),l=n.selectedFiles,a=n.updateValue,i=r.split(".").at(-1)||"unknown",c=i.includes("png")||i.includes("jpg")||i.includes("gif"),d=(0,f.useCallback)((function(){a({name:"selectedFiles",value:t})}),[t,a]),m=(0,f.useMemo)((function(){return l.includes(t)}),[l,t]);return(0,o.jsxs)(O.k,{className:(0,x.Z)(N.itemRoot,"group"),onClick:d,type:"button",title:r,children:[(0,o.jsx)("div",{className:N.itemSquare(),children:c?(0,o.jsx)("img",{alt:"uploaded file",className:"absolute top-0 left-0 h-full w-full object-cover",src:"/api".concat(u.Ip.getApiRawUrl(t))}):(0,o.jsx)("div",{className:"flex h-full w-full",children:(0,o.jsx)("p",{className:"m-auto text-3xl font-bold text-gray-400",children:i})})}),(0,o.jsx)("h3",{className:N.itemLabel,children:r}),(0,o.jsx)("div",{className:"absolute top-0 right-0 m-2.5",children:(0,o.jsx)("div",{className:(0,x.Z)("flex h-10 w-10 rounded-lg border-2 border-project-border bg-white shadow-lg transition-all duration-150",m?"text-green-600":"text-white group-hover:text-blue-200"),children:(0,o.jsx)(s.R.Check,{className:(0,x.Z)("m-auto h-8 w-8 !fill-transparent",m?"scale-100":"scale-80 ")})})})]})},P=r(24774),C=function(){var e=w();return(0,o.jsx)(P.O,{className:e.itemSquare(!1)})};function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(e){var t=e.onDeleteClick,r=w(),n=j(),l=n.files,a=n.isLoading,i=n.isUploading;return(0,o.jsxs)("div",{className:r.itemsWrap,children:[a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C,{}),(0,o.jsx)(C,{}),(0,o.jsx)(C,{}),(0,o.jsx)(C,{}),(0,o.jsx)(C,{}),(0,o.jsx)(C,{})]}):l.length?l.map((function(e){return(0,o.jsx)(k,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}({onDeleteClick:t},e),e.id)})):(0,o.jsx)(y.Z,{className:"col-span-1 sm:col-span-2 md:col-span-4"}),i&&(0,o.jsx)(C,{})]})},E=r(11804),Z=r(85482);function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E.x.get(e,{params:t}).then((function(e){return e.data}))};function L(e){var t=(0,Z.ZP)([u.Uq.getListUrl("files")+"/paged-items",e],z),r=t.data,n=t.error;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){I(e,t,r[t])}))}return e}({data:r,isLoading:!n&&!r,isError:n},R(t,["data","error"]))}var D=r(34272),F=function(){var e=(0,m.$)().t;return(0,o.jsx)("div",{className:"flex w-full items-center",children:(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(D.o,{icon:(0,o.jsx)(s.R.Search,{size:20}),name:"query",className:"w-full",placeholder:e("Your filename, id, description...")})})})};function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t,r,n,l,o,a){try{var i=e[o](a),c=i.value}catch(s){return void r(s)}i.done?t(c):Promise.resolve(c).then(n,l)}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){$(e,t,r[t])}))}return e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,o=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){i=!0,l=c}finally{try{a||null==r.return||r.return()}finally{if(i)throw l}}return o}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}var W=function(e){e.title;var t=e.multiple,r=e.triggerClose,n=e.pickedFiles,p=e.onChange,j=e.filter,y=(0,m.$)().t,x=_(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.useReducer)(h,b({},v,e))}(),2),w=x[0],O=x[1],N=(0,f.useState)(1),k=N[0],P=N[1],C=L(M({page:k},j?Object.fromEntries(j.map((function(e,t){var r=_(e,3),n=r[0],l=r[1],o=r[2];return["where[".concat(t,"]"),'["'.concat(n,'","').concat(l,'","').concat(o,'"]')]}))):{})),S=C.data,E=C.isError,Z=C.isLoading,I=C.mutate,R=(0,f.useCallback)((function(e){}),[]),z=(0,f.useCallback)(function(){var e,t=(e=l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({name:"isLoading",value:!0}),e.next=3,u.Ip.create(t[0],{root:"/"});case 3:O({name:"isLoading",value:!1}),I();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,l){var o=e.apply(t,r);function a(e){U(o,n,l,a,i,"next",e)}function i(e){U(o,n,l,a,i,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[O,I]),D=(0,d.uI)({onDrop:z,noClick:!0,noKeyboard:!0,multiple:!1}),q=D.open,$=D.getInputProps,T=(0,f.useCallback)((function(e){var l=e.name,o=e.value;if("selectedFiles"===l){var a=n.includes(o)?n.filter((function(e){return e!==o})):t?V(n).concat([o]):[o];return p(a),void(!t&&r&&r())}O({name:l,value:o})}),[O,p,r,t,n]),W=(0,f.useMemo)((function(){return M({},w,{multiple:!!t,files:(null===S||void 0===S?void 0:S.data)||[],isLoading:Z||E,selectedFiles:n,updateValue:T})}),[w,S,Z,E,T,t,n]);return(0,o.jsxs)(g.Provider,{value:W,children:[(0,o.jsx)("input",M({},$({className:"hidden"}))),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)(F,{}),(0,o.jsx)(a.A,{color:"blue",size:42,variant:"filled",className:"flex-none",title:y("Add new"),ml:"xl",onClick:q,children:(0,o.jsx)(s.R.Plus,{className:"!-mx-3 aspect-square w-6"})})]}),(0,o.jsx)(A,{onDeleteClick:R}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)(i.t,{total:(null===S||void 0===S?void 0:S.last_page)||1,onChange:P,className:"items-center"}),(0,o.jsx)("div",{className:"flex items-center gap-2",children:r&&(0,o.jsx)(c.z,{onClick:r,disabled:!n.length,size:"md",color:"green",ml:"xl",children:"Accept"})})]})]})}},96454:function(e,t,r){var n=r(52322),l=r(53610),o=r(6277),a=r(52829);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}t.Z=function(e){var t=e.className,r=c(e,["className"]),s=(0,a.$)().t;return(0,n.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({className:(0,o.Z)("flex min-h-[300px] flex-col justify-center text-center text-xl font-semibold text-gray-400",t)},r,{children:[(0,n.jsx)(l.R.QuestionMark,{size:40,className:"mx-auto"}),(0,n.jsx)("p",{children:s("No items available...")})]}))}},64842:function(e,t,r){var n=r(52322),l=r(31005),o=r(16508),a=r(74062),i=r(81428),c=r(24917),s=r(53610),u=r(6277),f=r(2784),d=r(52829),m=(0,f.forwardRef)((function(e,t){var r=e.wrapperClassName,m=e.label,p=e.className,b=e.selected,h=e.onChange,v=e.onBlur,g=e.multiple,j=e.error,y=(0,f.useState)(!1),x=y[0],w=y[1],O=(0,d.$)().t,N=(0,f.useCallback)((function(e){h(g?e:e[0]||null)}),[h,g]),k=(0,f.useCallback)((function(){w(!1),v&&v()}),[v,w]),P=(0,f.useMemo)((function(){return null===b||void 0===b?[]:Array.isArray(b)?b:[b]}),[b]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:(0,u.Z)(r,p),children:(0,n.jsx)(a.S,{size:"md",label:m,error:j,children:(0,n.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,n.jsx)("div",{className:"relative mr-6 aspect-square w-20 overflow-hidden rounded-full",children:P.length?(0,n.jsx)(l.Z,{imageId:P[0],className:"absolute h-full w-full object-cover object-center"}):(0,n.jsx)("div",{className:"absolute flex h-full w-full bg-gray-200",children:(0,n.jsx)(s.R.Photo,{size:40,className:"icon icon-tabler icon-tabler-photo m-auto"})})}),(0,n.jsx)(i.J,{withArrow:!0,opened:x,onClose:k,target:(0,n.jsx)(c.z,{className:"flex-none",color:"ghost",leftIcon:(0,n.jsx)(s.R.Pencil,{size:20}),size:"md",onClick:function(){return w(!0)},children:O("Change")}),width:590,position:"bottom",children:(0,n.jsx)(o.b,{filter:[["mimeType","regexp","^image/.*$"]],title:O("Choose an image"),triggerClose:k,multiple:g,pickedFiles:P,onChange:N})})]})})})})}));t.Z=m}}]);