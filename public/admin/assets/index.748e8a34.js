import{r as f,n as j,a0 as A,aJ as R,af as L,l as q,x as z,ax as V,ap as T,aq as _,aK as W,j as u,Y as k,h as y,Z as U,a7 as Y,z as B,az as F}from"./index.db4443a5.js";import{T as G}from"./TableView.ed5fd718.js";var J=Object.defineProperty,K=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,N=(c,n,s)=>n in c?J(c,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[n]=s,X=(c,n)=>{for(var s in n||(n={}))Z.call(n,s)&&N(c,s,n[s]);if(M)for(var s of M(n))H.call(n,s)&&N(c,s,n[s]);return c},$=(c,n)=>K(c,Q(n));function ee(c=[]){const[n,s]=f.exports.useState(c);return[n,{setState:s,append:(...t)=>s(a=>[...a,...t]),prepend:(...t)=>s(a=>[...t,...a]),insert:(t,...a)=>s(i=>[...i.slice(0,t),...a,...i.slice(t)]),pop:()=>s(t=>{const a=[...t];return a.pop(),a}),shift:()=>s(t=>{const a=[...t];return a.shift(),a}),apply:t=>s(a=>a.map((i,r)=>t(i,r))),applyWhere:(t,a)=>s(i=>i.map((r,p)=>t(r,p)?a(r,p):r)),remove:(...t)=>s(a=>a.filter((i,r)=>!t.includes(r))),reorder:({from:t,to:a})=>s(i=>{const r=[...i],p=i[t];return r.splice(t,1),r.splice(a,0,p),r}),setItem:(t,a)=>s(i=>{const r=[...i];return r[t]=a,r}),setItemProp:(t,a,i)=>s(r=>{const p=[...r];return p[t]=$(X({},p[t]),{[a]:i}),p}),filter:t=>{s(a=>a.filter(t))}}]}const ae=({})=>{const c=j(),{modelId:n}=A(),[s,P]=f.exports.useState(1),e=R(),l=L(),[E,x]=f.exports.useState(!1),{data:o,isLoading:w,isError:I,mutate:O}=q(e==null?void 0:e.name,{page:s}),{t:g}=z(),[h,v]=ee(o==null?void 0:o.data);f.exports.useEffect(()=>{o!=null&&o.data&&v.setState(o==null?void 0:o.data)},[o]);const t=f.exports.useMemo(()=>{if(!o)return!1;const{data:d,...m}=o;return m},[o]),a=async({source:d,destination:m})=>{if((m==null?void 0:m.index)===void 0)return;x(!0);const b=h[d.index].id,S=h[m.index].id;b!==S&&(v.reorder({from:d.index,to:m.index}),await _.reorder(e.name,{fromId:b,toId:S})),x(!1)},i=f.exports.useMemo(()=>{if(!!e)return V(e)},[e]),r=e&&(l==null?void 0:l.can({action:"delete",targetModel:e==null?void 0:e.name}))?async d=>{confirm(g(T.ON_DELETE_REQUEST_PROMPT))&&(await _.delete({id:d,model:e==null?void 0:e.name}),O())}:void 0,p=e&&(l==null?void 0:l.can({action:"create",targetModel:e==null?void 0:e.name}))?async d=>{confirm(g(T.ENTRY_ITEM_DUPLICATE))&&c(_.getDuplicateUrl(d,e==null?void 0:e.name))}:void 0,D=()=>c(_.getCreateUrl(e==null?void 0:e.name)),C=d=>c(_.getUrl(d,e==null?void 0:e.name));return f.exports.useEffect(()=>P(1),[n]),!e||!i||W(e.name)?u(k,{text:g("This model with this id does not exist.")}):y(U,{children:[y("div",{className:"flex w-full flex-col justify-between gap-5 py-10 md:flex-row",children:[u("h1",{className:"text-3xl font-semibold capitalize",children:g(e.name)}),u("div",{className:"flex items-center gap-5",children:(l==null?void 0:l.can({action:"create",targetModel:e.name}))&&y(Y,{color:"green",className:" items-center font-semibold uppercase",size:"md",onClick:D,children:[u("span",{className:"hidden md:block",children:g("Add new entry")}),u(B,{className:"inline-block h-5 w-5 md:ml-3"})," "]})})]}),u(G,{isLoading:w||I,items:h,columns:i,metadata:t||void 0,onEditAction:C,onDeleteAction:r,onDuplicateAction:p,ordering:e.hasOrdering,onDragEnd:a,disabled:E,pagination:u(F,{total:(o==null?void 0:o.last_page)||1,page:s,onChange:P})})]})};export{ae as default};
