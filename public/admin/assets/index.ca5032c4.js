import{r as t,a as g,u as D,m as U,aI as K,aH as j,e as A,R as F,aa as B,aP as E,h as r,j as a,aQ as G,A as P,T as R,F as W,az as k,aR as q,p as v,ae as z,n as Q,L as H,aS as J,aT as V,O as X}from"./index.ce9e6114.js";const Y=(s,h)=>{const i=t.exports.useCallback(()=>g.generalTranslations.getMany(s).then(({data:u})=>u.data),[s]),c=t.exports.useMemo(()=>["generalTranslations",s],[s]),n=D(c,i,{enabled:!!s,...h});return t.exports.useMemo(()=>({...n,key:c}),[n,c])},_=()=>{const{t:s}=U(),h=K(),i=j(),c=A(),{lang:n}=F(),u=B(),[f,{open:b,close:N}]=E(!1),[S,x]=t.exports.useState(!1),{data:o,isLoading:C,refetch:p}=Y(n,{refetchOnMount:!f,refetchOnWindowFocus:!f}),[l,w]=t.exports.useState(o),I=t.exports.useMemo(()=>Object.entries(l||{}).sort(([e],[d])=>e.localeCompare(d)),[l]),L=t.exports.useCallback(async(e,d)=>{w({...l||{},[e]:d})},[l]),T=async e=>{(o==null?void 0:o[e])!=l[e]&&(x(!0),await u({title:"Saving",message:s("Saving, please wait..."),successMessage:s("Key translated!")},async()=>{await g.generalTranslations.updateTranslation(e,l[e],n),await p(),x(!1),N()}))};t.exports.useEffect(()=>{w(o)},[o]),t.exports.useEffect(()=>{p()},[h]);const M=t.exports.useCallback(e=>async()=>{if(!!confirm(s("Do you really want to delete this key for ALL languages?")))try{u({title:"Deleting",message:s("Deleting selected key, please wait..."),successMessage:s("Key deleted!")},async()=>{await g.generalTranslations.deleteKey(e),await p()})}catch{}},[s,p]),y=r("tr",{children:[a("th",{children:s("Translation key")}),a("th",{className:"w-full max-w-[350px]",children:s("Translation value")}),a("th",{className:"w-full max-w-[100px] opacity-0",children:"Tools"})]}),O=I.map(([e,d])=>r("tr",{children:[a("td",{className:"align-top",children:e}),a("td",{className:"w-full max-w-[350px]",children:a(G,{onFocus:b,onBlur:()=>T(e),onChange:m=>L(e,m.currentTarget.value),onKeyDown:m=>{m.key==="Enter"&&T(e)},value:d,placeholder:e})}),a("td",{className:"w-full max-w-[100px]",children:a(P,{onClick:M(e),color:"red",children:a(R,{})})})]},e));return r(W,{children:[r(k,{position:"apart",mb:"md",mt:"md",children:[a(q,{label:"",value:n,disabledOptions:[i==null?void 0:i.i18n.default],onChange:e=>e&&c(v.settings.translations(e).list)}),a(z,{to:v.settings.translations(n).create,color:"green",leftIcon:a(Q,{}),component:H,children:s("Add new")})]}),r("div",{className:"relative min-h-[400px]",children:[a(J,{visible:C||S,overlayBlur:2}),r(V,{className:"-mx-5",horizontalSpacing:"xl",verticalSpacing:"sm",children:[a("thead",{children:y}),a("tbody",{children:O}),a("tfoot",{children:y})]})]}),a(X,{})]})};export{_ as GeneralTranslationsSettings,_ as default};
