import{l as O,aH as K,az as M,r as n,a6 as U,aI as j,b as E,ad as w,h as l,j as a,aJ as F,o as B,T as W,F as k,as as q,aK as z,W as A,m as D,L as G,aL as H,aM as J,O as P}from"./index.b56cc1bf.js";const Q=()=>{const{t:s}=O(),i=K(),y=M(),[d,v]=n.exports.useState(i==null?void 0:i.i18n.default),p=U(),[u,{open:T,close:S}]=j(!1),[I,m]=n.exports.useState(!1),{data:t,mutate:r,isLoading:b}=E("generalTranslations",{lang:d||"en"},{revalidateIfStale:!u,revalidateOnFocus:!u,revalidateOnMount:!u}),[o,g]=n.exports.useState(t==null?void 0:t.data),N=n.exports.useCallback(async(e,c)=>{g({...o||{},...c.length>0?{[e]:c}:{}})},[o]),f=async e=>{(t==null?void 0:t.data[e])!=o[e]&&(m(!0),await p({title:"Saving",message:s("Saving translation, please wait..."),successMessage:s("Key translated!")},async()=>{await w.update({id:e,model:"generalTranslations",language:d},{value:o[e]}),await r(),m(!1),S()}))};n.exports.useEffect(()=>{g(t==null?void 0:t.data)},[t]),n.exports.useEffect(()=>{r()},[y]);const L=n.exports.useCallback(e=>async()=>{if(!!confirm(s("Do you really want to delete this key?")))try{p({title:"Deleting",message:s("Deleting selected key, please wait..."),successMessage:s("Key deleted!")},async()=>{await w.delete({id:e,model:"generalTranslations"}),await r()})}catch{}},[s,r]),x=l("tr",{children:[a("th",{children:s("Translation key")}),a("th",{className:"w-full max-w-[350px]",children:s("Translation value")}),a("th",{className:"w-full max-w-[100px] opacity-0",children:"Tools"})]}),C=Object.entries(o||{}).map(([e,c])=>l("tr",{children:[a("td",{children:e}),a("td",{className:"w-full max-w-[350px]",children:a(F,{onFocus:T,onBlur:()=>f(e),onChange:h=>N(e,h.currentTarget.value),onKeyDown:h=>{h.key==="Enter"&&f(e)},value:c})}),a("td",{className:"w-full max-w-[100px]",children:a(B,{onClick:L(e),color:"red",children:a(W,{})})})]},e));return l(k,{children:[l(q,{position:"apart",mb:"md",mt:"md",children:[a(z,{label:"",value:d,onChange:e=>e&&v(e)}),a(A,{to:"/settings/translations/keys/create",color:"green",leftIcon:a(D,{}),component:G,children:s("Add new")})]}),l("div",{className:"relative min-h-[400px]",children:[a(H,{visible:b||I,overlayBlur:2}),l(J,{className:"-mx-5",horizontalSpacing:"xl",verticalSpacing:"sm",children:[a("thead",{children:x}),a("tbody",{children:C}),a("tfoot",{children:x})]})]}),a(P,{})]})};export{Q as GeneralTranslationsSettings,Q as default};
